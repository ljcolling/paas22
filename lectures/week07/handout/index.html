<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Dr Lazaros Gonidis">

<title>Psychology As A Science - Lecture 7: Describing measurements II</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../../">
<script src="../../../site_libs/quarto-html/quarto.js"></script>
<script src="../../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script type="module" src="../../../site_libs/quarto-ojs/quarto-ojs-runtime.js"></script>
<link href="../../../site_libs/quarto-ojs/quarto-ojs.css" rel="stylesheet">
<script src="../../../site_libs/htmlwidgets-1.6.2/htmlwidgets.js"></script>
<link href="../../../site_libs/niceQuiz-0.0.1/styles.css" rel="stylesheet">
<script src="../../../site_libs/niceQuiz-0.0.1/lib.js"></script>
<script src="../../../site_libs/quiz-binding-0.1.0/quiz.js"></script>

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<link rel="stylesheet" href="../../../styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../../../index.html">
    <span class="navbar-title">Psychology As A Science</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../../handouts.html" rel="" target="">
 <span class="menu-text">Lecture handouts</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../../slides.html" rel="" target="">
 <span class="menu-text">Lecture slides</span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools">
  <a href="" class="quarto-reader-toggle quarto-navigation-tool px-1" onclick="window.quartoToggleReader(); return false;" title="Toggle reader mode">
  <div class="quarto-reader-toggle-btn">
  <i class="bi"></i>
  </div>
</a>
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#range" id="toc-range" class="nav-link active" data-scroll-target="#range">Range</a></li>
  <li><a href="#interquartile-range" id="toc-interquartile-range" class="nav-link" data-scroll-target="#interquartile-range">Interquartile range</a></li>
  <li><a href="#deviation" id="toc-deviation" class="nav-link" data-scroll-target="#deviation">Deviation</a></li>
  <li><a href="#variance" id="toc-variance" class="nav-link" data-scroll-target="#variance">Variance</a></li>
  <li><a href="#standard-deviation" id="toc-standard-deviation" class="nav-link" data-scroll-target="#standard-deviation">Standard deviation</a></li>
  <li><a href="#understanding-the-relationship-between-samples-and-populations" id="toc-understanding-the-relationship-between-samples-and-populations" class="nav-link" data-scroll-target="#understanding-the-relationship-between-samples-and-populations">Understanding the relationship between samples and populations</a></li>
  <li><a href="#check-your-understanding" id="toc-check-your-understanding" class="nav-link" data-scroll-target="#check-your-understanding">Check your understanding</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Lecture 7: Describing measurements II</h1>
<p class="subtitle lead">Measures of spread</p>
</div>


<div class="quarto-title-meta-author">
  <div class="quarto-title-meta-heading">Author</div>
  <div class="quarto-title-meta-heading">Affiliation</div>
  
    <div class="quarto-title-meta-contents">
    <a href="mailto:L.Gonidis@sussex.ac.uk">Dr Lazaros Gonidis</a> 
  </div>
    <div class="quarto-title-meta-contents">
        <p class="affiliation">
            <a href="https://profiles.sussex.ac.uk/p596170-lazaros-gonidis">
            School of Psychology, University of Sussex
            </a>
          </p>
      </div>
    </div>

<div class="quarto-title-meta">

      
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">16 November, 2023</p>
    </div>
  </div>
    
  
  </div>
  

</header>

<p>Last week we started learning about the tools we can use to describe data. Specifically, we learned about the <strong>mean</strong>, <strong>mode</strong>, and <strong>median</strong>. And we learned about how they are different ways of describing the typical value. But apart describing the <em>typical value</em>, we might also want a way to describe how <strong>spread</strong> out the data is around this value. We’ll start this week off by talking about ways to measure this spread. ## Measures of spread</p>
<p>If you look at <a href="#fig-hist-width">Figure&nbsp;1</a> you’ll see two data sets that are centered at the same value but have very different amounts of variability. Both sets of data have a mean of 0. But, as you can see, the values of one are spread out much more widely than the values of the other.</p>
<div class="cell">
<div class="cell-output-display">
<div id="fig-hist-width" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="index_files/figure-html/fig-hist-width-1.png" class="img-fluid figure-img" width="672"></p>
<figcaption class="figure-caption">Figure&nbsp;1: Histogram of two distributions with equal means but different spreads. <em>N = 10,000</em> in each case.</figcaption>
</figure>
</div>
</div>
</div>
<p>This is why, apart from measures of central tendency, we also need measures that tell us about the spread, or <em>dispersion</em> of a variable. Once again, there are several measures of spread available, and we’ll talk about five of them:</p>
<ol type="1">
<li><p>Range</p></li>
<li><p>Interquartile range</p></li>
<li><p>Deviation</p></li>
<li><p>Variance</p></li>
<li><p>Standard deviation</p></li>
</ol>
<section id="range" class="level3">
<h3 class="anchored" data-anchor-id="range">Range</h3>
<p>The <strong>range</strong> of a variable is the distance between its smallest and largest values. For example, if we gather a sample of 100 participants and the youngest is 17 years old, and the oldest is 67 years old, then the range of our age variable in this sample if 67 - 15 = 50 years.</p>
<p>Checking the range of a variable can tell us something about whether our data makes sense. Let’s say that we’ve run a study examining reading ability in primary school age children. In this study, we’ve also measured the ages of the children. If the range of our age variable is, for example, 50 years, then that tells us that we’ve measured <em>at least</em> one person that is not school age.</p>
<p>Beyond that, the range doesn’t tell us much of the information we’d usually like to know. This is because the range is <em>extremely</em> <strong>sensitive to outliers</strong>. What this means is that it only takes one extreme value to inflate the range. In our school example, it might be that all but one of the people measured is actually in the correct age range. But the range alone cannot tell us if this is the case. You can explore the range in <a href="#exm-range-only">Explorable&nbsp;1</a> below.</p>
<div class="callout callout-style-simple callout-tip no-icon">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-body-container">
<div id="exm-range-only" class="theorem example">
<p><span class="theorem-title"><strong>Explorable 1 (Explore the Range) </strong></span>&nbsp;</p>
</div>
<p>To explore the <strong>range</strong>, first add some data points. Notice how the range is based on the two most extreme value. You can add more data points anywhere in the middle and the range won’t change. Try clicking on <strong>Preset 1</strong> and then on <strong>Preset 2</strong>. Notice how the data points in <strong>Preset 1</strong> are more bunched in the middle, but in <strong>Preset 2</strong> they are more spread out. Although the data points in the middle are different in these two displays, the extreme points are unchanged, so the range is unchanged.</p>
<!-- OHQ Code {{{ -->
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb1" data-startfrom="0" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line -1;"><span id="cb1-0"><a href="#cb1-0" aria-hidden="true" tabindex="-1"></a><span class="fu">data_mean_median</span>(rangeplot<span class="op">,</span> measures[<span class="dv">0</span>]<span class="op">.</span><span class="at">fun</span><span class="op">,</span> <span class="st">"rangeplot"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-1" data-nodetype="expression">

</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb2" data-startfrom="0" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line -1;"><span id="cb2-0"><a href="#cb2-0" aria-hidden="true" tabindex="-1"></a>mutable rangeplot <span class="op">=</span> []</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-2" data-nodetype="declaration">

</div>
</div>
</div>
<div class="panel-center panel-grid">
<div class="g-col-24 g-col-lg-20 g-start-lg-2">
<div>
<div class="sourceCode cell-code hidden" id="cb3" data-startfrom="3" data-source-offset="-0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 2;"><span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>Inputs<span class="op">.</span><span class="fu">button</span>(<span class="st">"Preset 1"</span><span class="op">,</span> {</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">reduce</span><span class="op">:</span> (d) <span class="kw">=&gt;</span> {</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>  mutable rangeplot <span class="op">=</span> [</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>      { <span class="dt">x</span><span class="op">:</span> <span class="dv">14</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="dv">87</span> }<span class="op">,</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>      { <span class="dt">x</span><span class="op">:</span> <span class="dv">462</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="dv">93</span> }<span class="op">,</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>      { <span class="dt">x</span><span class="op">:</span> <span class="dv">161</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="dv">95</span> }<span class="op">,</span></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>      { <span class="dt">x</span><span class="op">:</span> <span class="dv">289</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="dv">82</span> }<span class="op">,</span></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>      { <span class="dt">x</span><span class="op">:</span> <span class="dv">224</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="dv">87</span> }<span class="op">,</span></span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a>      { <span class="dt">x</span><span class="op">:</span> <span class="dv">268</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="dv">54</span> }<span class="op">,</span></span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a>      { <span class="dt">x</span><span class="op">:</span> <span class="dv">178</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="dv">62</span> }<span class="op">,</span></span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a>      { <span class="dt">x</span><span class="op">:</span> <span class="dv">52</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="dv">104</span> }<span class="op">,</span></span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a>      { <span class="dt">x</span><span class="op">:</span> <span class="dv">352</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="dv">92</span> }<span class="op">,</span></span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a>      { <span class="dt">x</span><span class="op">:</span> <span class="dv">271</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="dv">122</span> }<span class="op">,</span></span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a>      { <span class="dt">x</span><span class="op">:</span> <span class="dv">177</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="dv">138</span> }<span class="op">,</span></span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a>      { <span class="dt">x</span><span class="op">:</span> <span class="dv">125</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="dv">97</span> }<span class="op">,</span></span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a>      { <span class="dt">x</span><span class="op">:</span> <span class="dv">412</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="dv">91</span> }</span>
<span id="cb3-19"><a href="#cb3-19" aria-hidden="true" tabindex="-1"></a>    ]</span>
<span id="cb3-20"><a href="#cb3-20" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb3-21"><a href="#cb3-21" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb3-22"><a href="#cb3-22" aria-hidden="true" tabindex="-1"></a>Inputs<span class="op">.</span><span class="fu">button</span>(<span class="st">"Preset 2"</span><span class="op">,</span> {</span>
<span id="cb3-23"><a href="#cb3-23" aria-hidden="true" tabindex="-1"></a>  <span class="dt">reduce</span><span class="op">:</span> (d) <span class="kw">=&gt;</span> {</span>
<span id="cb3-24"><a href="#cb3-24" aria-hidden="true" tabindex="-1"></a>  mutable rangeplot <span class="op">=</span> [</span>
<span id="cb3-25"><a href="#cb3-25" aria-hidden="true" tabindex="-1"></a>  { <span class="dt">x</span><span class="op">:</span> <span class="dv">14</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="dv">87</span> }<span class="op">,</span></span>
<span id="cb3-26"><a href="#cb3-26" aria-hidden="true" tabindex="-1"></a>  { <span class="dt">x</span><span class="op">:</span> <span class="dv">462</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="dv">93</span> }<span class="op">,</span></span>
<span id="cb3-27"><a href="#cb3-27" aria-hidden="true" tabindex="-1"></a>  { <span class="dt">x</span><span class="op">:</span> <span class="dv">161</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="dv">95</span> }<span class="op">,</span></span>
<span id="cb3-28"><a href="#cb3-28" aria-hidden="true" tabindex="-1"></a>  { <span class="dt">x</span><span class="op">:</span> <span class="dv">289</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="dv">117</span> }<span class="op">,</span></span>
<span id="cb3-29"><a href="#cb3-29" aria-hidden="true" tabindex="-1"></a>  { <span class="dt">x</span><span class="op">:</span> <span class="dv">224</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="dv">87</span> }<span class="op">,</span></span>
<span id="cb3-30"><a href="#cb3-30" aria-hidden="true" tabindex="-1"></a>  { <span class="dt">x</span><span class="op">:</span> <span class="dv">230</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="dv">35</span> }<span class="op">,</span></span>
<span id="cb3-31"><a href="#cb3-31" aria-hidden="true" tabindex="-1"></a>  { <span class="dt">x</span><span class="op">:</span> <span class="dv">224</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="dv">62</span> }<span class="op">,</span></span>
<span id="cb3-32"><a href="#cb3-32" aria-hidden="true" tabindex="-1"></a>  { <span class="dt">x</span><span class="op">:</span> <span class="dv">154</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="dv">44</span> }<span class="op">,</span></span>
<span id="cb3-33"><a href="#cb3-33" aria-hidden="true" tabindex="-1"></a>  { <span class="dt">x</span><span class="op">:</span> <span class="dv">290</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="dv">77</span> }<span class="op">,</span></span>
<span id="cb3-34"><a href="#cb3-34" aria-hidden="true" tabindex="-1"></a>  { <span class="dt">x</span><span class="op">:</span> <span class="dv">226</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="dv">115</span> }<span class="op">,</span></span>
<span id="cb3-35"><a href="#cb3-35" aria-hidden="true" tabindex="-1"></a>  { <span class="dt">x</span><span class="op">:</span> <span class="dv">228</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="dv">142</span> }<span class="op">,</span></span>
<span id="cb3-36"><a href="#cb3-36" aria-hidden="true" tabindex="-1"></a>  { <span class="dt">x</span><span class="op">:</span> <span class="dv">156</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="dv">72</span> }<span class="op">,</span></span>
<span id="cb3-37"><a href="#cb3-37" aria-hidden="true" tabindex="-1"></a>  { <span class="dt">x</span><span class="op">:</span> <span class="dv">294</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="dv">46</span> }</span>
<span id="cb3-38"><a href="#cb3-38" aria-hidden="true" tabindex="-1"></a>    ]</span>
<span id="cb3-39"><a href="#cb3-39" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb3-40"><a href="#cb3-40" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb3-41"><a href="#cb3-41" aria-hidden="true" tabindex="-1"></a>Inputs<span class="op">.</span><span class="fu">button</span>(<span class="st">"Clear"</span><span class="op">,</span> {</span>
<span id="cb3-42"><a href="#cb3-42" aria-hidden="true" tabindex="-1"></a>  <span class="dt">reduce</span><span class="op">:</span> (d) <span class="kw">=&gt;</span> {</span>
<span id="cb3-43"><a href="#cb3-43" aria-hidden="true" tabindex="-1"></a>    mutable summary <span class="op">=</span> <span class="bu">Object</span><span class="op">.</span><span class="fu">assign</span>({}<span class="op">,</span> mutable summary<span class="op">,</span> { <span class="dt">rangeplot</span><span class="op">:</span> [] })<span class="op">;</span></span>
<span id="cb3-44"><a href="#cb3-44" aria-hidden="true" tabindex="-1"></a>    mutable rangeplot <span class="op">=</span> []</span>
<span id="cb3-45"><a href="#cb3-45" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb3-46"><a href="#cb3-46" aria-hidden="true" tabindex="-1"></a>})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell panel-center quarto-layout-panel">
<div class="quarto-layout-row quarto-layout-valign-top">
<div class="cell-output cell-output-display quarto-layout-cell" style="flex-basis: 33.3%;justify-content: center;">
<div>
<div id="ojs-cell-3-1" data-nodetype="expression">

</div>
</div>
</div>
<div class="cell-output cell-output-display quarto-layout-cell" style="flex-basis: 33.3%;justify-content: center;">
<div>
<div id="ojs-cell-3-2" data-nodetype="expression">

</div>
</div>
</div>
<div class="cell-output cell-output-display quarto-layout-cell" style="flex-basis: 33.3%;justify-content: center;">
<div>
<div id="ojs-cell-3-3" data-nodetype="expression">

</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb4" data-startfrom="0" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line -1;"><span id="cb4-0"><a href="#cb4-0" aria-hidden="true" tabindex="-1"></a><span class="fu">md</span><span class="vs">`The range of this data is: </span><span class="sc">${</span>(d3<span class="op">.</span><span class="fu">max</span>(summary<span class="op">.</span><span class="at">rangeplot</span><span class="op">.</span><span class="at">data</span>) <span class="op">-</span> d3<span class="op">.</span><span class="fu">min</span>(summary<span class="op">.</span><span class="at">rangeplot</span><span class="op">.</span><span class="at">data</span>)) <span class="op">||</span> htl<span class="op">.</span><span class="fu">html</span><span class="vs">`&lt;font color="red"&gt;no data&lt;/font&gt;`</span><span class="sc">}</span><span class="vs">`</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-4" data-nodetype="expression">

</div>
</div>
</div>
<!-- }}} -->
</div>
</div>
</div>
</section>
<section id="interquartile-range" class="level3">
<h3 class="anchored" data-anchor-id="interquartile-range">Interquartile range</h3>
<p>A slightly more useful measure than the range is the <strong>interquartile range</strong> or IQR. The IQR is the distance between the 1st and 3rd quartiles of the data. Quartiles, like the name suggests, are created by splitting the data into four chunks where each chunk has the same number of observations. Or put another way, the median splits the data into two, with half the observations on either side. Quartiles are created by taking each of these halves and splitting them in half again. The range covered by the middle two 25% chunks is the IQR. It is the range that covers the middle 50% of the data.</p>
<p>The benefit of the IQR over a simple range is that the IQR is not sensitive to occasional extreme values. This is because the bottom 25% and the top 25% are discarded. However, by discarding these data, the IQR provides no information about how spread out these outer areas are. You can explore the interquartile range in <a href="#exm-iqr-only">Explorable&nbsp;2</a>.</p>
<div class="callout callout-style-simple callout-tip no-icon">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-body-container">
<div id="exm-iqr-only" class="theorem example">
<p><span class="theorem-title"><strong>Explorable 2 (Explore the Interquartile Range) </strong></span>&nbsp;</p>
</div>
<p>To explore the <strong>interquartile range</strong>, first add some data points. Notice how the interquartile range takes into account more than just the two most extreme data points.</p>
<p>Try clicking on <strong>Preset 1</strong> and then on <strong>Preset 2</strong>. Notice how the data points in <strong>Preset 1</strong> are more bunched in the middle, but in <strong>Preset 2</strong> they are more spread out. The two sets of data points have the same <strong>range</strong>, but they have different <strong>interquartile ranges</strong>.</p>
<p>But notice that you can also have data where the range differs and the interquartile range stays the same. Try clicking on <strong>Preset 3</strong> and <strong>Preset 4</strong>. With these presets, the ranges change, but the interquartile ranges stay the same.</p>
<!-- OHQ Code {{{ -->
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb5" data-startfrom="0" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line -1;"><span id="cb5-0"><a href="#cb5-0" aria-hidden="true" tabindex="-1"></a><span class="fu">data_mean_median</span>(iqrplot<span class="op">,</span> measures[<span class="dv">1</span>]<span class="op">.</span><span class="at">fun</span><span class="op">,</span> <span class="st">"iqrplot"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-5" data-nodetype="expression">

</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb6" data-startfrom="0" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line -1;"><span id="cb6-0"><a href="#cb6-0" aria-hidden="true" tabindex="-1"></a>mutable iqrplot <span class="op">=</span> []</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-6" data-nodetype="declaration">

</div>
</div>
</div>
<div class="panel-center panel-grid">
<div class="g-col-24 g-col-lg-20 g-start-lg-2">
<div>
<div class="sourceCode cell-code hidden" id="cb7" data-startfrom="3" data-source-offset="-1"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 2;"><span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>Inputs<span class="op">.</span><span class="fu">button</span>(<span class="st">"Preset 1"</span><span class="op">,</span> {</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">reduce</span><span class="op">:</span> (d) <span class="kw">=&gt;</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>      mutable iqrplot <span class="op">=</span> [</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>        { <span class="dt">x</span><span class="op">:</span> <span class="dv">94</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="dv">42</span> }<span class="op">,</span></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>        { <span class="dt">x</span><span class="op">:</span> <span class="dv">311</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="dv">51</span> }<span class="op">,</span></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>        { <span class="dt">x</span><span class="op">:</span> <span class="dv">534</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="dv">26</span> }<span class="op">,</span></span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>        { <span class="dt">x</span><span class="op">:</span> <span class="dv">292</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="dv">104</span> }<span class="op">,</span></span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>        { <span class="dt">x</span><span class="op">:</span> <span class="dv">258</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="dv">48</span> }<span class="op">,</span></span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a>        { <span class="dt">x</span><span class="op">:</span> <span class="dv">249</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="dv">113</span> }<span class="op">,</span></span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a>        { <span class="dt">x</span><span class="op">:</span> <span class="dv">273</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="dv">84</span> }<span class="op">,</span></span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a>        { <span class="dt">x</span><span class="op">:</span> <span class="dv">330</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="dv">78</span> }</span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a>      ]</span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb7-16"><a href="#cb7-16" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb7-17"><a href="#cb7-17" aria-hidden="true" tabindex="-1"></a>Inputs<span class="op">.</span><span class="fu">button</span>(<span class="st">"Preset 2"</span><span class="op">,</span> {</span>
<span id="cb7-18"><a href="#cb7-18" aria-hidden="true" tabindex="-1"></a>  <span class="dt">reduce</span><span class="op">:</span> (d) <span class="kw">=&gt;</span></span>
<span id="cb7-19"><a href="#cb7-19" aria-hidden="true" tabindex="-1"></a>      (mutable iqrplot <span class="op">=</span> [</span>
<span id="cb7-20"><a href="#cb7-20" aria-hidden="true" tabindex="-1"></a>        { <span class="dt">x</span><span class="op">:</span> <span class="dv">94</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="dv">42</span> }<span class="op">,</span></span>
<span id="cb7-21"><a href="#cb7-21" aria-hidden="true" tabindex="-1"></a>        { <span class="dt">x</span><span class="op">:</span> <span class="dv">416</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="dv">114</span> }<span class="op">,</span></span>
<span id="cb7-22"><a href="#cb7-22" aria-hidden="true" tabindex="-1"></a>        { <span class="dt">x</span><span class="op">:</span> <span class="dv">534</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="dv">26</span> }<span class="op">,</span></span>
<span id="cb7-23"><a href="#cb7-23" aria-hidden="true" tabindex="-1"></a>        { <span class="dt">x</span><span class="op">:</span> <span class="dv">362</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="dv">111</span> }<span class="op">,</span></span>
<span id="cb7-24"><a href="#cb7-24" aria-hidden="true" tabindex="-1"></a>        { <span class="dt">x</span><span class="op">:</span> <span class="dv">183</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="dv">107</span> }<span class="op">,</span></span>
<span id="cb7-25"><a href="#cb7-25" aria-hidden="true" tabindex="-1"></a>        { <span class="dt">x</span><span class="op">:</span> <span class="dv">247</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="dv">107</span> }<span class="op">,</span></span>
<span id="cb7-26"><a href="#cb7-26" aria-hidden="true" tabindex="-1"></a>        { <span class="dt">x</span><span class="op">:</span> <span class="dv">296</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="dv">110</span> }<span class="op">,</span></span>
<span id="cb7-27"><a href="#cb7-27" aria-hidden="true" tabindex="-1"></a>        { <span class="dt">x</span><span class="op">:</span> <span class="dv">476</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="dv">121</span> }</span>
<span id="cb7-28"><a href="#cb7-28" aria-hidden="true" tabindex="-1"></a>      ])</span>
<span id="cb7-29"><a href="#cb7-29" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb7-30"><a href="#cb7-30" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb7-31"><a href="#cb7-31" aria-hidden="true" tabindex="-1"></a>Inputs<span class="op">.</span><span class="fu">button</span>(<span class="st">"Preset 3"</span><span class="op">,</span> {</span>
<span id="cb7-32"><a href="#cb7-32" aria-hidden="true" tabindex="-1"></a>  <span class="dt">reduce</span><span class="op">:</span> (d) <span class="kw">=&gt;</span></span>
<span id="cb7-33"><a href="#cb7-33" aria-hidden="true" tabindex="-1"></a>      (mutable iqrplot <span class="op">=</span> [</span>
<span id="cb7-34"><a href="#cb7-34" aria-hidden="true" tabindex="-1"></a>        { <span class="dt">x</span><span class="op">:</span> <span class="dv">40</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="dv">33</span> }<span class="op">,</span></span>
<span id="cb7-35"><a href="#cb7-35" aria-hidden="true" tabindex="-1"></a>        { <span class="dt">x</span><span class="op">:</span> <span class="dv">413</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="dv">40</span> }<span class="op">,</span></span>
<span id="cb7-36"><a href="#cb7-36" aria-hidden="true" tabindex="-1"></a>        { <span class="dt">x</span><span class="op">:</span> <span class="dv">223</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="dv">102</span> }<span class="op">,</span></span>
<span id="cb7-37"><a href="#cb7-37" aria-hidden="true" tabindex="-1"></a>        { <span class="dt">x</span><span class="op">:</span> <span class="dv">262</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="dv">91</span> }<span class="op">,</span></span>
<span id="cb7-38"><a href="#cb7-38" aria-hidden="true" tabindex="-1"></a>        { <span class="dt">x</span><span class="op">:</span> <span class="dv">179</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="dv">129</span> }</span>
<span id="cb7-39"><a href="#cb7-39" aria-hidden="true" tabindex="-1"></a>      ])</span>
<span id="cb7-40"><a href="#cb7-40" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb7-41"><a href="#cb7-41" aria-hidden="true" tabindex="-1"></a>Inputs<span class="op">.</span><span class="fu">button</span>(<span class="st">"Preset 4"</span><span class="op">,</span> {</span>
<span id="cb7-42"><a href="#cb7-42" aria-hidden="true" tabindex="-1"></a>  <span class="dt">reduce</span><span class="op">:</span> (d) <span class="kw">=&gt;</span></span>
<span id="cb7-43"><a href="#cb7-43" aria-hidden="true" tabindex="-1"></a>      (mutable iqrplot <span class="op">=</span> [</span>
<span id="cb7-44"><a href="#cb7-44" aria-hidden="true" tabindex="-1"></a>        { <span class="dt">x</span><span class="op">:</span> <span class="dv">150</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="dv">41</span> }<span class="op">,</span></span>
<span id="cb7-45"><a href="#cb7-45" aria-hidden="true" tabindex="-1"></a>        { <span class="dt">x</span><span class="op">:</span> <span class="dv">282</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="dv">30</span> }<span class="op">,</span></span>
<span id="cb7-46"><a href="#cb7-46" aria-hidden="true" tabindex="-1"></a>        { <span class="dt">x</span><span class="op">:</span> <span class="dv">223</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="dv">102</span> }<span class="op">,</span></span>
<span id="cb7-47"><a href="#cb7-47" aria-hidden="true" tabindex="-1"></a>        { <span class="dt">x</span><span class="op">:</span> <span class="dv">262</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="dv">91</span> }<span class="op">,</span></span>
<span id="cb7-48"><a href="#cb7-48" aria-hidden="true" tabindex="-1"></a>        { <span class="dt">x</span><span class="op">:</span> <span class="dv">179</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="dv">129</span> }</span>
<span id="cb7-49"><a href="#cb7-49" aria-hidden="true" tabindex="-1"></a>      ])</span>
<span id="cb7-50"><a href="#cb7-50" aria-hidden="true" tabindex="-1"></a>})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell panel-center quarto-layout-panel">
<div class="quarto-layout-row quarto-layout-valign-top">
<div class="cell-output cell-output-display quarto-layout-cell" style="flex-basis: 25.0%;justify-content: center;">
<div>
<div id="ojs-cell-7-1" data-nodetype="expression">

</div>
</div>
</div>
<div class="cell-output cell-output-display quarto-layout-cell" style="flex-basis: 25.0%;justify-content: center;">
<div>
<div id="ojs-cell-7-2" data-nodetype="expression">

</div>
</div>
</div>
<div class="cell-output cell-output-display quarto-layout-cell" style="flex-basis: 25.0%;justify-content: center;">
<div>
<div id="ojs-cell-7-3" data-nodetype="expression">

</div>
</div>
</div>
<div class="cell-output cell-output-display quarto-layout-cell" style="flex-basis: 25.0%;justify-content: center;">
<div>
<div id="ojs-cell-7-4" data-nodetype="expression">

</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb8" data-startfrom="0" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line -1;"><span id="cb8-0"><a href="#cb8-0" aria-hidden="true" tabindex="-1"></a>Inputs<span class="op">.</span><span class="fu">button</span>(<span class="st">"Clear"</span><span class="op">,</span> {</span>
<span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>  <span class="dt">reduce</span><span class="op">:</span> (d) <span class="kw">=&gt;</span> {</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>    mutable summary <span class="op">=</span> <span class="bu">Object</span><span class="op">.</span><span class="fu">assign</span>({}<span class="op">,</span> mutable summary<span class="op">,</span> { <span class="dt">iqrplot</span><span class="op">:</span> [] })<span class="op">;</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>    mutable iqrplot <span class="op">=</span> []<span class="op">;</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-8" data-nodetype="expression">

</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb9" data-startfrom="0" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line -1;"><span id="cb9-0"><a href="#cb9-0" aria-hidden="true" tabindex="-1"></a><span class="fu">md</span><span class="vs">`The interquartile range (IQR) of this data is: </span><span class="sc">${</span>(d3<span class="op">.</span><span class="fu">quantile</span>(summary<span class="op">.</span><span class="at">iqrplot</span><span class="op">.</span><span class="at">data</span><span class="op">,</span> <span class="fl">0.75</span>) <span class="op">-</span> d3<span class="op">.</span><span class="fu">quantile</span>(summary<span class="op">.</span><span class="at">iqrplot</span><span class="op">.</span><span class="at">data</span><span class="op">,</span> <span class="fl">0.25</span>)) <span class="op">||</span> htl<span class="op">.</span><span class="fu">html</span><span class="vs">`&lt;font color="red"&gt;no data&lt;/font&gt;`</span><span class="sc">}</span><span class="vs">`</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-9" data-nodetype="expression">

</div>
</div>
</div>
<!-- }}} -->
</div>
</div>
</div>
<p>Both the range and the IQR work by looking at the distance between only two observations in the entire dataset. For the range, it’s the distance between the minimum point and the maximum point. For the IQR, it’s the distance between the midpoint of the upper half and the midpoint of the lower half. As a result, you can get arrangements of data that have very different spreads, but have the same range or IQR. You can explore this in <a href="#exm-both">Explorable&nbsp;3</a>.</p>
<div class="callout callout-style-simple callout-tip no-icon">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-body-container">
<div id="exm-both" class="theorem example">
<p><span class="theorem-title"><strong>Explorable 3 (Explore the Interquartile Range) </strong></span>&nbsp;</p>
</div>
<p>The <strong>range</strong> and the <strong>interquartile range</strong> only tell us limited information about how spread out the data is. Two datasets can have identical ranges and IQRs but still look very different. If you click <strong>Preset 1</strong> you’ll see the data bunched around the middle. If you click <strong>Preset 2</strong> you’ll see the data spread out along the entire range. But for both of these datasets the range and interquartile range are the same.</p>
<!-- OHQ Code {{{ -->
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb10" data-startfrom="0" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line -1;"><span id="cb10-0"><a href="#cb10-0" aria-hidden="true" tabindex="-1"></a><span class="fu">data_mean_median</span>(bothplot<span class="op">,</span> measures[<span class="dv">1</span>]<span class="op">.</span><span class="at">fun</span><span class="op">,</span> <span class="st">"bothplot"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-10" data-nodetype="expression">

</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb11" data-startfrom="0" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line -1;"><span id="cb11-0"><a href="#cb11-0" aria-hidden="true" tabindex="-1"></a>mutable bothplot <span class="op">=</span> []</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-11" data-nodetype="declaration">

</div>
</div>
</div>
<div class="panel-center panel-grid">
<div class="g-col-24 g-col-lg-20 g-start-lg-2">
<div>
<div class="sourceCode cell-code hidden" id="cb12" data-startfrom="3" data-source-offset="-0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 2;"><span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>Inputs<span class="op">.</span><span class="fu">button</span>(<span class="st">"Preset 1"</span><span class="op">,</span> {</span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">reduce</span><span class="op">:</span> (d) <span class="kw">=&gt;</span></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>      (mutable bothplot <span class="op">=</span> </span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>[</span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>  { <span class="dt">x</span><span class="op">:</span> <span class="dv">14</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="dv">87</span> }<span class="op">,</span></span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>  { <span class="dt">x</span><span class="op">:</span> <span class="dv">462</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="dv">93</span> }<span class="op">,</span></span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>  { <span class="dt">x</span><span class="op">:</span> <span class="dv">161</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="dv">95</span> }<span class="op">,</span></span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a>  { <span class="dt">x</span><span class="op">:</span> <span class="dv">289</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="dv">117</span> }<span class="op">,</span></span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a>  { <span class="dt">x</span><span class="op">:</span> <span class="dv">224</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="dv">87</span> }<span class="op">,</span></span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a>  { <span class="dt">x</span><span class="op">:</span> <span class="dv">230</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="dv">35</span> }<span class="op">,</span></span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true" tabindex="-1"></a>  { <span class="dt">x</span><span class="op">:</span> <span class="dv">224</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="dv">62</span> }<span class="op">,</span></span>
<span id="cb12-14"><a href="#cb12-14" aria-hidden="true" tabindex="-1"></a>  { <span class="dt">x</span><span class="op">:</span> <span class="dv">154</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="dv">44</span> }<span class="op">,</span></span>
<span id="cb12-15"><a href="#cb12-15" aria-hidden="true" tabindex="-1"></a>  { <span class="dt">x</span><span class="op">:</span> <span class="dv">290</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="dv">77</span> }<span class="op">,</span></span>
<span id="cb12-16"><a href="#cb12-16" aria-hidden="true" tabindex="-1"></a>  { <span class="dt">x</span><span class="op">:</span> <span class="dv">226</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="dv">115</span> }<span class="op">,</span></span>
<span id="cb12-17"><a href="#cb12-17" aria-hidden="true" tabindex="-1"></a>  { <span class="dt">x</span><span class="op">:</span> <span class="dv">228</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="dv">142</span> }<span class="op">,</span></span>
<span id="cb12-18"><a href="#cb12-18" aria-hidden="true" tabindex="-1"></a>  { <span class="dt">x</span><span class="op">:</span> <span class="dv">156</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="dv">72</span> }<span class="op">,</span></span>
<span id="cb12-19"><a href="#cb12-19" aria-hidden="true" tabindex="-1"></a>  { <span class="dt">x</span><span class="op">:</span> <span class="dv">294</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="dv">46</span> }</span>
<span id="cb12-20"><a href="#cb12-20" aria-hidden="true" tabindex="-1"></a>])</span>
<span id="cb12-21"><a href="#cb12-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-22"><a href="#cb12-22" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb12-23"><a href="#cb12-23" aria-hidden="true" tabindex="-1"></a>Inputs<span class="op">.</span><span class="fu">button</span>(<span class="st">"Preset 2"</span><span class="op">,</span> {</span>
<span id="cb12-24"><a href="#cb12-24" aria-hidden="true" tabindex="-1"></a>  <span class="dt">reduce</span><span class="op">:</span> (d) <span class="kw">=&gt;</span></span>
<span id="cb12-25"><a href="#cb12-25" aria-hidden="true" tabindex="-1"></a>      (mutable bothplot <span class="op">=</span> </span>
<span id="cb12-26"><a href="#cb12-26" aria-hidden="true" tabindex="-1"></a>      [</span>
<span id="cb12-27"><a href="#cb12-27" aria-hidden="true" tabindex="-1"></a>        { <span class="dt">x</span><span class="op">:</span> <span class="dv">14</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="dv">87</span> }<span class="op">,</span></span>
<span id="cb12-28"><a href="#cb12-28" aria-hidden="true" tabindex="-1"></a>        { <span class="dt">x</span><span class="op">:</span> <span class="dv">462</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="dv">93</span> }<span class="op">,</span></span>
<span id="cb12-29"><a href="#cb12-29" aria-hidden="true" tabindex="-1"></a>        { <span class="dt">x</span><span class="op">:</span> <span class="dv">161</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="dv">95</span> }<span class="op">,</span></span>
<span id="cb12-30"><a href="#cb12-30" aria-hidden="true" tabindex="-1"></a>        { <span class="dt">x</span><span class="op">:</span> <span class="dv">289</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="dv">82</span> }<span class="op">,</span></span>
<span id="cb12-31"><a href="#cb12-31" aria-hidden="true" tabindex="-1"></a>        { <span class="dt">x</span><span class="op">:</span> <span class="dv">224</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="dv">87</span> }<span class="op">,</span></span>
<span id="cb12-32"><a href="#cb12-32" aria-hidden="true" tabindex="-1"></a>        { <span class="dt">x</span><span class="op">:</span> <span class="dv">268</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="dv">54</span> }<span class="op">,</span></span>
<span id="cb12-33"><a href="#cb12-33" aria-hidden="true" tabindex="-1"></a>        { <span class="dt">x</span><span class="op">:</span> <span class="dv">178</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="dv">62</span> }<span class="op">,</span></span>
<span id="cb12-34"><a href="#cb12-34" aria-hidden="true" tabindex="-1"></a>        { <span class="dt">x</span><span class="op">:</span> <span class="dv">52</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="dv">104</span> }<span class="op">,</span></span>
<span id="cb12-35"><a href="#cb12-35" aria-hidden="true" tabindex="-1"></a>        { <span class="dt">x</span><span class="op">:</span> <span class="dv">352</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="dv">92</span> }<span class="op">,</span></span>
<span id="cb12-36"><a href="#cb12-36" aria-hidden="true" tabindex="-1"></a>        { <span class="dt">x</span><span class="op">:</span> <span class="dv">271</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="dv">122</span> }<span class="op">,</span></span>
<span id="cb12-37"><a href="#cb12-37" aria-hidden="true" tabindex="-1"></a>        { <span class="dt">x</span><span class="op">:</span> <span class="dv">177</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="dv">138</span> }<span class="op">,</span></span>
<span id="cb12-38"><a href="#cb12-38" aria-hidden="true" tabindex="-1"></a>        { <span class="dt">x</span><span class="op">:</span> <span class="dv">125</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="dv">97</span> }<span class="op">,</span></span>
<span id="cb12-39"><a href="#cb12-39" aria-hidden="true" tabindex="-1"></a>        { <span class="dt">x</span><span class="op">:</span> <span class="dv">412</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="dv">91</span> }</span>
<span id="cb12-40"><a href="#cb12-40" aria-hidden="true" tabindex="-1"></a>      ])</span>
<span id="cb12-41"><a href="#cb12-41" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb12-42"><a href="#cb12-42" aria-hidden="true" tabindex="-1"></a>Inputs<span class="op">.</span><span class="fu">button</span>(<span class="st">"Clear"</span><span class="op">,</span> {</span>
<span id="cb12-43"><a href="#cb12-43" aria-hidden="true" tabindex="-1"></a>  <span class="dt">reduce</span><span class="op">:</span> (d) <span class="kw">=&gt;</span> {</span>
<span id="cb12-44"><a href="#cb12-44" aria-hidden="true" tabindex="-1"></a>    mutable summary <span class="op">=</span> <span class="bu">Object</span><span class="op">.</span><span class="fu">assign</span>({}<span class="op">,</span> mutable summary<span class="op">,</span> { <span class="dt">bothplot</span><span class="op">:</span> [] })<span class="op">;</span></span>
<span id="cb12-45"><a href="#cb12-45" aria-hidden="true" tabindex="-1"></a>    mutable bothplot <span class="op">=</span> []<span class="op">;</span></span>
<span id="cb12-46"><a href="#cb12-46" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb12-47"><a href="#cb12-47" aria-hidden="true" tabindex="-1"></a>})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell panel-center quarto-layout-panel">
<div class="quarto-layout-row quarto-layout-valign-top">
<div class="cell-output cell-output-display quarto-layout-cell" style="flex-basis: 33.3%;justify-content: center;">
<div>
<div id="ojs-cell-12-1" data-nodetype="expression">

</div>
</div>
</div>
<div class="cell-output cell-output-display quarto-layout-cell" style="flex-basis: 33.3%;justify-content: center;">
<div>
<div id="ojs-cell-12-2" data-nodetype="expression">

</div>
</div>
</div>
<div class="cell-output cell-output-display quarto-layout-cell" style="flex-basis: 33.3%;justify-content: center;">
<div>
<div id="ojs-cell-12-3" data-nodetype="expression">

</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb13" data-startfrom="0" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line -1;"><span id="cb13-0"><a href="#cb13-0" aria-hidden="true" tabindex="-1"></a><span class="fu">md</span><span class="vs">`We can compute the statistics for this set of </span><span class="sc">${</span></span>
<span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>  summary<span class="op">.</span><span class="at">bothplot</span><span class="op">.</span><span class="at">data</span><span class="op">.</span><span class="at">length</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="sc">}</span><span class="vs"> data points:  </span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a><span class="vs">Range = </span><span class="sc">${</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>summary<span class="op">.</span><span class="at">bothplot</span><span class="op">.</span><span class="at">data</span><span class="op">.</span><span class="at">length</span> <span class="op">!=</span> <span class="dv">0</span></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>    <span class="op">?</span> <span class="fu">round2</span>(d3<span class="op">.</span><span class="fu">quantile</span>(summary<span class="op">.</span><span class="at">bothplot</span><span class="op">.</span><span class="at">data</span><span class="op">,</span> <span class="dv">1</span>) <span class="op">-</span> d3<span class="op">.</span><span class="fu">quantile</span>(summary<span class="op">.</span><span class="at">bothplot</span><span class="op">.</span><span class="at">data</span><span class="op">,</span> <span class="dv">0</span>))</span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>    <span class="op">:</span> htl<span class="op">.</span><span class="fu">html</span><span class="vs">`&lt;font color="red"&gt;no data&lt;/font&gt;`</span></span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a><span class="sc">}</span><span class="vs">   </span></span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a><span class="vs">IQR = </span><span class="sc">${</span></span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a>summary<span class="op">.</span><span class="at">bothplot</span><span class="op">.</span><span class="at">data</span><span class="op">.</span><span class="at">length</span> <span class="op">!=</span> <span class="dv">0</span></span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a>    <span class="op">?</span> <span class="fu">round2</span>(d3<span class="op">.</span><span class="fu">quantile</span>(summary<span class="op">.</span><span class="at">bothplot</span><span class="op">.</span><span class="at">data</span><span class="op">,</span> <span class="fl">0.75</span>) <span class="op">-</span> d3<span class="op">.</span><span class="fu">quantile</span>(summary<span class="op">.</span><span class="at">bothplot</span><span class="op">.</span><span class="at">data</span><span class="op">,</span> <span class="fl">0.25</span>))</span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a>    <span class="op">:</span> htl<span class="op">.</span><span class="fu">html</span><span class="vs">`&lt;font color="red"&gt;no data&lt;/font&gt;`</span></span>
<span id="cb13-12"><a href="#cb13-12" aria-hidden="true" tabindex="-1"></a><span class="sc">}</span></span>
<span id="cb13-13"><a href="#cb13-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-14"><a href="#cb13-14" aria-hidden="true" tabindex="-1"></a><span class="vs">`</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-13" data-nodetype="expression">

</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb14" data-startfrom="0" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line -1;"><span id="cb14-0"><a href="#cb14-0" aria-hidden="true" tabindex="-1"></a>viewof show_both_table <span class="op">=</span> Inputs<span class="op">.</span><span class="fu">toggle</span>({ <span class="dt">label</span><span class="op">:</span> <span class="st">"Show data table"</span> })</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-14" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb15" data-startfrom="0" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line -1;"><span id="cb15-0"><a href="#cb15-0" aria-hidden="true" tabindex="-1"></a>{</span>
<span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>  <span class="kw">let</span> d <span class="op">=</span> summary<span class="op">.</span><span class="at">bothplot</span><span class="op">.</span><span class="at">data</span><span class="op">;</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>  d<span class="op">.</span><span class="fu">sort</span>(<span class="kw">function</span>(a<span class="op">,</span> b){<span class="cf">return</span> a <span class="op">-</span> b})<span class="op">;</span></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>  <span class="kw">let</span> isempty <span class="op">=</span> summary<span class="op">.</span><span class="at">bothplot</span><span class="op">.</span><span class="at">data</span><span class="op">.</span><span class="at">length</span> <span class="op">===</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>  <span class="kw">let</span> data <span class="op">=</span> isempty <span class="op">?</span> [{ <span class="st">"Point #"</span><span class="op">:</span> <span class="kw">null</span><span class="op">,</span> <span class="st">"Value"</span><span class="op">:</span> <span class="kw">null</span> }] <span class="op">:</span> d<span class="op">.</span><span class="fu">map</span>((v<span class="op">,</span> i) <span class="kw">=&gt;</span> {</span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> {</span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>      <span class="st">"Point #"</span><span class="op">:</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">,</span></span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>      <span class="dt">Value</span><span class="op">:</span> v<span class="op">,</span></span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a>    }<span class="op">;</span></span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a>  })<span class="op">;</span></span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> show_both_table <span class="op">?</span> <span class="fu">maketable</span>(data) <span class="op">:</span> htl<span class="op">.</span><span class="fu">html</span><span class="vs">`&lt;p&gt;&lt;/p&gt;`</span><span class="op">;</span></span>
<span id="cb15-12"><a href="#cb15-12" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-15" data-nodetype="expression">

</div>
</div>
</div>
<!-- }}} -->
</div>
</div>
</div>
</section>
<section id="deviation" class="level3">
<h3 class="anchored" data-anchor-id="deviation">Deviation</h3>
<p>To get a more fine-grained idea of the spread, we’ll need a new way of measuring it, one where we take into account every data-point. One way to do this is to take each data-point and calculate how far it is away from some reference point, such as the mean. This is known as the deviation. You can explore deviation in <a href="#exm-deviation">Explorable&nbsp;4</a>, below.</p>
<div class="callout callout-style-simple callout-tip no-icon">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-body-container">
<div id="exm-deviation" class="theorem example">
<p><span class="theorem-title"><strong>Explorable 4 (Explore deviation) </strong></span>&nbsp;</p>
</div>
<!-- OHQ Code {{{ -->
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb16" data-startfrom="0" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line -1;"><span id="cb16-0"><a href="#cb16-0" aria-hidden="true" tabindex="-1"></a><span class="fu">data_mean_median</span>(deviations<span class="op">,</span> drawlines<span class="op">,</span> <span class="st">"deviations"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-16" data-nodetype="expression">

</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb17" data-startfrom="-1" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line -2;"><span id="cb17--1"><a href="#cb17--1" aria-hidden="true" tabindex="-1"></a>mutable deviations <span class="op">=</span> []</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-17" data-nodetype="declaration">

</div>
</div>
</div>
<div class="panel-center panel-grid">
<div class="g-col-24 g-col-lg-20 g-start-lg-2">
<div>
<div class="sourceCode cell-code hidden" id="cb18" data-startfrom="2" data-source-offset="-0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 1;"><span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>Inputs<span class="op">.</span><span class="fu">button</span>(<span class="st">"Preset 1"</span><span class="op">,</span> {</span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">reduce</span><span class="op">:</span> (d) <span class="kw">=&gt;</span> {</span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>   </span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>    mutable deviations <span class="op">=</span> [</span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a>    { <span class="dt">x</span><span class="op">:</span> <span class="dv">90</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="dv">50</span> }<span class="op">,</span></span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a>    { <span class="dt">x</span><span class="op">:</span> <span class="dv">90</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="dv">120</span> }<span class="op">,</span></span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a>    { <span class="dt">x</span><span class="op">:</span> <span class="dv">230</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="dv">50</span> }<span class="op">,</span></span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a>    { <span class="dt">x</span><span class="op">:</span> <span class="dv">230</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="dv">120</span> }</span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a>  ]<span class="op">;</span></span>
<span id="cb18-11"><a href="#cb18-11" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb18-12"><a href="#cb18-12" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb18-13"><a href="#cb18-13" aria-hidden="true" tabindex="-1"></a>Inputs<span class="op">.</span><span class="fu">button</span>(<span class="st">"Preset 2"</span><span class="op">,</span> {</span>
<span id="cb18-14"><a href="#cb18-14" aria-hidden="true" tabindex="-1"></a>  <span class="dt">reduce</span><span class="op">:</span> (d) <span class="kw">=&gt;</span> {</span>
<span id="cb18-15"><a href="#cb18-15" aria-hidden="true" tabindex="-1"></a>    mutable deviations <span class="op">=</span> [</span>
<span id="cb18-16"><a href="#cb18-16" aria-hidden="true" tabindex="-1"></a>    { <span class="dt">x</span><span class="op">:</span> <span class="dv">40</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="dv">120</span> }<span class="op">,</span></span>
<span id="cb18-17"><a href="#cb18-17" aria-hidden="true" tabindex="-1"></a>    { <span class="dt">x</span><span class="op">:</span> <span class="dv">140</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="dv">50</span> }<span class="op">,</span></span>
<span id="cb18-18"><a href="#cb18-18" aria-hidden="true" tabindex="-1"></a>    { <span class="dt">x</span><span class="op">:</span> <span class="dv">180</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="dv">50</span> }<span class="op">,</span></span>
<span id="cb18-19"><a href="#cb18-19" aria-hidden="true" tabindex="-1"></a>    { <span class="dt">x</span><span class="op">:</span> <span class="dv">280</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="dv">120</span> }</span>
<span id="cb18-20"><a href="#cb18-20" aria-hidden="true" tabindex="-1"></a>  ]<span class="op">;</span></span>
<span id="cb18-21"><a href="#cb18-21" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb18-22"><a href="#cb18-22" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb18-23"><a href="#cb18-23" aria-hidden="true" tabindex="-1"></a>Inputs<span class="op">.</span><span class="fu">button</span>(<span class="st">"Clear"</span><span class="op">,</span> {</span>
<span id="cb18-24"><a href="#cb18-24" aria-hidden="true" tabindex="-1"></a>  <span class="dt">reduce</span><span class="op">:</span> (d) <span class="kw">=&gt;</span> {</span>
<span id="cb18-25"><a href="#cb18-25" aria-hidden="true" tabindex="-1"></a>    mutable summary <span class="op">=</span> <span class="bu">Object</span><span class="op">.</span><span class="fu">assign</span>({}<span class="op">,</span> mutable summary<span class="op">,</span> { <span class="dt">devations</span><span class="op">:</span> [] })<span class="op">;</span></span>
<span id="cb18-26"><a href="#cb18-26" aria-hidden="true" tabindex="-1"></a>    mutable deviations <span class="op">=</span> []</span>
<span id="cb18-27"><a href="#cb18-27" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb18-28"><a href="#cb18-28" aria-hidden="true" tabindex="-1"></a>})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell panel-center quarto-layout-panel">
<div class="quarto-layout-row quarto-layout-valign-top">
<div class="cell-output cell-output-display quarto-layout-cell" style="flex-basis: 33.3%;justify-content: center;">
<div>
<div id="ojs-cell-18-1" data-nodetype="expression">

</div>
</div>
</div>
<div class="cell-output cell-output-display quarto-layout-cell" style="flex-basis: 33.3%;justify-content: center;">
<div>
<div id="ojs-cell-18-2" data-nodetype="expression">

</div>
</div>
</div>
<div class="cell-output cell-output-display quarto-layout-cell" style="flex-basis: 33.3%;justify-content: center;">
<div>
<div id="ojs-cell-18-3" data-nodetype="expression">

</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb19" data-startfrom="-1" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line -2;"><span id="cb19--1"><a href="#cb19--1" aria-hidden="true" tabindex="-1"></a>deviations_opts <span class="op">=</span> [</span>
<span id="cb19-0"><a href="#cb19-0" aria-hidden="true" tabindex="-1"></a>  {<span class="dt">name</span><span class="op">:</span> <span class="st">"Devaitions"</span><span class="op">,</span> <span class="dt">tag</span><span class="op">:</span> <span class="st">"dev"</span>}<span class="op">,</span></span>
<span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>  {<span class="dt">name</span><span class="op">:</span> <span class="st">"Squared devaitions"</span><span class="op">,</span> <span class="dt">tag</span><span class="op">:</span> <span class="st">"sqdev"</span>}<span class="op">,</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>  {<span class="dt">name</span><span class="op">:</span> <span class="st">"Absolute devaitions"</span><span class="op">,</span> <span class="dt">tag</span><span class="op">:</span> <span class="st">"absdev"</span>}<span class="op">,</span></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-19" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb20" data-startfrom="-1" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line -2;"><span id="cb20--1"><a href="#cb20--1" aria-hidden="true" tabindex="-1"></a>mutable opts <span class="op">=</span>  </span>
<span id="cb20-0"><a href="#cb20-0" aria-hidden="true" tabindex="-1"></a>{</span>
<span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>  <span class="kw">let</span> devops <span class="op">=</span> deviations_opts<span class="op">.</span><span class="fu">map</span>((x) <span class="kw">=&gt;</span> x<span class="op">.</span><span class="at">name</span>)<span class="op">.</span><span class="fu">map</span>((x<span class="op">,</span> i) <span class="kw">=&gt;</span> {</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>      <span class="kw">let</span> obj <span class="op">=</span> {}</span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>      obj[deviations_opts[i]<span class="op">.</span><span class="at">tag</span>] <span class="op">=</span>  deviations_show<span class="op">.</span><span class="fu">map</span>((y) <span class="kw">=&gt;</span> y<span class="op">.</span><span class="at">name</span>)<span class="op">.</span><span class="fu">includes</span>(x)</span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>      <span class="cf">return</span> obj</span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a>  <span class="kw">let</span> opts <span class="op">=</span> {}</span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a>  <span class="kw">let</span> keys <span class="op">=</span> devops<span class="op">.</span><span class="fu">map</span>((v) <span class="kw">=&gt;</span> <span class="bu">Object</span><span class="op">.</span><span class="fu">keys</span>(v))</span>
<span id="cb20-10"><a href="#cb20-10" aria-hidden="true" tabindex="-1"></a>  <span class="kw">let</span> values <span class="op">=</span> devops<span class="op">.</span><span class="fu">map</span>((v) <span class="kw">=&gt;</span> <span class="bu">Object</span><span class="op">.</span><span class="fu">values</span>(v))</span>
<span id="cb20-11"><a href="#cb20-11" aria-hidden="true" tabindex="-1"></a>  keys<span class="op">.</span><span class="fu">forEach</span>((v<span class="op">,</span>i) <span class="kw">=&gt;</span> opts[v] <span class="op">=</span> values[i][<span class="dv">0</span>])</span>
<span id="cb20-12"><a href="#cb20-12" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> opts</span>
<span id="cb20-13"><a href="#cb20-13" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-20" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb21" data-startfrom="-1" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line -2;"><span id="cb21--1"><a href="#cb21--1" aria-hidden="true" tabindex="-1"></a>viewof show_deviation_table <span class="op">=</span> Inputs<span class="op">.</span><span class="fu">toggle</span>({ <span class="dt">label</span><span class="op">:</span> <span class="st">"Show data table"</span> })</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-21" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb22" data-startfrom="-1" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line -2;"><span id="cb22--1"><a href="#cb22--1" aria-hidden="true" tabindex="-1"></a>viewof deviations_show <span class="op">=</span> Inputs<span class="op">.</span><span class="fu">checkbox</span>(deviations_opts<span class="op">,</span> {<span class="dt">label</span><span class="op">:</span> <span class="st">""</span><span class="op">,</span> <span class="dt">format</span><span class="op">:</span> x <span class="kw">=&gt;</span> x<span class="op">.</span><span class="at">name</span>})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-22" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb23" data-startfrom="-1" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line -2;"><span id="cb23--1"><a href="#cb23--1" aria-hidden="true" tabindex="-1"></a><span class="fu">deviationtable</span>(mutable opts<span class="op">,</span> show_deviation_table)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-23" data-nodetype="expression">

</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb24" data-startfrom="-1" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line -2;"><span id="cb24--1"><a href="#cb24--1" aria-hidden="true" tabindex="-1"></a>deviationtable <span class="op">=</span> (opts<span class="op">,</span> show_deviation_table) <span class="kw">=&gt;</span> { </span>
<span id="cb24-0"><a href="#cb24-0" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span>(show_deviation_table <span class="op">==</span> <span class="kw">false</span>) {</span>
<span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>      <span class="cf">return</span> htl<span class="op">.</span><span class="fu">html</span><span class="vs">`&lt;p&gt;&lt;/p&gt;`</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>  <span class="kw">let</span> d <span class="op">=</span> summary<span class="op">.</span><span class="at">deviations</span><span class="op">.</span><span class="at">data</span></span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span>(d<span class="op">.</span><span class="at">length</span> <span class="op">==</span> <span class="dv">0</span>) {</span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>    d <span class="op">=</span> [<span class="kw">null</span>]</span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a>  d<span class="op">.</span><span class="fu">sort</span>(<span class="kw">function</span>(a<span class="op">,</span> b){<span class="cf">return</span> a <span class="op">-</span> b})<span class="op">;</span></span>
<span id="cb24-9"><a href="#cb24-9" aria-hidden="true" tabindex="-1"></a>  <span class="kw">let</span> data <span class="op">=</span> d<span class="op">.</span><span class="fu">map</span>((v<span class="op">,</span> i) <span class="kw">=&gt;</span> {</span>
<span id="cb24-10"><a href="#cb24-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-11"><a href="#cb24-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span>(v <span class="op">===</span> <span class="kw">null</span>) {</span>
<span id="cb24-12"><a href="#cb24-12" aria-hidden="true" tabindex="-1"></a>      i <span class="op">=</span> <span class="kw">null</span> </span>
<span id="cb24-13"><a href="#cb24-13" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">else</span> {</span>
<span id="cb24-14"><a href="#cb24-14" aria-hidden="true" tabindex="-1"></a>      i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span></span>
<span id="cb24-15"><a href="#cb24-15" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb24-16"><a href="#cb24-16" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> row <span class="op">=</span> {<span class="st">"Point #"</span><span class="op">:</span> i}</span>
<span id="cb24-17"><a href="#cb24-17" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> values <span class="op">=</span> {<span class="st">"Value"</span><span class="op">:</span> v}</span>
<span id="cb24-18"><a href="#cb24-18" aria-hidden="true" tabindex="-1"></a>    row <span class="op">=</span> <span class="bu">Object</span><span class="op">.</span><span class="fu">assign</span>({}<span class="op">,</span> row<span class="op">,</span> values)<span class="op">;</span></span>
<span id="cb24-19"><a href="#cb24-19" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> mean <span class="op">=</span> {<span class="st">"Mean"</span><span class="op">:</span> <span class="fu">round2</span>(d3<span class="op">.</span><span class="fu">mean</span>(d)) <span class="op">||</span> <span class="kw">null</span>}</span>
<span id="cb24-20"><a href="#cb24-20" aria-hidden="true" tabindex="-1"></a>    row <span class="op">=</span> <span class="bu">Object</span><span class="op">.</span><span class="fu">assign</span>({}<span class="op">,</span> row<span class="op">,</span> mean)<span class="op">;</span></span>
<span id="cb24-21"><a href="#cb24-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-22"><a href="#cb24-22" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> dev <span class="op">=</span> <span class="fu">round2</span>(d3<span class="op">.</span><span class="fu">mean</span>(d) <span class="op">-</span> v) <span class="op">||</span> <span class="kw">null</span></span>
<span id="cb24-23"><a href="#cb24-23" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> absdev <span class="op">=</span> <span class="fu">round2</span>(<span class="bu">Math</span><span class="op">.</span><span class="fu">abs</span>(dev)) <span class="op">||</span> <span class="kw">null</span></span>
<span id="cb24-24"><a href="#cb24-24" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> sqdev <span class="op">=</span> <span class="fu">round2</span>(dev <span class="op">**</span> <span class="dv">2</span>) <span class="op">||</span> <span class="kw">null</span></span>
<span id="cb24-25"><a href="#cb24-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-26"><a href="#cb24-26" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span>(opts<span class="op">.</span><span class="at">dev</span> <span class="op">==</span> <span class="kw">true</span>) {</span>
<span id="cb24-27"><a href="#cb24-27" aria-hidden="true" tabindex="-1"></a>      <span class="kw">let</span> deviations <span class="op">=</span> {<span class="st">"Deviation"</span><span class="op">:</span> dev}</span>
<span id="cb24-28"><a href="#cb24-28" aria-hidden="true" tabindex="-1"></a>      row <span class="op">=</span> <span class="bu">Object</span><span class="op">.</span><span class="fu">assign</span>({}<span class="op">,</span> row<span class="op">,</span> deviations)</span>
<span id="cb24-29"><a href="#cb24-29" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb24-30"><a href="#cb24-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-31"><a href="#cb24-31" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span>(opts<span class="op">.</span><span class="at">absdev</span>) {</span>
<span id="cb24-32"><a href="#cb24-32" aria-hidden="true" tabindex="-1"></a>      <span class="kw">let</span> deviations <span class="op">=</span> {<span class="st">"Absolute deviation"</span><span class="op">:</span> absdev}</span>
<span id="cb24-33"><a href="#cb24-33" aria-hidden="true" tabindex="-1"></a>      row <span class="op">=</span> <span class="bu">Object</span><span class="op">.</span><span class="fu">assign</span>({}<span class="op">,</span> row<span class="op">,</span> deviations)</span>
<span id="cb24-34"><a href="#cb24-34" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb24-35"><a href="#cb24-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-36"><a href="#cb24-36" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span>(opts<span class="op">.</span><span class="at">sqdev</span>) {</span>
<span id="cb24-37"><a href="#cb24-37" aria-hidden="true" tabindex="-1"></a>      <span class="kw">let</span> deviations <span class="op">=</span> {<span class="st">"Squared deviation"</span><span class="op">:</span> sqdev}</span>
<span id="cb24-38"><a href="#cb24-38" aria-hidden="true" tabindex="-1"></a>      row <span class="op">=</span> <span class="bu">Object</span><span class="op">.</span><span class="fu">assign</span>({}<span class="op">,</span> row<span class="op">,</span> deviations)</span>
<span id="cb24-39"><a href="#cb24-39" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb24-40"><a href="#cb24-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-41"><a href="#cb24-41" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> row </span>
<span id="cb24-42"><a href="#cb24-42" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb24-43"><a href="#cb24-43" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb24-44"><a href="#cb24-44" aria-hidden="true" tabindex="-1"></a><span class="cf">return</span> <span class="fu">maketable</span>(data)</span>
<span id="cb24-45"><a href="#cb24-45" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-24" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb25" data-startfrom="0" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line -1;"><span id="cb25-0"><a href="#cb25-0" aria-hidden="true" tabindex="-1"></a><span class="fu">deviations_summary</span>(mutable opts)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-25" data-nodetype="expression">

</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb26" data-startfrom="-1" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line -2;"><span id="cb26--1"><a href="#cb26--1" aria-hidden="true" tabindex="-1"></a>deviations_summary <span class="op">=</span> (opts) <span class="kw">=&gt;</span>{</span>
<span id="cb26-0"><a href="#cb26-0" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>  <span class="kw">let</span> warning <span class="op">=</span> <span class="vs">`&lt;font color="red"&gt;add data&lt;/font&gt;`</span></span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>  <span class="kw">let</span> d <span class="op">=</span> summary<span class="op">.</span><span class="at">deviations</span><span class="op">.</span><span class="at">data</span></span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a>  <span class="kw">let</span> mean <span class="op">=</span> d3<span class="op">.</span><span class="fu">mean</span>(d)</span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a>  <span class="kw">let</span> abs_mean <span class="op">=</span> <span class="fu">round2</span>(d3<span class="op">.</span><span class="fu">mean</span>(d<span class="op">.</span><span class="fu">map</span>((x) <span class="kw">=&gt;</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">abs</span>(x <span class="op">-</span> mean)))) <span class="op">||</span> warning</span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a>  <span class="kw">let</span> sq_mean <span class="op">=</span> <span class="fu">round2</span>(d3<span class="op">.</span><span class="fu">mean</span>(d<span class="op">.</span><span class="fu">map</span>((x) <span class="kw">=&gt;</span> (x <span class="op">-</span> mean) <span class="op">**</span> <span class="dv">2</span>))) <span class="op">||</span> warning</span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-8"><a href="#cb26-8" aria-hidden="true" tabindex="-1"></a>  <span class="kw">let</span> abs_sum <span class="op">=</span> <span class="fu">round2</span>(d3<span class="op">.</span><span class="fu">sum</span>(d<span class="op">.</span><span class="fu">map</span>((x) <span class="kw">=&gt;</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">abs</span>(x <span class="op">-</span> mean)))) <span class="op">||</span> warning</span>
<span id="cb26-9"><a href="#cb26-9" aria-hidden="true" tabindex="-1"></a>  <span class="kw">let</span> sq_sum <span class="op">=</span> <span class="fu">round2</span>(d3<span class="op">.</span><span class="fu">sum</span>(d<span class="op">.</span><span class="fu">map</span>((x) <span class="kw">=&gt;</span> (x <span class="op">-</span> mean) <span class="op">**</span> <span class="dv">2</span>))) <span class="op">||</span> warning</span>
<span id="cb26-10"><a href="#cb26-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-11"><a href="#cb26-11" aria-hidden="true" tabindex="-1"></a>  <span class="kw">let</span> summarytext <span class="op">=</span> <span class="vs">``</span></span>
<span id="cb26-12"><a href="#cb26-12" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span>(opts<span class="op">.</span><span class="at">dev</span>){</span>
<span id="cb26-13"><a href="#cb26-13" aria-hidden="true" tabindex="-1"></a>    summarytext <span class="op">=</span> summarytext <span class="op">+</span> <span class="vs">`**Deviations** Sum = </span><span class="sc">${</span>d3<span class="op">.</span><span class="fu">sum</span>(d) <span class="op">||</span> <span class="dv">0</span><span class="sc">}</span><span class="vs">; Mean =  0</span><span class="sc">\n\n</span><span class="vs">`</span></span>
<span id="cb26-14"><a href="#cb26-14" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb26-15"><a href="#cb26-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-16"><a href="#cb26-16" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span>(opts<span class="op">.</span><span class="at">sqdev</span>){</span>
<span id="cb26-17"><a href="#cb26-17" aria-hidden="true" tabindex="-1"></a>    summarytext <span class="op">=</span> summarytext  <span class="op">+</span><span class="vs">`**Squared deviations** Sum =  </span><span class="sc">${</span>sq_sum<span class="sc">}</span><span class="vs">; Mean = </span><span class="sc">${</span>sq_mean<span class="sc">}\n\n</span><span class="vs">`</span></span>
<span id="cb26-18"><a href="#cb26-18" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb26-19"><a href="#cb26-19" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb26-20"><a href="#cb26-20" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span>(opts<span class="op">.</span><span class="at">absdev</span>){</span>
<span id="cb26-21"><a href="#cb26-21" aria-hidden="true" tabindex="-1"></a>    summarytext <span class="op">=</span> summarytext  <span class="op">+</span><span class="vs">`**Absolute deviations** Sum = </span><span class="sc">${</span>abs_sum<span class="sc">}</span><span class="vs">; Mean = </span><span class="sc">${</span>abs_mean<span class="sc">}\n\n</span><span class="vs">`</span></span>
<span id="cb26-22"><a href="#cb26-22" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb26-23"><a href="#cb26-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-24"><a href="#cb26-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-25"><a href="#cb26-25" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> <span class="fu">md</span><span class="vs">`</span><span class="sc">${</span>summarytext<span class="sc">}</span><span class="vs">`</span></span>
<span id="cb26-26"><a href="#cb26-26" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-26" data-nodetype="declaration">

</div>
</div>
</div>
<!-- }}} -->
</div>
</div>
</div>
<p>Mathematically, we can represent deviation with <a href="#eq-dev">Equation&nbsp;1</a>, below:</p>
<p><span id="eq-dev"><span class="math display">\[D=x_i - \bar{x} \tag{1}\]</span></span></p>
<p>Because we are calculating this for every data point there will be as many deviations as we have values for our variable. To get a <em>single measure</em>, we’ll have to perform another step.</p>
<p>One thing we could try doing is to add up the numbers. But this won’t work. To see why, try adding a few points in <a href="#exm-deviation">Explorable&nbsp;4</a>. Click <strong>Show data table</strong> so that you can see the actual values of the points, and the calculated deviations from the mean. Try adding up all the deviations. What do you notice?</p>
<p>As you can see, if you add up all the deviations, they add up to zero. Because the mean is our midpoint, the distances for all the points higher than the mean cancel out the distances for all the points lower than the mean.</p>
<p>We can get around this problem by taking the square of the deviations before adding them up. Squaring a number will turn a negative number into a positive number. Click <strong>Squared deviations</strong> in <a href="#exm-deviation">Explorable&nbsp;4</a>, to add a column for the squared deviations.</p>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb27" data-startfrom="0" data-source-offset="-0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line -1;"><span id="cb27-0"><a href="#cb27-0" aria-hidden="true" tabindex="-1"></a>sq_devs <span class="op">=</span> summary<span class="op">.</span><span class="at">deviations</span><span class="op">.</span><span class="at">data</span><span class="op">.</span><span class="fu">map</span>((v) <span class="kw">=&gt;</span> (v <span class="op">-</span> summary<span class="op">.</span><span class="at">deviations</span><span class="op">.</span><span class="at">mean</span>) <span class="op">**</span> <span class="dv">2</span>)</span>
<span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>sq_devs_sum <span class="op">=</span> d3<span class="op">.</span><span class="fu">sum</span>(sq_devs)</span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>sq_devs_mean <span class="op">=</span> d3<span class="op">.</span><span class="fu">mean</span>(sq_devs)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-27-1" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-27-2" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-27-3" data-nodetype="declaration">

</div>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb28" data-startfrom="-1" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line -2;"><span id="cb28--1"><a href="#cb28--1" aria-hidden="true" tabindex="-1"></a><span class="fu">md</span><span class="vs">`Now when we add up all the squared deviations we won't get zero. Now they add up </span></span>
<span id="cb28-0"><a href="#cb28-0" aria-hidden="true" tabindex="-1"></a><span class="vs">to </span><span class="sc">${</span><span class="bu">Math</span><span class="op">.</span><span class="fu">round</span>(sq_devs_sum <span class="op">*</span> <span class="dv">100</span>) <span class="op">/</span> <span class="dv">100</span> <span class="op">||</span> <span class="st">"&lt;font color='red'&gt;warning: add some data!&lt;/font&gt;"</span><span class="sc">}</span><span class="vs">.</span></span>
<span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="vs">But now we have another problem. As you add more data above, the sum of the squared</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a><span class="vs">deviations will get bigger and bigger. `</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-28" data-nodetype="expression">

</div>
</div>
</div>
<p>That’s not good because even big samples can have a small amount of variation, while smaller samples can vary a lot. We want our measure of spread to be able to capture this. To get around this, we’ll move on to our next measure of spread.</p>
</section>
<section id="variance" class="level3">
<h3 class="anchored" data-anchor-id="variance">Variance</h3>
<p>Our next measure of spread is the <strong>variance</strong>. The <strong>variance</strong> gets around the problem of the measure of spread getting bigger when we have bigger datasets. It’s gets around this problem by working out the <strong>average squared deviation</strong> from the mean. Or more precisely, the <strong>average squared deviations</strong> from the <strong>population mean</strong>. (The deviation from the <strong>population mean</strong> is important, but more on that later).</p>
<p>Usually we don’t have access to the <strong>population mean</strong>, but in <a href="#exm-deviation">Explorable&nbsp;4</a>, we’ll just define our <strong>population</strong> as <em>all the points we’ve added to the plot</em>.</p>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb29" data-startfrom="0" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line -1;"><span id="cb29-0"><a href="#cb29-0" aria-hidden="true" tabindex="-1"></a><span class="fu">md</span><span class="vs">`If we now work out the **mean** of the squared deviations, rather than the </span></span>
<span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="vs">**sum** of the squared deviations we get: </span><span class="sc">${</span><span class="bu">Math</span><span class="op">.</span><span class="fu">round</span>(sq_devs_mean <span class="op">*</span> <span class="dv">100</span>) <span class="op">/</span> <span class="dv">100</span> <span class="op">||</span> <span class="st">"&lt;font color='red'&gt;warning: add some data!&lt;/font&gt;"</span><span class="sc">}</span><span class="vs">. `</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-29" data-nodetype="expression">

</div>
</div>
</div>
<p>In <a href="#exm-deviation">Explorable&nbsp;4</a>, we have access to the population mean, but usually we don’t. What if we instead just worked out the average squared deviations from the <strong>sample mean</strong>? Does this matter?</p>
<p>Well, it turns out it does. And for this reason, there’s actually two ways of calculating the variance. We use one way when we know about characteristics of the population (this is called the <strong>population variance</strong>), and we use another way when all we have access to is the sample (this is called the <strong>sample variance</strong>). We’ll explore both of these below, to get an understanding of why both methods exist.</p>
<p>Before we explore the two methods, we’ll start off simple with the scenario where we have access to the population mean. We can explore this scenario in <a href="#exm-pop-dev">Explorable&nbsp;5</a>.</p>
<div class="callout callout-style-simple callout-tip no-icon">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-body-container">
<div id="exm-pop-dev" class="theorem example">
<p><span class="theorem-title"><strong>Explorable 5 (Explore mean squared deviation from the population mean) </strong></span>&nbsp;</p>
</div>
<p>In this Explorable we’ll work with data that has population mean of 100. The variance of the population, which is 225, is marked as the horizontal line on <a href="#fig-var-popmean">Figure&nbsp;2</a>. In <a href="#fig-var-popmean">Figure&nbsp;2</a> we can see the variance (mean squared deviation from the population mean) calculated for different samples drawn from the same population. As you can see, sometimes this value is higher than the variance of the population and sometimes it is lower. Just like we saw with sample means in Lecture 6.</p>
<!-- OHQ Code {{{ -->
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb30" data-startfrom="-1" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line -2;"><span id="cb30--1"><a href="#cb30--1" aria-hidden="true" tabindex="-1"></a>data_stream1_raw <span class="op">=</span> {</span>
<span id="cb30-0"><a href="#cb30-0" aria-hidden="true" tabindex="-1"></a>  replay_variance_1</span>
<span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>  Promises<span class="op">.</span><span class="fu">delay</span>(<span class="dv">1500</span>)<span class="op">;</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>  <span class="kw">var</span> list <span class="op">=</span> []</span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>  <span class="kw">var</span> i <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a>  <span class="cf">while</span> (i <span class="op">&lt;</span> <span class="dv">10000</span>) {</span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a>    <span class="kw">var</span> value <span class="op">=</span> { <span class="dt">x</span><span class="op">:</span> i<span class="op">,</span> <span class="dt">y</span><span class="op">:</span> raw_data<span class="op">.</span><span class="at">samp_var2</span>[i] }<span class="op">;</span></span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a>    list<span class="op">.</span><span class="fu">push</span>(value)<span class="op">;</span></span>
<span id="cb30-7"><a href="#cb30-7" aria-hidden="true" tabindex="-1"></a>    i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb30-8"><a href="#cb30-8" aria-hidden="true" tabindex="-1"></a>    <span class="kw">yield</span> Promises<span class="op">.</span><span class="fu">delay</span>(<span class="dv">5</span><span class="op">,</span> list)<span class="op">;</span></span>
<span id="cb30-9"><a href="#cb30-9" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb30-10"><a href="#cb30-10" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-30" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb31" data-startfrom="-1" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line -2;"><span id="cb31--1"><a href="#cb31--1" aria-hidden="true" tabindex="-1"></a>data_stream1_ave <span class="op">=</span> {</span>
<span id="cb31-0"><a href="#cb31-0" aria-hidden="true" tabindex="-1"></a>  replay_variance_1</span>
<span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>  Promises<span class="op">.</span><span class="fu">delay</span>(<span class="dv">1500</span>)<span class="op">;</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>  <span class="kw">var</span> list <span class="op">=</span> []</span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>  <span class="kw">var</span> i <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a>  <span class="cf">while</span> (i <span class="op">&lt;</span> <span class="dv">10000</span>) {</span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a>    <span class="kw">var</span> value <span class="op">=</span> { <span class="dt">x</span><span class="op">:</span> i<span class="op">,</span> <span class="dt">y</span><span class="op">:</span> raw_data_ave<span class="op">.</span><span class="at">r_samp_var2</span>[i] }<span class="op">;</span></span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true" tabindex="-1"></a>    list<span class="op">.</span><span class="fu">push</span>(value)<span class="op">;</span></span>
<span id="cb31-7"><a href="#cb31-7" aria-hidden="true" tabindex="-1"></a>    i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb31-8"><a href="#cb31-8" aria-hidden="true" tabindex="-1"></a>    <span class="kw">yield</span> Promises<span class="op">.</span><span class="fu">delay</span>(<span class="dv">5</span><span class="op">,</span> list)<span class="op">;</span></span>
<span id="cb31-9"><a href="#cb31-9" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb31-10"><a href="#cb31-10" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-31" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb32" data-startfrom="1" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>Plot<span class="op">.</span><span class="fu">plot</span>({</span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>    <span class="dt">height</span><span class="op">:</span> <span class="dv">200</span><span class="op">,</span></span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a>    <span class="dt">marginLeft</span><span class="op">:</span> <span class="dv">80</span><span class="op">,</span></span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">marks</span><span class="op">:</span> [</span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a>      Plot<span class="op">.</span><span class="fu">dot</span>(data_stream1_raw<span class="op">,</span> {</span>
<span id="cb32-6"><a href="#cb32-6" aria-hidden="true" tabindex="-1"></a>        <span class="dt">x</span><span class="op">:</span> <span class="st">"x"</span><span class="op">,</span></span>
<span id="cb32-7"><a href="#cb32-7" aria-hidden="true" tabindex="-1"></a>        <span class="dt">y</span><span class="op">:</span> <span class="st">"y"</span><span class="op">,</span></span>
<span id="cb32-8"><a href="#cb32-8" aria-hidden="true" tabindex="-1"></a>        <span class="dt">clip</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb32-9"><a href="#cb32-9" aria-hidden="true" tabindex="-1"></a>        <span class="dt">r</span><span class="op">:</span> <span class="dv">4</span><span class="op">,</span></span>
<span id="cb32-10"><a href="#cb32-10" aria-hidden="true" tabindex="-1"></a>        <span class="dt">curve</span><span class="op">:</span> <span class="st">"linear"</span><span class="op">,</span></span>
<span id="cb32-11"><a href="#cb32-11" aria-hidden="true" tabindex="-1"></a>        <span class="dt">fill</span><span class="op">:</span> <span class="st">"black"</span><span class="op">,</span></span>
<span id="cb32-12"><a href="#cb32-12" aria-hidden="true" tabindex="-1"></a>        <span class="dt">strokeWidth</span><span class="op">:</span> <span class="dv">1</span><span class="op">,</span></span>
<span id="cb32-13"><a href="#cb32-13" aria-hidden="true" tabindex="-1"></a>        <span class="dt">stroke</span><span class="op">:</span> <span class="st">"black"</span><span class="op">,</span></span>
<span id="cb32-14"><a href="#cb32-14" aria-hidden="true" tabindex="-1"></a>        <span class="dt">marker</span><span class="op">:</span> <span class="st">"circle"</span></span>
<span id="cb32-15"><a href="#cb32-15" aria-hidden="true" tabindex="-1"></a>      })<span class="op">,</span></span>
<span id="cb32-16"><a href="#cb32-16" aria-hidden="true" tabindex="-1"></a>      Plot<span class="op">.</span><span class="fu">line</span>(data_stream1_raw<span class="op">,</span> {</span>
<span id="cb32-17"><a href="#cb32-17" aria-hidden="true" tabindex="-1"></a>        <span class="dt">x</span><span class="op">:</span> <span class="st">"x"</span><span class="op">,</span></span>
<span id="cb32-18"><a href="#cb32-18" aria-hidden="true" tabindex="-1"></a>        <span class="dt">y</span><span class="op">:</span> <span class="st">"y"</span><span class="op">,</span></span>
<span id="cb32-19"><a href="#cb32-19" aria-hidden="true" tabindex="-1"></a>        <span class="dt">clip</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb32-20"><a href="#cb32-20" aria-hidden="true" tabindex="-1"></a>        <span class="dt">r</span><span class="op">:</span> <span class="dv">4</span><span class="op">,</span></span>
<span id="cb32-21"><a href="#cb32-21" aria-hidden="true" tabindex="-1"></a>        <span class="dt">curve</span><span class="op">:</span> <span class="st">"linear"</span><span class="op">,</span></span>
<span id="cb32-22"><a href="#cb32-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-23"><a href="#cb32-23" aria-hidden="true" tabindex="-1"></a>        <span class="dt">strokeWidth</span><span class="op">:</span> <span class="dv">1</span></span>
<span id="cb32-24"><a href="#cb32-24" aria-hidden="true" tabindex="-1"></a>      })<span class="op">,</span></span>
<span id="cb32-25"><a href="#cb32-25" aria-hidden="true" tabindex="-1"></a>      Plot<span class="op">.</span><span class="fu">ruleY</span>([<span class="dv">225</span>]<span class="op">,</span> { <span class="dt">strokeOpacity</span><span class="op">:</span> <span class="fl">0.6</span><span class="op">,</span> <span class="dt">strokeWidth</span><span class="op">:</span> <span class="dv">1</span> })</span>
<span id="cb32-26"><a href="#cb32-26" aria-hidden="true" tabindex="-1"></a>    ]<span class="op">,</span></span>
<span id="cb32-27"><a href="#cb32-27" aria-hidden="true" tabindex="-1"></a>    <span class="dt">y</span><span class="op">:</span> { <span class="dt">label</span><span class="op">:</span> <span class="st">"Variance of sample"</span><span class="op">,</span> <span class="dt">domain</span><span class="op">:</span> [<span class="dv">50</span><span class="op">,</span> <span class="dv">400</span>] }<span class="op">,</span></span>
<span id="cb32-28"><a href="#cb32-28" aria-hidden="true" tabindex="-1"></a>    <span class="dt">x</span><span class="op">:</span> {</span>
<span id="cb32-29"><a href="#cb32-29" aria-hidden="true" tabindex="-1"></a>      <span class="dt">label</span><span class="op">:</span> <span class="st">"Sample number"</span><span class="op">,</span></span>
<span id="cb32-30"><a href="#cb32-30" aria-hidden="true" tabindex="-1"></a>      <span class="dt">domain</span><span class="op">:</span> [<span class="dv">0</span><span class="op">,</span> <span class="dv">100</span>]</span>
<span id="cb32-31"><a href="#cb32-31" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb32-32"><a href="#cb32-32" aria-hidden="true" tabindex="-1"></a>  })</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div id="fig-var-popmean" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<div id="ojs-cell-32" data-nodetype="expression">

</div>
<figcaption class="figure-caption">Figure&nbsp;2: Variance (mean squared deviation from the population mean) calculated for different samples</figcaption>
</figure>
</div>
</div>
<p>Although our mean squared deviation from the population mean varies from sample to sample, let’s take a look at what happens if we take the running average by averaging together many samples. This is just what we did with the sample mean in Lecture 6, and you can see this in <a href="#fig-var-popmean-running">Figure&nbsp;3</a>. What do you notice?</p>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb33" data-startfrom="1" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>Plot<span class="op">.</span><span class="fu">plot</span>({</span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">height</span><span class="op">:</span> <span class="dv">200</span><span class="op">,</span></span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">marginLeft</span><span class="op">:</span> <span class="dv">80</span><span class="op">,</span></span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">marks</span><span class="op">:</span> [</span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a>    Plot<span class="op">.</span><span class="fu">line</span>(data_stream1_ave<span class="op">,</span> {</span>
<span id="cb33-6"><a href="#cb33-6" aria-hidden="true" tabindex="-1"></a>      <span class="dt">x</span><span class="op">:</span> <span class="st">"x"</span><span class="op">,</span></span>
<span id="cb33-7"><a href="#cb33-7" aria-hidden="true" tabindex="-1"></a>      <span class="dt">y</span><span class="op">:</span> <span class="st">"y"</span><span class="op">,</span></span>
<span id="cb33-8"><a href="#cb33-8" aria-hidden="true" tabindex="-1"></a>      <span class="dt">clip</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb33-9"><a href="#cb33-9" aria-hidden="true" tabindex="-1"></a>      <span class="dt">r</span><span class="op">:</span> <span class="dv">4</span><span class="op">,</span></span>
<span id="cb33-10"><a href="#cb33-10" aria-hidden="true" tabindex="-1"></a>      <span class="dt">curve</span><span class="op">:</span> <span class="st">"linear"</span><span class="op">,</span></span>
<span id="cb33-11"><a href="#cb33-11" aria-hidden="true" tabindex="-1"></a>      <span class="dt">strokeWidth</span><span class="op">:</span> <span class="dv">2</span></span>
<span id="cb33-12"><a href="#cb33-12" aria-hidden="true" tabindex="-1"></a>    })<span class="op">,</span></span>
<span id="cb33-13"><a href="#cb33-13" aria-hidden="true" tabindex="-1"></a>    Plot<span class="op">.</span><span class="fu">ruleY</span>([<span class="dv">225</span>]<span class="op">,</span> { <span class="dt">strokeOpacity</span><span class="op">:</span> <span class="fl">0.6</span><span class="op">,</span> <span class="dt">strokeWidth</span><span class="op">:</span> <span class="dv">1</span> })</span>
<span id="cb33-14"><a href="#cb33-14" aria-hidden="true" tabindex="-1"></a>  ]<span class="op">,</span></span>
<span id="cb33-15"><a href="#cb33-15" aria-hidden="true" tabindex="-1"></a>  <span class="dt">y</span><span class="op">:</span> { <span class="dt">label</span><span class="op">:</span> <span class="st">"Running mean"</span><span class="op">,</span> <span class="dt">domain</span><span class="op">:</span> [<span class="dv">200</span><span class="op">,</span> <span class="dv">250</span>] }<span class="op">,</span></span>
<span id="cb33-16"><a href="#cb33-16" aria-hidden="true" tabindex="-1"></a>  <span class="dt">x</span><span class="op">:</span> {</span>
<span id="cb33-17"><a href="#cb33-17" aria-hidden="true" tabindex="-1"></a>    <span class="dt">label</span><span class="op">:</span> <span class="st">"Sample number"</span><span class="op">,</span></span>
<span id="cb33-18"><a href="#cb33-18" aria-hidden="true" tabindex="-1"></a>    <span class="dt">domain</span><span class="op">:</span> [<span class="dv">0</span><span class="op">,</span> data_stream1_ave<span class="op">.</span><span class="at">length</span> <span class="op">+</span> <span class="dv">100</span>]</span>
<span id="cb33-19"><a href="#cb33-19" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb33-20"><a href="#cb33-20" aria-hidden="true" tabindex="-1"></a>})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div id="fig-var-popmean-running" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<div id="ojs-cell-33" data-nodetype="expression">

</div>
<figcaption class="figure-caption">Figure&nbsp;3: Running average of the mean squared deviation from the population mean</figcaption>
</figure>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb34" data-startfrom="-1" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line -2;"><span id="cb34--1"><a href="#cb34--1" aria-hidden="true" tabindex="-1"></a>viewof replay_variance_1 <span class="op">=</span> Inputs<span class="op">.</span><span class="fu">button</span>(<span class="st">"Replay"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-34" data-nodetype="declaration">

</div>
</div>
</div>
<p>That’s right, the running average of our mean squared deviations from the population mean eventually converges to the variance of the population. Although it might take a bit longer to do this than it did for the sample mean.</p>
<!-- }}} -->
</div>
</div>
</div>
<p>The situation in <a href="#exm-pop-dev">Explorable&nbsp;5</a> is fairly straight forward. But what happens if we only have access to the sample so we have to use the <strong>sample mean</strong> instead of the <strong>population mean</strong>. You can explore this scenario in <a href="#exm-pop-mean">Explorable&nbsp;6</a>.</p>
<div class="callout callout-style-simple callout-tip no-icon">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-body-container">
<div id="exm-pop-mean" class="theorem example">
<p><span class="theorem-title"><strong>Explorable 6 (Explore mean squared deviation from the sample mean) </strong></span>&nbsp;</p>
</div>
<p>In this Explorable we’ll be using the sample population as in <a href="#exm-pop-dev">Explorable&nbsp;5</a>. So once again the mean of the population will be 100 and the variance of the population will be 225. But now instead of working out the deviations from the population mean we’ll work them out from whatever the mean of our sample happened to be. You can see the sample to sample change in the mean squared deviations from the sample mean in <a href="#fig-samp-mean-dev">Figure&nbsp;4</a>.</p>
<!-- OHQ CODE {{{ -->
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb35" data-startfrom="-1" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line -2;"><span id="cb35--1"><a href="#cb35--1" aria-hidden="true" tabindex="-1"></a>data_stream2_raw <span class="op">=</span> {</span>
<span id="cb35-0"><a href="#cb35-0" aria-hidden="true" tabindex="-1"></a>  replay_variance_2</span>
<span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>  Promises<span class="op">.</span><span class="fu">delay</span>(<span class="dv">1500</span>)<span class="op">;</span></span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>  <span class="kw">var</span> list <span class="op">=</span> []</span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a>  <span class="kw">var</span> i <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a>  <span class="cf">while</span> (i <span class="op">&lt;</span> <span class="dv">10000</span>) {</span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a>    <span class="kw">var</span> value <span class="op">=</span> { <span class="dt">x</span><span class="op">:</span> i<span class="op">,</span> <span class="dt">y</span><span class="op">:</span> raw_data<span class="op">.</span><span class="at">pop_var</span>[i] }<span class="op">;</span></span>
<span id="cb35-6"><a href="#cb35-6" aria-hidden="true" tabindex="-1"></a>    list<span class="op">.</span><span class="fu">push</span>(value)<span class="op">;</span></span>
<span id="cb35-7"><a href="#cb35-7" aria-hidden="true" tabindex="-1"></a>    i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb35-8"><a href="#cb35-8" aria-hidden="true" tabindex="-1"></a>    <span class="kw">yield</span> Promises<span class="op">.</span><span class="fu">delay</span>(<span class="dv">5</span><span class="op">,</span> list)<span class="op">;</span></span>
<span id="cb35-9"><a href="#cb35-9" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb35-10"><a href="#cb35-10" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-35" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb36" data-startfrom="-1" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line -2;"><span id="cb36--1"><a href="#cb36--1" aria-hidden="true" tabindex="-1"></a>data_stream2_ave <span class="op">=</span> {</span>
<span id="cb36-0"><a href="#cb36-0" aria-hidden="true" tabindex="-1"></a>  replay_variance_2</span>
<span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>  Promises<span class="op">.</span><span class="fu">delay</span>(<span class="dv">1500</span>)<span class="op">;</span></span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a>  <span class="kw">var</span> list <span class="op">=</span> []</span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a>  <span class="kw">var</span> i <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a>  <span class="cf">while</span> (i <span class="op">&lt;</span> <span class="dv">10000</span>) {</span>
<span id="cb36-5"><a href="#cb36-5" aria-hidden="true" tabindex="-1"></a>    <span class="kw">var</span> value <span class="op">=</span> { <span class="dt">x</span><span class="op">:</span> i<span class="op">,</span> <span class="dt">y</span><span class="op">:</span> raw_data_ave<span class="op">.</span><span class="at">r_pop_var</span>[i] }<span class="op">;</span></span>
<span id="cb36-6"><a href="#cb36-6" aria-hidden="true" tabindex="-1"></a>    list<span class="op">.</span><span class="fu">push</span>(value)<span class="op">;</span></span>
<span id="cb36-7"><a href="#cb36-7" aria-hidden="true" tabindex="-1"></a>    i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb36-8"><a href="#cb36-8" aria-hidden="true" tabindex="-1"></a>    <span class="kw">yield</span> Promises<span class="op">.</span><span class="fu">delay</span>(<span class="dv">5</span><span class="op">,</span> list)<span class="op">;</span></span>
<span id="cb36-9"><a href="#cb36-9" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb36-10"><a href="#cb36-10" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-36" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb37" data-startfrom="1" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a>Plot<span class="op">.</span><span class="fu">plot</span>({</span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a>    <span class="dt">height</span><span class="op">:</span> <span class="dv">200</span><span class="op">,</span></span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a>    <span class="dt">marginLeft</span><span class="op">:</span> <span class="dv">80</span><span class="op">,</span></span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">marks</span><span class="op">:</span> [</span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a>      Plot<span class="op">.</span><span class="fu">dot</span>(data_stream2_raw<span class="op">,</span> {</span>
<span id="cb37-6"><a href="#cb37-6" aria-hidden="true" tabindex="-1"></a>        <span class="dt">x</span><span class="op">:</span> <span class="st">"x"</span><span class="op">,</span></span>
<span id="cb37-7"><a href="#cb37-7" aria-hidden="true" tabindex="-1"></a>        <span class="dt">y</span><span class="op">:</span> <span class="st">"y"</span><span class="op">,</span></span>
<span id="cb37-8"><a href="#cb37-8" aria-hidden="true" tabindex="-1"></a>        <span class="dt">clip</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb37-9"><a href="#cb37-9" aria-hidden="true" tabindex="-1"></a>        <span class="dt">r</span><span class="op">:</span> <span class="dv">4</span><span class="op">,</span></span>
<span id="cb37-10"><a href="#cb37-10" aria-hidden="true" tabindex="-1"></a>        <span class="dt">curve</span><span class="op">:</span> <span class="st">"linear"</span><span class="op">,</span></span>
<span id="cb37-11"><a href="#cb37-11" aria-hidden="true" tabindex="-1"></a>        <span class="dt">fill</span><span class="op">:</span> <span class="st">"black"</span><span class="op">,</span></span>
<span id="cb37-12"><a href="#cb37-12" aria-hidden="true" tabindex="-1"></a>        <span class="dt">strokeWidth</span><span class="op">:</span> <span class="dv">1</span><span class="op">,</span></span>
<span id="cb37-13"><a href="#cb37-13" aria-hidden="true" tabindex="-1"></a>        <span class="dt">stroke</span><span class="op">:</span> <span class="st">"black"</span><span class="op">,</span></span>
<span id="cb37-14"><a href="#cb37-14" aria-hidden="true" tabindex="-1"></a>        <span class="dt">marker</span><span class="op">:</span> <span class="st">"circle"</span></span>
<span id="cb37-15"><a href="#cb37-15" aria-hidden="true" tabindex="-1"></a>      })<span class="op">,</span></span>
<span id="cb37-16"><a href="#cb37-16" aria-hidden="true" tabindex="-1"></a>      Plot<span class="op">.</span><span class="fu">line</span>(data_stream2_raw<span class="op">,</span> {</span>
<span id="cb37-17"><a href="#cb37-17" aria-hidden="true" tabindex="-1"></a>        <span class="dt">x</span><span class="op">:</span> <span class="st">"x"</span><span class="op">,</span></span>
<span id="cb37-18"><a href="#cb37-18" aria-hidden="true" tabindex="-1"></a>        <span class="dt">y</span><span class="op">:</span> <span class="st">"y"</span><span class="op">,</span></span>
<span id="cb37-19"><a href="#cb37-19" aria-hidden="true" tabindex="-1"></a>        <span class="dt">clip</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb37-20"><a href="#cb37-20" aria-hidden="true" tabindex="-1"></a>        <span class="dt">r</span><span class="op">:</span> <span class="dv">4</span><span class="op">,</span></span>
<span id="cb37-21"><a href="#cb37-21" aria-hidden="true" tabindex="-1"></a>        <span class="dt">curve</span><span class="op">:</span> <span class="st">"linear"</span><span class="op">,</span></span>
<span id="cb37-22"><a href="#cb37-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-23"><a href="#cb37-23" aria-hidden="true" tabindex="-1"></a>        <span class="dt">strokeWidth</span><span class="op">:</span> <span class="dv">1</span></span>
<span id="cb37-24"><a href="#cb37-24" aria-hidden="true" tabindex="-1"></a>      })<span class="op">,</span></span>
<span id="cb37-25"><a href="#cb37-25" aria-hidden="true" tabindex="-1"></a>      Plot<span class="op">.</span><span class="fu">ruleY</span>([<span class="dv">225</span>]<span class="op">,</span> { <span class="dt">strokeOpacity</span><span class="op">:</span> <span class="fl">0.6</span><span class="op">,</span> <span class="dt">strokeWidth</span><span class="op">:</span> <span class="dv">1</span> })</span>
<span id="cb37-26"><a href="#cb37-26" aria-hidden="true" tabindex="-1"></a>    ]<span class="op">,</span></span>
<span id="cb37-27"><a href="#cb37-27" aria-hidden="true" tabindex="-1"></a>    <span class="dt">y</span><span class="op">:</span> { <span class="dt">label</span><span class="op">:</span> <span class="st">"Variance of sample"</span><span class="op">,</span> <span class="dt">domain</span><span class="op">:</span> [<span class="dv">50</span><span class="op">,</span> <span class="dv">400</span>] }<span class="op">,</span></span>
<span id="cb37-28"><a href="#cb37-28" aria-hidden="true" tabindex="-1"></a>    <span class="dt">x</span><span class="op">:</span> {</span>
<span id="cb37-29"><a href="#cb37-29" aria-hidden="true" tabindex="-1"></a>      <span class="dt">label</span><span class="op">:</span> <span class="st">"Sample number"</span><span class="op">,</span></span>
<span id="cb37-30"><a href="#cb37-30" aria-hidden="true" tabindex="-1"></a>      <span class="dt">domain</span><span class="op">:</span> [<span class="dv">0</span><span class="op">,</span> <span class="dv">100</span>]</span>
<span id="cb37-31"><a href="#cb37-31" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb37-32"><a href="#cb37-32" aria-hidden="true" tabindex="-1"></a>  })</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div id="fig-samp-mean-dev" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<div id="ojs-cell-37" data-nodetype="expression">

</div>
<figcaption class="figure-caption">Figure&nbsp;4: Variance (mean squared deviation from the sample mean) calculated for different samples</figcaption>
</figure>
</div>
</div>
<p>Again we can see that the value we calculate varies from sample to sample. But let’s look what happens we take the running average just as we did before. You can see this in <a href="#fig-sample-mean-dev-running">Figure&nbsp;5</a>. What do you notice?</p>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb38" data-startfrom="1" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a>Plot<span class="op">.</span><span class="fu">plot</span>({</span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">height</span><span class="op">:</span> <span class="dv">200</span><span class="op">,</span></span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">marginLeft</span><span class="op">:</span> <span class="dv">80</span><span class="op">,</span></span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">marks</span><span class="op">:</span> [</span>
<span id="cb38-5"><a href="#cb38-5" aria-hidden="true" tabindex="-1"></a>    Plot<span class="op">.</span><span class="fu">line</span>(data_stream2_ave<span class="op">,</span> {</span>
<span id="cb38-6"><a href="#cb38-6" aria-hidden="true" tabindex="-1"></a>      <span class="dt">x</span><span class="op">:</span> <span class="st">"x"</span><span class="op">,</span></span>
<span id="cb38-7"><a href="#cb38-7" aria-hidden="true" tabindex="-1"></a>      <span class="dt">y</span><span class="op">:</span> <span class="st">"y"</span><span class="op">,</span></span>
<span id="cb38-8"><a href="#cb38-8" aria-hidden="true" tabindex="-1"></a>      <span class="dt">clip</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb38-9"><a href="#cb38-9" aria-hidden="true" tabindex="-1"></a>      <span class="dt">r</span><span class="op">:</span> <span class="dv">4</span><span class="op">,</span></span>
<span id="cb38-10"><a href="#cb38-10" aria-hidden="true" tabindex="-1"></a>      <span class="dt">curve</span><span class="op">:</span> <span class="st">"linear"</span><span class="op">,</span></span>
<span id="cb38-11"><a href="#cb38-11" aria-hidden="true" tabindex="-1"></a>      <span class="dt">strokeWidth</span><span class="op">:</span> <span class="dv">2</span></span>
<span id="cb38-12"><a href="#cb38-12" aria-hidden="true" tabindex="-1"></a>    })<span class="op">,</span></span>
<span id="cb38-13"><a href="#cb38-13" aria-hidden="true" tabindex="-1"></a>    Plot<span class="op">.</span><span class="fu">ruleY</span>([<span class="dv">225</span>]<span class="op">,</span> { <span class="dt">strokeOpacity</span><span class="op">:</span> <span class="fl">0.6</span><span class="op">,</span> <span class="dt">strokeWidth</span><span class="op">:</span> <span class="dv">1</span> })</span>
<span id="cb38-14"><a href="#cb38-14" aria-hidden="true" tabindex="-1"></a>  ]<span class="op">,</span></span>
<span id="cb38-15"><a href="#cb38-15" aria-hidden="true" tabindex="-1"></a>  <span class="dt">y</span><span class="op">:</span> { <span class="dt">label</span><span class="op">:</span> <span class="st">"Running mean"</span><span class="op">,</span> <span class="dt">domain</span><span class="op">:</span> [<span class="dv">200</span><span class="op">,</span> <span class="dv">250</span>] }<span class="op">,</span></span>
<span id="cb38-16"><a href="#cb38-16" aria-hidden="true" tabindex="-1"></a>  <span class="dt">x</span><span class="op">:</span> {</span>
<span id="cb38-17"><a href="#cb38-17" aria-hidden="true" tabindex="-1"></a>    <span class="dt">label</span><span class="op">:</span> <span class="st">"Sample number"</span><span class="op">,</span></span>
<span id="cb38-18"><a href="#cb38-18" aria-hidden="true" tabindex="-1"></a>    <span class="dt">domain</span><span class="op">:</span> [<span class="dv">0</span><span class="op">,</span> data_stream2_ave<span class="op">.</span><span class="at">length</span> <span class="op">+</span> <span class="dv">100</span>]</span>
<span id="cb38-19"><a href="#cb38-19" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb38-20"><a href="#cb38-20" aria-hidden="true" tabindex="-1"></a>})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div id="fig-sample-mean-dev-running" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<div id="ojs-cell-38" data-nodetype="expression">

</div>
<figcaption class="figure-caption">Figure&nbsp;5: Running average of the mean squared deviation from the sample mean</figcaption>
</figure>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb39" data-startfrom="-1" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line -2;"><span id="cb39--1"><a href="#cb39--1" aria-hidden="true" tabindex="-1"></a>viewof replay_variance_2 <span class="op">=</span> Inputs<span class="op">.</span><span class="fu">button</span>(<span class="st">"Replay"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-39" data-nodetype="declaration">

</div>
</div>
</div>
<p>That’s right, unlike the example in <a href="#exm-pop-dev">Explorable&nbsp;5</a> the running average of the mean squared deviation from the sample mean doesn’t converge on the variance of the population. It will always sit just below it.</p>
<!-- }}} -->
</div>
</div>
</div>
<p>As you can see from <a href="#exm-pop-mean">Explorable&nbsp;6</a>, if we only have access to information from the sample then the value we work out won’t on average be equal to the variance of the population. So what do we do? Instead, we need to work out a quantity known as the <strong>sample variance</strong>.</p>
<p>The quantity we’ve calculated so far is called the <strong>population variance</strong>. It can be represented with <a href="#eq-popvar">Equation&nbsp;2</a>, below:</p>
<p><span id="eq-popvar"><span class="math display">\[\mathrm{Var}(X)=\frac{\displaystyle\sum^{N}_{i=1}{(x_i - \mu)^2}}{N} \tag{2}\]</span></span></p>
<p>To compute the <strong>sample variance</strong> we’ll just make one small change to this equation.</p>
<section id="sample-variance" class="level4">
<h4 class="anchored" data-anchor-id="sample-variance">Sample variance</h4>
<p>When we only have access to the sample mean (<span class="math inline">\(\bar{x}\)</span>) and not the population mean (<span class="math inline">\(\mu\)</span>) we have to make an adjustment to the formula shown in <a href="#eq-popvar">Equation&nbsp;2</a>.</p>
<p>For the <strong>population variance</strong>, we simply worked out the mean of the squared deviations—or, put another way, the sum of the squared deviations divided by the number of data points (<strong>N</strong>). For the <strong>sample variance</strong> we’ll instead work out the deviation from the <strong>sample mean</strong> and divide the sum of these values by <strong>N - 1</strong>. This results in <a href="#eq-sampvar">Equation&nbsp;3</a>, blow:</p>
<p><span id="eq-sampvar"><span class="math display">\[\mathrm{Var}(X)=\frac{\displaystyle\sum^{N}_{i=1}{(x_i - \bar{x})^2}}{N - 1} \tag{3}\]</span></span></p>
<p>But does this make a difference? You can explore this in <a href="#exm-sample-dev">Explorable&nbsp;7</a></p>
<div class="callout callout-style-simple callout-tip no-icon">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-body-container">
<div id="exm-sample-dev" class="theorem example">
<p><span class="theorem-title"><strong>Explorable 7 (Explore the sample variance) </strong></span>&nbsp;</p>
</div>
<p>In <a href="#fig-sample-variance">Figure&nbsp;6</a> you can see the sample variance calculated for different samples</p>
<!-- OHQ CODE {{{ -->
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb40" data-startfrom="-1" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line -2;"><span id="cb40--1"><a href="#cb40--1" aria-hidden="true" tabindex="-1"></a>data_stream3_raw <span class="op">=</span> {</span>
<span id="cb40-0"><a href="#cb40-0" aria-hidden="true" tabindex="-1"></a>  replay_variance_2</span>
<span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a>  Promises<span class="op">.</span><span class="fu">delay</span>(<span class="dv">1500</span>)<span class="op">;</span></span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a>  <span class="kw">var</span> list <span class="op">=</span> []</span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a>  <span class="kw">var</span> i <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a>  <span class="cf">while</span> (i <span class="op">&lt;</span> <span class="dv">10000</span>) {</span>
<span id="cb40-5"><a href="#cb40-5" aria-hidden="true" tabindex="-1"></a>    <span class="kw">var</span> value <span class="op">=</span> { <span class="dt">x</span><span class="op">:</span> i<span class="op">,</span> <span class="dt">y</span><span class="op">:</span> raw_data<span class="op">.</span><span class="at">samp_var</span>[i] }<span class="op">;</span></span>
<span id="cb40-6"><a href="#cb40-6" aria-hidden="true" tabindex="-1"></a>    list<span class="op">.</span><span class="fu">push</span>(value)<span class="op">;</span></span>
<span id="cb40-7"><a href="#cb40-7" aria-hidden="true" tabindex="-1"></a>    i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb40-8"><a href="#cb40-8" aria-hidden="true" tabindex="-1"></a>    <span class="kw">yield</span> Promises<span class="op">.</span><span class="fu">delay</span>(<span class="dv">5</span><span class="op">,</span> list)<span class="op">;</span></span>
<span id="cb40-9"><a href="#cb40-9" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb40-10"><a href="#cb40-10" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-40" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb41" data-startfrom="-1" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line -2;"><span id="cb41--1"><a href="#cb41--1" aria-hidden="true" tabindex="-1"></a>data_stream3_ave <span class="op">=</span> {</span>
<span id="cb41-0"><a href="#cb41-0" aria-hidden="true" tabindex="-1"></a>  replay_variance_2</span>
<span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a>  Promises<span class="op">.</span><span class="fu">delay</span>(<span class="dv">1500</span>)<span class="op">;</span></span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a>  <span class="kw">var</span> list <span class="op">=</span> []</span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a>  <span class="kw">var</span> i <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true" tabindex="-1"></a>  <span class="cf">while</span> (i <span class="op">&lt;</span> <span class="dv">10000</span>) {</span>
<span id="cb41-5"><a href="#cb41-5" aria-hidden="true" tabindex="-1"></a>    <span class="kw">var</span> value <span class="op">=</span> { <span class="dt">x</span><span class="op">:</span> i<span class="op">,</span> <span class="dt">y</span><span class="op">:</span> raw_data_ave<span class="op">.</span><span class="at">r_samp_var</span>[i] }<span class="op">;</span></span>
<span id="cb41-6"><a href="#cb41-6" aria-hidden="true" tabindex="-1"></a>    list<span class="op">.</span><span class="fu">push</span>(value)<span class="op">;</span></span>
<span id="cb41-7"><a href="#cb41-7" aria-hidden="true" tabindex="-1"></a>    i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb41-8"><a href="#cb41-8" aria-hidden="true" tabindex="-1"></a>    <span class="kw">yield</span> Promises<span class="op">.</span><span class="fu">delay</span>(<span class="dv">5</span><span class="op">,</span> list)<span class="op">;</span></span>
<span id="cb41-9"><a href="#cb41-9" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb41-10"><a href="#cb41-10" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-41" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb42" data-startfrom="1" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a>Plot<span class="op">.</span><span class="fu">plot</span>({</span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a>    <span class="dt">height</span><span class="op">:</span> <span class="dv">200</span><span class="op">,</span></span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a>    <span class="dt">marginLeft</span><span class="op">:</span> <span class="dv">80</span><span class="op">,</span></span>
<span id="cb42-4"><a href="#cb42-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">marks</span><span class="op">:</span> [</span>
<span id="cb42-5"><a href="#cb42-5" aria-hidden="true" tabindex="-1"></a>      Plot<span class="op">.</span><span class="fu">dot</span>(data_stream3_raw<span class="op">,</span> {</span>
<span id="cb42-6"><a href="#cb42-6" aria-hidden="true" tabindex="-1"></a>        <span class="dt">x</span><span class="op">:</span> <span class="st">"x"</span><span class="op">,</span></span>
<span id="cb42-7"><a href="#cb42-7" aria-hidden="true" tabindex="-1"></a>        <span class="dt">y</span><span class="op">:</span> <span class="st">"y"</span><span class="op">,</span></span>
<span id="cb42-8"><a href="#cb42-8" aria-hidden="true" tabindex="-1"></a>        <span class="dt">clip</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb42-9"><a href="#cb42-9" aria-hidden="true" tabindex="-1"></a>        <span class="dt">r</span><span class="op">:</span> <span class="dv">4</span><span class="op">,</span></span>
<span id="cb42-10"><a href="#cb42-10" aria-hidden="true" tabindex="-1"></a>        <span class="dt">curve</span><span class="op">:</span> <span class="st">"linear"</span><span class="op">,</span></span>
<span id="cb42-11"><a href="#cb42-11" aria-hidden="true" tabindex="-1"></a>        <span class="dt">fill</span><span class="op">:</span> <span class="st">"black"</span><span class="op">,</span></span>
<span id="cb42-12"><a href="#cb42-12" aria-hidden="true" tabindex="-1"></a>        <span class="dt">strokeWidth</span><span class="op">:</span> <span class="dv">1</span><span class="op">,</span></span>
<span id="cb42-13"><a href="#cb42-13" aria-hidden="true" tabindex="-1"></a>        <span class="dt">stroke</span><span class="op">:</span> <span class="st">"black"</span><span class="op">,</span></span>
<span id="cb42-14"><a href="#cb42-14" aria-hidden="true" tabindex="-1"></a>        <span class="dt">marker</span><span class="op">:</span> <span class="st">"circle"</span></span>
<span id="cb42-15"><a href="#cb42-15" aria-hidden="true" tabindex="-1"></a>      })<span class="op">,</span></span>
<span id="cb42-16"><a href="#cb42-16" aria-hidden="true" tabindex="-1"></a>      Plot<span class="op">.</span><span class="fu">line</span>(data_stream3_raw<span class="op">,</span> {</span>
<span id="cb42-17"><a href="#cb42-17" aria-hidden="true" tabindex="-1"></a>        <span class="dt">x</span><span class="op">:</span> <span class="st">"x"</span><span class="op">,</span></span>
<span id="cb42-18"><a href="#cb42-18" aria-hidden="true" tabindex="-1"></a>        <span class="dt">y</span><span class="op">:</span> <span class="st">"y"</span><span class="op">,</span></span>
<span id="cb42-19"><a href="#cb42-19" aria-hidden="true" tabindex="-1"></a>        <span class="dt">clip</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb42-20"><a href="#cb42-20" aria-hidden="true" tabindex="-1"></a>        <span class="dt">r</span><span class="op">:</span> <span class="dv">4</span><span class="op">,</span></span>
<span id="cb42-21"><a href="#cb42-21" aria-hidden="true" tabindex="-1"></a>        <span class="dt">curve</span><span class="op">:</span> <span class="st">"linear"</span><span class="op">,</span></span>
<span id="cb42-22"><a href="#cb42-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-23"><a href="#cb42-23" aria-hidden="true" tabindex="-1"></a>        <span class="dt">strokeWidth</span><span class="op">:</span> <span class="dv">1</span></span>
<span id="cb42-24"><a href="#cb42-24" aria-hidden="true" tabindex="-1"></a>      })<span class="op">,</span></span>
<span id="cb42-25"><a href="#cb42-25" aria-hidden="true" tabindex="-1"></a>      Plot<span class="op">.</span><span class="fu">ruleY</span>([<span class="dv">225</span>]<span class="op">,</span> { <span class="dt">strokeOpacity</span><span class="op">:</span> <span class="fl">0.6</span><span class="op">,</span> <span class="dt">strokeWidth</span><span class="op">:</span> <span class="dv">1</span> })</span>
<span id="cb42-26"><a href="#cb42-26" aria-hidden="true" tabindex="-1"></a>    ]<span class="op">,</span></span>
<span id="cb42-27"><a href="#cb42-27" aria-hidden="true" tabindex="-1"></a>    <span class="dt">y</span><span class="op">:</span> { <span class="dt">label</span><span class="op">:</span> <span class="st">"Variance of sample"</span><span class="op">,</span> <span class="dt">domain</span><span class="op">:</span> [<span class="dv">50</span><span class="op">,</span> <span class="dv">400</span>] }<span class="op">,</span></span>
<span id="cb42-28"><a href="#cb42-28" aria-hidden="true" tabindex="-1"></a>    <span class="dt">x</span><span class="op">:</span> {</span>
<span id="cb42-29"><a href="#cb42-29" aria-hidden="true" tabindex="-1"></a>      <span class="dt">label</span><span class="op">:</span> <span class="st">"Sample number"</span><span class="op">,</span></span>
<span id="cb42-30"><a href="#cb42-30" aria-hidden="true" tabindex="-1"></a>      <span class="dt">domain</span><span class="op">:</span> [<span class="dv">0</span><span class="op">,</span> <span class="dv">100</span>]</span>
<span id="cb42-31"><a href="#cb42-31" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb42-32"><a href="#cb42-32" aria-hidden="true" tabindex="-1"></a>  })</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div id="fig-sample-variance" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<div id="ojs-cell-42" data-nodetype="expression">

</div>
<figcaption class="figure-caption">Figure&nbsp;6: Sample variance calculated for different samples</figcaption>
</figure>
</div>
</div>
<p>In figure <a href="#fig-sample-variance">Figure&nbsp;6</a> below we can see the running average of the sample variance.</p>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb43" data-startfrom="1" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a>Plot<span class="op">.</span><span class="fu">plot</span>({</span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">height</span><span class="op">:</span> <span class="dv">200</span><span class="op">,</span></span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">marginLeft</span><span class="op">:</span> <span class="dv">80</span><span class="op">,</span></span>
<span id="cb43-4"><a href="#cb43-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">marks</span><span class="op">:</span> [</span>
<span id="cb43-5"><a href="#cb43-5" aria-hidden="true" tabindex="-1"></a>    Plot<span class="op">.</span><span class="fu">line</span>(data_stream3_ave<span class="op">,</span> {</span>
<span id="cb43-6"><a href="#cb43-6" aria-hidden="true" tabindex="-1"></a>      <span class="dt">x</span><span class="op">:</span> <span class="st">"x"</span><span class="op">,</span></span>
<span id="cb43-7"><a href="#cb43-7" aria-hidden="true" tabindex="-1"></a>      <span class="dt">y</span><span class="op">:</span> <span class="st">"y"</span><span class="op">,</span></span>
<span id="cb43-8"><a href="#cb43-8" aria-hidden="true" tabindex="-1"></a>      <span class="dt">clip</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb43-9"><a href="#cb43-9" aria-hidden="true" tabindex="-1"></a>      <span class="dt">r</span><span class="op">:</span> <span class="dv">4</span><span class="op">,</span></span>
<span id="cb43-10"><a href="#cb43-10" aria-hidden="true" tabindex="-1"></a>      <span class="dt">curve</span><span class="op">:</span> <span class="st">"linear"</span><span class="op">,</span></span>
<span id="cb43-11"><a href="#cb43-11" aria-hidden="true" tabindex="-1"></a>      <span class="dt">strokeWidth</span><span class="op">:</span> <span class="dv">2</span></span>
<span id="cb43-12"><a href="#cb43-12" aria-hidden="true" tabindex="-1"></a>    })<span class="op">,</span></span>
<span id="cb43-13"><a href="#cb43-13" aria-hidden="true" tabindex="-1"></a>    Plot<span class="op">.</span><span class="fu">ruleY</span>([<span class="dv">225</span>]<span class="op">,</span> { <span class="dt">strokeOpacity</span><span class="op">:</span> <span class="fl">0.6</span><span class="op">,</span> <span class="dt">strokeWidth</span><span class="op">:</span> <span class="dv">1</span> })</span>
<span id="cb43-14"><a href="#cb43-14" aria-hidden="true" tabindex="-1"></a>  ]<span class="op">,</span></span>
<span id="cb43-15"><a href="#cb43-15" aria-hidden="true" tabindex="-1"></a>  <span class="dt">y</span><span class="op">:</span> { <span class="dt">label</span><span class="op">:</span> <span class="st">"Running mean"</span><span class="op">,</span> <span class="dt">domain</span><span class="op">:</span> [<span class="dv">200</span><span class="op">,</span> <span class="dv">250</span>] }<span class="op">,</span></span>
<span id="cb43-16"><a href="#cb43-16" aria-hidden="true" tabindex="-1"></a>  <span class="dt">x</span><span class="op">:</span> {</span>
<span id="cb43-17"><a href="#cb43-17" aria-hidden="true" tabindex="-1"></a>    <span class="dt">label</span><span class="op">:</span> <span class="st">"Sample number"</span><span class="op">,</span></span>
<span id="cb43-18"><a href="#cb43-18" aria-hidden="true" tabindex="-1"></a>    <span class="dt">domain</span><span class="op">:</span> [<span class="dv">0</span><span class="op">,</span> data_stream2_ave<span class="op">.</span><span class="at">length</span> <span class="op">+</span> <span class="dv">100</span>]</span>
<span id="cb43-19"><a href="#cb43-19" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb43-20"><a href="#cb43-20" aria-hidden="true" tabindex="-1"></a>})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div id="fig-sample-variance-running" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<div id="ojs-cell-43" data-nodetype="expression">

</div>
<figcaption class="figure-caption">Figure&nbsp;7: Running average of sample variance</figcaption>
</figure>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb44" data-startfrom="-1" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line -2;"><span id="cb44--1"><a href="#cb44--1" aria-hidden="true" tabindex="-1"></a>viewof replay_variance_3 <span class="op">=</span> Inputs<span class="op">.</span><span class="fu">button</span>(<span class="st">"Replay"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-44" data-nodetype="declaration">

</div>
</div>
</div>
<p>That’s right, unlike the example in <a href="#exm-pop-mean">Explorable&nbsp;6</a> the running average of the sample variance is equal to the variance of the population.</p>
<!-- }}} -->
</div>
</div>
</div>
<div class="callout callout-style-default callout-warning callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Warning
</div>
</div>
<div class="callout-body-container callout-body">
<p>The terminology <strong>sample variance</strong> and <strong>population variance</strong> can be very confusing. But the way to remember it is by thinking about what you have access to.</p>
<p>If you have access to the <strong>population characteristics</strong> then you can compute the <strong>population variance</strong>.</p>
<p>If you only have access to a <strong>sample</strong> then you must compute the <strong>sample variance</strong>.</p>
<p>The confusing part is that both these values, the <strong>population variance</strong> and the <strong>sample variance</strong> will <em>on average</em> be equal to the <strong>variance of the population</strong>. The <strong>population variance</strong> and the <strong>sample variance</strong> are values you calculate. The <strong>variance of the population</strong> is a feature of the population.</p>
</div>
</div>
<p>Because you’ll almost never have access to the features of the population, it’s always the <strong>sample variance</strong> that you’ll be calculating. In <code>R</code> the function for computing the variance is called <code>var()</code>, and this function will give you the <strong>sample variance</strong> (divided by N - 1).</p>
</section>
</section>
<section id="standard-deviation" class="level3">
<h3 class="anchored" data-anchor-id="standard-deviation">Standard deviation</h3>
<p>Variance is a good measure of dispersion and it’s widely used. However, there is one downside to variance, and that is that it can be difficult to interpret: it’s measured in <em>squared units</em>. For example, going back to our Salary example from Lecture 6, if salary is measured in USD, then the <strong>variance</strong> would be expressed in USD<sup>2</sup>, whatever that means!</p>
<p>Fortunately, the solution to this problem is easy: we simply take the square root of the variance. This measure is called the <strong>standard deviation</strong>. The standard deviation, denoted with <span class="math inline">\(s\)</span> or <span class="math inline">\(SD\)</span>.</p>
<p>Because the standard deviation is just the square root of the variance, you’ll often see the variance denoted as <span class="math inline">\(s^2\)</span> (for the sample variance) or <span class="math inline">\(\sigma^2\)</span> (for the population variance).</p>
<p>The <code>R</code> function for computing the standard deviation is called <code>sd()</code>, and this function will give you the square root of the <strong>sample variance</strong> (divided by N - 1).</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Why squared and not the absolute value
</div>
</div>
<div class="callout-body-container callout-body">
<p>To turn all the deviations into positive values we square these values. But you might be thinking, why do we square them and why don’t we just take the <strong>absolute value</strong> instead? The short answer to this question is that taking the <strong>mean of the absolute values</strong> doesn’t really give us the kind of measure we want. To see what I mean, take a look and the plot below. Try clicking on <strong>Preset 1</strong> and then <strong>Preset 2</strong>.</p>
<p>When you click <strong>Preset 1</strong> the data are more spread out than when you hit <strong>Preset 2</strong>. But the <strong>mean of the absolute values of the deviations</strong> is the same in both plots. That’s not really what we want. But notice what happens to the <strong>standard deviation</strong>, which is calculated from the <strong>squared deviations</strong>. The <strong>standard deviation</strong> changes between the two displays so that it is smaller when the points are less spread out and larger when the points are more spread.</p>
</div>
</div>
</section>
<section id="understanding-the-relationship-between-samples-and-populations" class="level2">
<h2 class="anchored" data-anchor-id="understanding-the-relationship-between-samples-and-populations">Understanding the relationship between samples and populations</h2>
<p>Now we have some tools for describing measurements, both in terms of where they are centered (the <strong>mean</strong>) and in terms of how spread out they are (the <strong>standard deviation</strong>). With these tools in hand, we can return to the problem we talked about last lecture. That is, the problem of knowing whether our sample resembles the population.</p>
<p>In the previous lecture, we saw that when we took samples from the population, sometimes the sample mean was higher than the population mean, and sometimes it was lower. But <em>on average</em> the sample mean was the same as the population mean.</p>
<p>In the previous lecture, I also said that we wouldn’t know whether a particular sample mean was higher, lower, close to, or far away from the population mean. We can’t know this, because we don’t know the value of the population mean. But one thing we can know, is how much, <em>on average</em>, the sample means will deviate from the population mean. To see what I mean by this, let’s say a look at the two plots in <a href="#fig-se">Figure&nbsp;8</a>. In <a href="#fig-se">Figure&nbsp;8</a>​a you can see the means of 10 different samples taken from the sample population. Sometimes the sample mean is higher than the population mean, sometimes it’s lower. But the thing I want you to notice is how spread out the values are. In <a href="#fig-se">Figure&nbsp;8</a>​b you can see the means of a different collection of 10 samples. Again, some are higher and some are lower. But notice the spread of the values. If we were to calculate the standard deviation for <a href="#fig-se">Figure&nbsp;8</a>​a, we would find that the sample means deviate from the population mean by an average of 6.78. And if we were to calculate the standard deviation for <a href="#fig-se">Figure&nbsp;8</a>​b, we would find that the sample means deviate from the population mean by an average of 11.88.</p>
<p>Now we’re not using the <strong>standard deviation</strong> to tell us about the spread of the values in our sample. Instead, we’re using the idea to tell us about the spread of our sample means. This <strong>standard deviation</strong>, the <strong>standard deviations of the sample means from the population mean</strong> has a special name. It is called the <strong>standard error of the mean</strong>.</p>
<!--
We'll learn about two factors that influence the size of the **standard error
of the mean**. The first factor has to do with features of our sample, and the
second will depend on a feature of the population. We'll cover that in the next
lecture, but if you think about it, you might be able to work out what they are
yourself.
-->
<!-- TODO: These can just be ggplots 
But they'll need some styling etc
-->
<div class="cell">
<div class="cell-output-display">
<div id="fig-se" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="index_files/figure-html/fig-se-1.png" class="img-fluid figure-img" width="672"></p>
<figcaption class="figure-caption">Figure&nbsp;8: (a) 10 samples with a standard deviation of 6.78 (b) 10 samples with a standard deviation of 11.88</figcaption>
</figure>
</div>
</div>
</div>
<p>The <strong>standard error of the mean</strong> will be an important concept. But to fully appreciate the idea we’ll first need to learn about the <strong>sampling distribution</strong>. And before we can get to the sampling distribution, we first need to understand the what distributions are, what they look like, and why they look the way they do.</p>
<!--
and we'll talk about it
again in upcoming lectures. But for now, I just want you to keep this idea---the idea
that individual sample means are spread out around the population mean---in the back 
of your mind.


TODO: Move to lecture 8?

Let's thing about what these standard deviation values tell us. They tell us,
that _on average_ the samples in @fig-plot-a more closely resemble the
population than the samples in @fig-plot-b. This seems like it could be useful
information. In fact, it is so useful that this measure has a special name. It
is called the **standard error of the mean** or more commonly just the
**standard error**. And there is a way for use to *estimate* it. We'll learn how
to estimate it in the next lecture, but for now I want to develop some
intuitions about what will influence it's value.

To figure out what will influence how spread out the sample means are around
the population mean, we'll do a simple thought experiment. In the thought
experiment, we'll think of two **extreme cases**.

First, consider the case where **every value in the population** is
**identical**. For example, imagine we're interested in the height of people in
the UK, but it just so happens that everyone in the UK is **exactly** 178cm
tall. If we were to take samples from this population, and work out the sample
mean, then all the sample means will be identical to the population mean. 

Or put more technically: If the standard deviation of the population is 0 (all the
values in the population are the same) then the standard error would also be 0.
But if the population standard deviation was some value other than 0 (all the
values in the population weren't exactly the same) then the standard error would
be some value other than 0.

In the second scenario, consider the case where we take samples that are so big
that they **include every member of the population**. That is, in our height
example, our **"sample"** would actually include all the people in the UK. If we
did this, then **by definition** our sample mean would be same as the population
mean. Collecting samples in this way would mean all the sample means would be
the same, and they would all be the same as the population mean.

Or put more technically: If the sample size is so big that it includes the
entire population then the standard error would be 0. If the sample size were
smaller than the entire population, then the standard error would be some value
other than 0.

Based on this reasoning, we can say that two things will influence whether your
_sample_ resembles your _population_. These are 1) the amount of **variation**
in our population, and 2) the **size** of our sample. We'll cover the formula
for the standard error in the next lecture, but from this little thought
experiment we can correctly assume that the formula will have to include at
least these two bits of information: An estimate of the standard deviation of
the population, which we can get from the **sample standard deviation**. And
some measure of the size of our sample, which we can get from just counting how
big our sample is.

-->
<!-- Dependencies {{{ -->
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb45" data-startfrom="-1" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line -2;"><span id="cb45--1"><a href="#cb45--1" aria-hidden="true" tabindex="-1"></a>mutable summary <span class="op">=</span> <span class="kw">null</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-45" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb46" data-startfrom="-1" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line -2;"><span id="cb46--1"><a href="#cb46--1" aria-hidden="true" tabindex="-1"></a>round2 <span class="op">=</span> (v) <span class="kw">=&gt;</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">round</span>(v <span class="op">*</span> <span class="dv">100</span>) <span class="op">/</span> <span class="dv">100</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-46" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb47" data-startfrom="-1" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line -2;"><span id="cb47--1"><a href="#cb47--1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> { <span class="kw">set</span> } <span class="im">from</span> <span class="st">"@observablehq/synchronized-inputs"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-47" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb48" data-startfrom="-1" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line -2;"><span id="cb48--1"><a href="#cb48--1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> { dist } <span class="im">from</span> <span class="st">"@ljcolling/wasm-distributions"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-48" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb49" data-startfrom="-1" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line -2;"><span id="cb49--1"><a href="#cb49--1" aria-hidden="true" tabindex="-1"></a>maketable <span class="op">=</span> (data) <span class="kw">=&gt;</span> {</span>
<span id="cb49-0"><a href="#cb49-0" aria-hidden="true" tabindex="-1"></a>  <span class="kw">let</span> headers <span class="op">=</span> <span class="bu">Object</span><span class="op">.</span><span class="fu">keys</span>(data[<span class="dv">0</span>])<span class="op">.</span><span class="fu">map</span>((v) <span class="kw">=&gt;</span> html<span class="op">.</span><span class="fu">fragment</span><span class="vs">`&lt;td&gt;</span><span class="sc">${</span>v<span class="sc">}</span><span class="vs">&lt;/th&gt;`</span>)<span class="op">;</span></span>
<span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a>  <span class="kw">let</span> body <span class="op">=</span> data<span class="op">.</span><span class="fu">map</span>((r) <span class="kw">=&gt;</span> {</span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> this_row <span class="op">=</span> <span class="bu">Object</span><span class="op">.</span><span class="fu">values</span>(r)<span class="op">.</span><span class="fu">map</span>((v) <span class="kw">=&gt;</span> html<span class="op">.</span><span class="fu">fragment</span><span class="vs">`&lt;td&gt;</span><span class="sc">${</span>v<span class="sc">}</span><span class="vs">&lt;/td&gt;`</span>)<span class="op">;</span></span>
<span id="cb49-3"><a href="#cb49-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> html<span class="op">.</span><span class="fu">fragment</span><span class="vs">`&lt;tr&gt;</span><span class="sc">${</span>this_row<span class="sc">}</span><span class="vs">&lt;/tr&gt;`</span><span class="op">;</span></span>
<span id="cb49-4"><a href="#cb49-4" aria-hidden="true" tabindex="-1"></a>  })<span class="op">;</span></span>
<span id="cb49-5"><a href="#cb49-5" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> htl<span class="op">.</span><span class="fu">html</span><span class="vs">`&lt;table class="table table-striped"&gt;&lt;thead class="thead-dark"&gt;&lt;tr&gt;</span><span class="sc">${</span>headers<span class="sc">}</span><span class="vs">&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;</span><span class="sc">${</span>body<span class="sc">}</span><span class="vs">&lt;/tbody&gt;&lt;/table&gt;`</span><span class="op">;</span></span>
<span id="cb49-6"><a href="#cb49-6" aria-hidden="true" tabindex="-1"></a>}<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-49" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb50" data-startfrom="-1" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line -2;"><span id="cb50--1"><a href="#cb50--1" aria-hidden="true" tabindex="-1"></a>html <span class="op">=</span> htl<span class="op">.</span><span class="at">html</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-50" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb51" data-startfrom="0" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line -1;"><span id="cb51-0"><a href="#cb51-0" aria-hidden="true" tabindex="-1"></a>measures <span class="op">=</span> [</span>
<span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a>  { <span class="dt">name</span><span class="op">:</span> <span class="st">"Range"</span><span class="op">,</span> <span class="dt">tag</span><span class="op">:</span> <span class="dv">0</span><span class="op">,</span> <span class="dt">fun</span><span class="op">:</span> drawrange }<span class="op">,</span></span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a>  { <span class="dt">name</span><span class="op">:</span> <span class="st">"Interquartile range"</span><span class="op">,</span> <span class="dt">tag</span><span class="op">:</span> <span class="dv">1</span><span class="op">,</span> <span class="dt">fun</span><span class="op">:</span> drawiqr }<span class="op">,</span></span>
<span id="cb51-3"><a href="#cb51-3" aria-hidden="true" tabindex="-1"></a>  { <span class="dt">name</span><span class="op">:</span> <span class="st">"None"</span><span class="op">,</span> <span class="dt">tag</span><span class="op">:</span> <span class="dv">2</span><span class="op">,</span> <span class="dt">fun</span><span class="op">:</span> () <span class="kw">=&gt;</span> {} }</span>
<span id="cb51-4"><a href="#cb51-4" aria-hidden="true" tabindex="-1"></a>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-51" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb52" data-startfrom="-1" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line -2;"><span id="cb52--1"><a href="#cb52--1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">data_mean_median</span>(data<span class="op">,</span> drawlines<span class="op">,</span> varname) {</span>
<span id="cb52-0"><a href="#cb52-0" aria-hidden="true" tabindex="-1"></a>  <span class="kw">let</span> height <span class="op">=</span> <span class="dv">200</span><span class="op">;</span></span>
<span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a>  <span class="kw">let</span> xAxisOffest <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a>  <span class="kw">let</span> radius <span class="op">=</span> <span class="dv">10</span><span class="op">;</span></span>
<span id="cb52-3"><a href="#cb52-3" aria-hidden="true" tabindex="-1"></a>  <span class="kw">var</span> this_summary <span class="op">=</span> {}<span class="op">;</span></span>
<span id="cb52-4"><a href="#cb52-4" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> pin <span class="op">=</span> (v) <span class="kw">=&gt;</span> {</span>
<span id="cb52-5"><a href="#cb52-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> v<span class="op">;</span></span>
<span id="cb52-6"><a href="#cb52-6" aria-hidden="true" tabindex="-1"></a>  }<span class="op">;</span></span>
<span id="cb52-7"><a href="#cb52-7" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> update <span class="op">=</span> () <span class="kw">=&gt;</span> {</span>
<span id="cb52-8"><a href="#cb52-8" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> data <span class="op">=</span> svg<span class="op">.</span><span class="fu">selectAll</span>(<span class="st">"circle"</span>)<span class="op">.</span><span class="fu">data</span>()<span class="op">;</span></span>
<span id="cb52-9"><a href="#cb52-9" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> mean <span class="op">=</span> d3<span class="op">.</span><span class="fu">mean</span>(data<span class="op">.</span><span class="fu">map</span>((v) <span class="kw">=&gt;</span> v<span class="op">.</span><span class="at">x</span>))<span class="op">;</span></span>
<span id="cb52-10"><a href="#cb52-10" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> median <span class="op">=</span> d3<span class="op">.</span><span class="fu">median</span>(data<span class="op">.</span><span class="fu">map</span>((v) <span class="kw">=&gt;</span> v<span class="op">.</span><span class="at">x</span>))<span class="op">;</span></span>
<span id="cb52-11"><a href="#cb52-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">drawlines</span>(marker<span class="op">,</span> data)<span class="op">;</span></span>
<span id="cb52-12"><a href="#cb52-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> data<span class="op">;</span></span>
<span id="cb52-13"><a href="#cb52-13" aria-hidden="true" tabindex="-1"></a>  }<span class="op">;</span></span>
<span id="cb52-14"><a href="#cb52-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-15"><a href="#cb52-15" aria-hidden="true" tabindex="-1"></a>  <span class="kw">function</span> <span class="fu">dragstarted</span>(<span class="bu">event</span><span class="op">,</span> d) {</span>
<span id="cb52-16"><a href="#cb52-16" aria-hidden="true" tabindex="-1"></a>    d3<span class="op">.</span><span class="fu">select</span>(<span class="kw">this</span>)<span class="op">.</span><span class="fu">attr</span>(<span class="st">"stroke"</span><span class="op">,</span> <span class="st">"green"</span>)<span class="op">.</span><span class="fu">attr</span>(<span class="st">"stroke-width"</span><span class="op">,</span> <span class="dv">5</span>)<span class="op">;</span></span>
<span id="cb52-17"><a href="#cb52-17" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb52-18"><a href="#cb52-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-19"><a href="#cb52-19" aria-hidden="true" tabindex="-1"></a>  <span class="kw">function</span> <span class="fu">dragged</span>(<span class="bu">event</span><span class="op">,</span> d) {</span>
<span id="cb52-20"><a href="#cb52-20" aria-hidden="true" tabindex="-1"></a>    d3<span class="op">.</span><span class="fu">select</span>(<span class="kw">this</span>)</span>
<span id="cb52-21"><a href="#cb52-21" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">raise</span>()</span>
<span id="cb52-22"><a href="#cb52-22" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"cx"</span><span class="op">,</span> d<span class="op">.</span><span class="at">x</span> <span class="op">=</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">round</span>(<span class="bu">event</span><span class="op">.</span><span class="at">x</span>))</span>
<span id="cb52-23"><a href="#cb52-23" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"cy"</span><span class="op">,</span> d<span class="op">.</span><span class="at">y</span> <span class="op">=</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">round</span>(<span class="bu">event</span><span class="op">.</span><span class="at">y</span>))<span class="op">;</span></span>
<span id="cb52-24"><a href="#cb52-24" aria-hidden="true" tabindex="-1"></a>    data <span class="op">=</span> <span class="fu">update</span>()<span class="op">;</span></span>
<span id="cb52-25"><a href="#cb52-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-26"><a href="#cb52-26" aria-hidden="true" tabindex="-1"></a>    <span class="kw">var</span> this_summary <span class="op">=</span> {}<span class="op">;</span></span>
<span id="cb52-27"><a href="#cb52-27" aria-hidden="true" tabindex="-1"></a>    this_summary[varname] <span class="op">=</span> {</span>
<span id="cb52-28"><a href="#cb52-28" aria-hidden="true" tabindex="-1"></a>      <span class="dt">mean</span><span class="op">:</span> d3<span class="op">.</span><span class="fu">mean</span>(data<span class="op">.</span><span class="fu">map</span>((v) <span class="kw">=&gt;</span> v<span class="op">.</span><span class="at">x</span>))<span class="op">,</span></span>
<span id="cb52-29"><a href="#cb52-29" aria-hidden="true" tabindex="-1"></a>      <span class="dt">median</span><span class="op">:</span> d3<span class="op">.</span><span class="fu">median</span>(data<span class="op">.</span><span class="fu">map</span>((v) <span class="kw">=&gt;</span> v<span class="op">.</span><span class="at">x</span>))<span class="op">,</span></span>
<span id="cb52-30"><a href="#cb52-30" aria-hidden="true" tabindex="-1"></a>      <span class="dt">data</span><span class="op">:</span> data<span class="op">.</span><span class="fu">map</span>((v) <span class="kw">=&gt;</span> v<span class="op">.</span><span class="at">x</span>)<span class="op">,</span></span>
<span id="cb52-31"><a href="#cb52-31" aria-hidden="true" tabindex="-1"></a>    }<span class="op">;</span></span>
<span id="cb52-32"><a href="#cb52-32" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summaryupdate</span>(this_summary)<span class="op">;</span></span>
<span id="cb52-33"><a href="#cb52-33" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb52-34"><a href="#cb52-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-35"><a href="#cb52-35" aria-hidden="true" tabindex="-1"></a>  <span class="kw">function</span> <span class="fu">dragended</span>(<span class="bu">event</span><span class="op">,</span> d) {</span>
<span id="cb52-36"><a href="#cb52-36" aria-hidden="true" tabindex="-1"></a>    d3<span class="op">.</span><span class="fu">select</span>(<span class="kw">this</span>)<span class="op">.</span><span class="fu">attr</span>(<span class="st">"stroke"</span><span class="op">,</span> <span class="kw">null</span>)<span class="op">;</span></span>
<span id="cb52-37"><a href="#cb52-37" aria-hidden="true" tabindex="-1"></a>    d3<span class="op">.</span><span class="fu">select</span>(<span class="kw">this</span>)<span class="op">.</span><span class="fu">attr</span>(<span class="st">"r"</span><span class="op">,</span> radius)<span class="op">;</span></span>
<span id="cb52-38"><a href="#cb52-38" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> data <span class="op">=</span> svg<span class="op">.</span><span class="fu">selectAll</span>(<span class="st">"circle"</span>)<span class="op">.</span><span class="fu">data</span>()<span class="op">;</span></span>
<span id="cb52-39"><a href="#cb52-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-40"><a href="#cb52-40" aria-hidden="true" tabindex="-1"></a>    <span class="kw">var</span> this_summary <span class="op">=</span> {}<span class="op">;</span></span>
<span id="cb52-41"><a href="#cb52-41" aria-hidden="true" tabindex="-1"></a>    this_summary[varname] <span class="op">=</span> {</span>
<span id="cb52-42"><a href="#cb52-42" aria-hidden="true" tabindex="-1"></a>      <span class="dt">mean</span><span class="op">:</span> d3<span class="op">.</span><span class="fu">mean</span>(data<span class="op">.</span><span class="fu">map</span>((v) <span class="kw">=&gt;</span> v<span class="op">.</span><span class="at">x</span>))<span class="op">,</span></span>
<span id="cb52-43"><a href="#cb52-43" aria-hidden="true" tabindex="-1"></a>      <span class="dt">median</span><span class="op">:</span> d3<span class="op">.</span><span class="fu">median</span>(data<span class="op">.</span><span class="fu">map</span>((v) <span class="kw">=&gt;</span> v<span class="op">.</span><span class="at">x</span>))<span class="op">,</span></span>
<span id="cb52-44"><a href="#cb52-44" aria-hidden="true" tabindex="-1"></a>      <span class="dt">data</span><span class="op">:</span> data<span class="op">.</span><span class="fu">map</span>((v) <span class="kw">=&gt;</span> v<span class="op">.</span><span class="at">x</span>)<span class="op">,</span></span>
<span id="cb52-45"><a href="#cb52-45" aria-hidden="true" tabindex="-1"></a>    }<span class="op">;</span></span>
<span id="cb52-46"><a href="#cb52-46" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summaryupdate</span>(this_summary)<span class="op">;</span></span>
<span id="cb52-47"><a href="#cb52-47" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb52-48"><a href="#cb52-48" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-49"><a href="#cb52-49" aria-hidden="true" tabindex="-1"></a>  this_summary[varname] <span class="op">=</span> {</span>
<span id="cb52-50"><a href="#cb52-50" aria-hidden="true" tabindex="-1"></a>    <span class="dt">mean</span><span class="op">:</span> d3<span class="op">.</span><span class="fu">mean</span>(data<span class="op">.</span><span class="fu">map</span>((v) <span class="kw">=&gt;</span> v<span class="op">.</span><span class="at">x</span>))<span class="op">,</span></span>
<span id="cb52-51"><a href="#cb52-51" aria-hidden="true" tabindex="-1"></a>    <span class="dt">median</span><span class="op">:</span> d3<span class="op">.</span><span class="fu">median</span>(data<span class="op">.</span><span class="fu">map</span>((v) <span class="kw">=&gt;</span> v<span class="op">.</span><span class="at">x</span>))<span class="op">,</span></span>
<span id="cb52-52"><a href="#cb52-52" aria-hidden="true" tabindex="-1"></a>    <span class="dt">data</span><span class="op">:</span> data<span class="op">.</span><span class="fu">map</span>((v) <span class="kw">=&gt;</span> v<span class="op">.</span><span class="at">x</span>)<span class="op">,</span></span>
<span id="cb52-53"><a href="#cb52-53" aria-hidden="true" tabindex="-1"></a>  }<span class="op">;</span></span>
<span id="cb52-54"><a href="#cb52-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-55"><a href="#cb52-55" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summaryupdate</span>(this_summary)<span class="op">;</span> </span>
<span id="cb52-56"><a href="#cb52-56" aria-hidden="true" tabindex="-1"></a>  <span class="kw">let</span> svg <span class="op">=</span> d3</span>
<span id="cb52-57"><a href="#cb52-57" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">create</span>(<span class="st">"svg"</span>)</span>
<span id="cb52-58"><a href="#cb52-58" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"viewBox"</span><span class="op">,</span> [<span class="dv">0</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> width<span class="op">,</span> height])</span>
<span id="cb52-59"><a href="#cb52-59" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"stroke-width"</span><span class="op">,</span> <span class="dv">2</span>)<span class="op">;</span></span>
<span id="cb52-60"><a href="#cb52-60" aria-hidden="true" tabindex="-1"></a>  <span class="kw">let</span> marker <span class="op">=</span> svg<span class="op">.</span><span class="fu">append</span>(<span class="st">"g"</span>)<span class="op">;</span></span>
<span id="cb52-61"><a href="#cb52-61" aria-hidden="true" tabindex="-1"></a>  <span class="kw">let</span> points <span class="op">=</span> svg<span class="op">.</span><span class="fu">append</span>(<span class="st">"g"</span>)<span class="op">;</span></span>
<span id="cb52-62"><a href="#cb52-62" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-63"><a href="#cb52-63" aria-hidden="true" tabindex="-1"></a>  points</span>
<span id="cb52-64"><a href="#cb52-64" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">selectAll</span>(<span class="st">"circle"</span>)</span>
<span id="cb52-65"><a href="#cb52-65" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">data</span>(data)</span>
<span id="cb52-66"><a href="#cb52-66" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">join</span>(<span class="st">"circle"</span>)</span>
<span id="cb52-67"><a href="#cb52-67" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"cx"</span><span class="op">,</span> (d) <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">x</span>)</span>
<span id="cb52-68"><a href="#cb52-68" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"cy"</span><span class="op">,</span> (d) <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">y</span>)</span>
<span id="cb52-69"><a href="#cb52-69" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"r"</span><span class="op">,</span> radius)</span>
<span id="cb52-70"><a href="#cb52-70" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">on</span>(<span class="st">"mouseover"</span><span class="op">,</span> <span class="kw">function</span> (d<span class="op">,</span> i) {</span>
<span id="cb52-71"><a href="#cb52-71" aria-hidden="true" tabindex="-1"></a>      d3<span class="op">.</span><span class="fu">select</span>(<span class="kw">this</span>)</span>
<span id="cb52-72"><a href="#cb52-72" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">transition</span>()</span>
<span id="cb52-73"><a href="#cb52-73" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">duration</span>(<span class="st">"50"</span>)</span>
<span id="cb52-74"><a href="#cb52-74" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">attr</span>(<span class="st">"opacity"</span><span class="op">,</span> <span class="st">".5"</span>)</span>
<span id="cb52-75"><a href="#cb52-75" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">attr</span>(<span class="st">"stroke"</span><span class="op">,</span> <span class="st">"blue"</span>)<span class="op">;</span></span>
<span id="cb52-76"><a href="#cb52-76" aria-hidden="true" tabindex="-1"></a>    })</span>
<span id="cb52-77"><a href="#cb52-77" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">on</span>(<span class="st">"mouseout"</span><span class="op">,</span> <span class="kw">function</span> (d<span class="op">,</span> i) {</span>
<span id="cb52-78"><a href="#cb52-78" aria-hidden="true" tabindex="-1"></a>      d3<span class="op">.</span><span class="fu">select</span>(<span class="kw">this</span>)</span>
<span id="cb52-79"><a href="#cb52-79" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">transition</span>()</span>
<span id="cb52-80"><a href="#cb52-80" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">duration</span>(<span class="st">"50"</span>)</span>
<span id="cb52-81"><a href="#cb52-81" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">attr</span>(<span class="st">"opacity"</span><span class="op">,</span> <span class="st">"1"</span>)</span>
<span id="cb52-82"><a href="#cb52-82" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">attr</span>(<span class="st">"stroke"</span><span class="op">,</span> <span class="st">"black"</span>)<span class="op">;</span></span>
<span id="cb52-83"><a href="#cb52-83" aria-hidden="true" tabindex="-1"></a>    })</span>
<span id="cb52-84"><a href="#cb52-84" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">call</span>(</span>
<span id="cb52-85"><a href="#cb52-85" aria-hidden="true" tabindex="-1"></a>      d3</span>
<span id="cb52-86"><a href="#cb52-86" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">drag</span>()</span>
<span id="cb52-87"><a href="#cb52-87" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">on</span>(<span class="st">"start"</span><span class="op">,</span> dragstarted)</span>
<span id="cb52-88"><a href="#cb52-88" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">on</span>(<span class="st">"drag"</span><span class="op">,</span> dragged)</span>
<span id="cb52-89"><a href="#cb52-89" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">on</span>(<span class="st">"end"</span><span class="op">,</span> dragended)<span class="op">,</span></span>
<span id="cb52-90"><a href="#cb52-90" aria-hidden="true" tabindex="-1"></a>    )<span class="op">;</span></span>
<span id="cb52-91"><a href="#cb52-91" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-92"><a href="#cb52-92" aria-hidden="true" tabindex="-1"></a>  marker<span class="op">.</span><span class="fu">selectAll</span>(<span class="st">"#labelline"</span>)<span class="op">.</span><span class="fu">remove</span>()<span class="op">;</span></span>
<span id="cb52-93"><a href="#cb52-93" aria-hidden="true" tabindex="-1"></a>  <span class="fu">drawlines</span>(marker<span class="op">,</span> data)<span class="op">;</span></span>
<span id="cb52-94"><a href="#cb52-94" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-95"><a href="#cb52-95" aria-hidden="true" tabindex="-1"></a>  <span class="kw">var</span> scale <span class="op">=</span> d3<span class="op">.</span><span class="fu">scaleLinear</span>()<span class="op">.</span><span class="fu">domain</span>([<span class="dv">0</span><span class="op">,</span> width])<span class="op">.</span><span class="fu">range</span>([<span class="dv">0</span><span class="op">,</span> width])<span class="op">;</span></span>
<span id="cb52-96"><a href="#cb52-96" aria-hidden="true" tabindex="-1"></a>  <span class="kw">var</span> x_axis <span class="op">=</span> d3<span class="op">.</span><span class="fu">axisBottom</span>()<span class="op">.</span><span class="fu">scale</span>(scale)<span class="op">;</span></span>
<span id="cb52-97"><a href="#cb52-97" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-98"><a href="#cb52-98" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> clicked <span class="op">=</span> (<span class="bu">event</span><span class="op">,</span> d) <span class="kw">=&gt;</span> {</span>
<span id="cb52-99"><a href="#cb52-99" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (<span class="bu">event</span><span class="op">.</span><span class="at">defaultPrevented</span>) <span class="cf">return</span><span class="op">;</span> </span>
<span id="cb52-100"><a href="#cb52-100" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> x <span class="op">=</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">round</span>(<span class="bu">event</span><span class="op">.</span><span class="at">offsetX</span>)<span class="op">;</span></span>
<span id="cb52-101"><a href="#cb52-101" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> y <span class="op">=</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">round</span>(<span class="bu">event</span><span class="op">.</span><span class="at">offsetY</span>)<span class="op">;</span></span>
<span id="cb52-102"><a href="#cb52-102" aria-hidden="true" tabindex="-1"></a>    data<span class="op">.</span><span class="fu">push</span>({ <span class="dt">x</span><span class="op">:</span> x<span class="op">,</span> <span class="dt">y</span><span class="op">:</span> y })<span class="op">;</span></span>
<span id="cb52-103"><a href="#cb52-103" aria-hidden="true" tabindex="-1"></a>    <span class="kw">var</span> this_summary <span class="op">=</span> {}<span class="op">;</span></span>
<span id="cb52-104"><a href="#cb52-104" aria-hidden="true" tabindex="-1"></a>    this_summary[varname] <span class="op">=</span> {</span>
<span id="cb52-105"><a href="#cb52-105" aria-hidden="true" tabindex="-1"></a>      <span class="dt">mean</span><span class="op">:</span> d3<span class="op">.</span><span class="fu">mean</span>(data<span class="op">.</span><span class="fu">map</span>((v) <span class="kw">=&gt;</span> v<span class="op">.</span><span class="at">x</span>))<span class="op">,</span></span>
<span id="cb52-106"><a href="#cb52-106" aria-hidden="true" tabindex="-1"></a>      <span class="dt">median</span><span class="op">:</span> d3<span class="op">.</span><span class="fu">median</span>(data<span class="op">.</span><span class="fu">map</span>((v) <span class="kw">=&gt;</span> v<span class="op">.</span><span class="at">x</span>))<span class="op">,</span></span>
<span id="cb52-107"><a href="#cb52-107" aria-hidden="true" tabindex="-1"></a>      <span class="dt">data</span><span class="op">:</span> data<span class="op">.</span><span class="fu">map</span>((v) <span class="kw">=&gt;</span> v<span class="op">.</span><span class="at">x</span>)<span class="op">,</span></span>
<span id="cb52-108"><a href="#cb52-108" aria-hidden="true" tabindex="-1"></a>    }<span class="op">;</span></span>
<span id="cb52-109"><a href="#cb52-109" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-110"><a href="#cb52-110" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summaryupdate</span>(this_summary)<span class="op">;</span> </span>
<span id="cb52-111"><a href="#cb52-111" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-112"><a href="#cb52-112" aria-hidden="true" tabindex="-1"></a>    svg</span>
<span id="cb52-113"><a href="#cb52-113" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">selectAll</span>(<span class="st">"circle"</span>)</span>
<span id="cb52-114"><a href="#cb52-114" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">data</span>(data)</span>
<span id="cb52-115"><a href="#cb52-115" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">join</span>(<span class="st">"circle"</span>)</span>
<span id="cb52-116"><a href="#cb52-116" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"cx"</span><span class="op">,</span> (d) <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">x</span>)</span>
<span id="cb52-117"><a href="#cb52-117" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"cy"</span><span class="op">,</span> (d) <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">y</span>)</span>
<span id="cb52-118"><a href="#cb52-118" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"r"</span><span class="op">,</span> radius)</span>
<span id="cb52-119"><a href="#cb52-119" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">on</span>(<span class="st">"mouseover"</span><span class="op">,</span> <span class="kw">function</span> (d<span class="op">,</span> i) {</span>
<span id="cb52-120"><a href="#cb52-120" aria-hidden="true" tabindex="-1"></a>        d3<span class="op">.</span><span class="fu">select</span>(<span class="kw">this</span>)</span>
<span id="cb52-121"><a href="#cb52-121" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">transition</span>()</span>
<span id="cb52-122"><a href="#cb52-122" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">duration</span>(<span class="st">"50"</span>)</span>
<span id="cb52-123"><a href="#cb52-123" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"opacity"</span><span class="op">,</span> <span class="st">".5"</span>)</span>
<span id="cb52-124"><a href="#cb52-124" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"stroke"</span><span class="op">,</span> <span class="st">"blue"</span>)<span class="op">;</span></span>
<span id="cb52-125"><a href="#cb52-125" aria-hidden="true" tabindex="-1"></a>      })</span>
<span id="cb52-126"><a href="#cb52-126" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">on</span>(<span class="st">"mouseout"</span><span class="op">,</span> <span class="kw">function</span> (d<span class="op">,</span> i) {</span>
<span id="cb52-127"><a href="#cb52-127" aria-hidden="true" tabindex="-1"></a>        d3<span class="op">.</span><span class="fu">select</span>(<span class="kw">this</span>)</span>
<span id="cb52-128"><a href="#cb52-128" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">transition</span>()</span>
<span id="cb52-129"><a href="#cb52-129" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">duration</span>(<span class="st">"50"</span>)</span>
<span id="cb52-130"><a href="#cb52-130" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"opacity"</span><span class="op">,</span> <span class="st">"1"</span>)</span>
<span id="cb52-131"><a href="#cb52-131" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"stroke"</span><span class="op">,</span> <span class="st">"black"</span>)<span class="op">;</span></span>
<span id="cb52-132"><a href="#cb52-132" aria-hidden="true" tabindex="-1"></a>      })</span>
<span id="cb52-133"><a href="#cb52-133" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">call</span>(</span>
<span id="cb52-134"><a href="#cb52-134" aria-hidden="true" tabindex="-1"></a>        d3</span>
<span id="cb52-135"><a href="#cb52-135" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">drag</span>()</span>
<span id="cb52-136"><a href="#cb52-136" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">on</span>(<span class="st">"start"</span><span class="op">,</span> dragstarted)</span>
<span id="cb52-137"><a href="#cb52-137" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">on</span>(<span class="st">"drag"</span><span class="op">,</span> dragged)</span>
<span id="cb52-138"><a href="#cb52-138" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">on</span>(<span class="st">"end"</span><span class="op">,</span> dragended)<span class="op">,</span></span>
<span id="cb52-139"><a href="#cb52-139" aria-hidden="true" tabindex="-1"></a>      )<span class="op">;</span></span>
<span id="cb52-140"><a href="#cb52-140" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-141"><a href="#cb52-141" aria-hidden="true" tabindex="-1"></a>    <span class="fu">update</span>()<span class="op">;</span></span>
<span id="cb52-142"><a href="#cb52-142" aria-hidden="true" tabindex="-1"></a>  }<span class="op">;</span></span>
<span id="cb52-143"><a href="#cb52-143" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-144"><a href="#cb52-144" aria-hidden="true" tabindex="-1"></a>  svg<span class="op">.</span><span class="fu">on</span>(<span class="st">"click"</span><span class="op">,</span> clicked)<span class="op">;</span></span>
<span id="cb52-145"><a href="#cb52-145" aria-hidden="true" tabindex="-1"></a>  svg</span>
<span id="cb52-146"><a href="#cb52-146" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">append</span>(<span class="st">"g"</span>)</span>
<span id="cb52-147"><a href="#cb52-147" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"transform"</span><span class="op">,</span> <span class="st">"translate("</span> <span class="op">+</span> xAxisOffest <span class="op">+</span> <span class="st">", "</span> <span class="op">+</span> height <span class="op">*</span> <span class="fl">0.9</span> <span class="op">+</span> <span class="st">")"</span>)</span>
<span id="cb52-148"><a href="#cb52-148" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">call</span>(x_axis)<span class="op">;</span></span>
<span id="cb52-149"><a href="#cb52-149" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-150"><a href="#cb52-150" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> svg<span class="op">.</span><span class="fu">node</span>()<span class="op">;</span></span>
<span id="cb52-151"><a href="#cb52-151" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-52" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb53" data-startfrom="-1" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line -2;"><span id="cb53--1"><a href="#cb53--1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">summaryupdate</span>(this_summary) {</span>
<span id="cb53-0"><a href="#cb53-0" aria-hidden="true" tabindex="-1"></a>    mutable summary <span class="op">=</span> <span class="bu">Object</span><span class="op">.</span><span class="fu">assign</span>({}<span class="op">,</span> mutable summary<span class="op">,</span> this_summary)<span class="op">;</span></span>
<span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-53" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb54" data-startfrom="-1" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line -2;"><span id="cb54--1"><a href="#cb54--1" aria-hidden="true" tabindex="-1"></a>drawlines <span class="op">=</span> {</span>
<span id="cb54-0"><a href="#cb54-0" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> (marker<span class="op">,</span> data) <span class="kw">=&gt;</span> {</span>
<span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> height <span class="op">=</span> <span class="dv">200</span><span class="op">;</span></span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a>    marker<span class="op">.</span><span class="fu">selectAll</span>(<span class="st">"#labelline"</span>)<span class="op">.</span><span class="fu">remove</span>()<span class="op">;</span></span>
<span id="cb54-3"><a href="#cb54-3" aria-hidden="true" tabindex="-1"></a>    <span class="co">// draw the mean line</span></span>
<span id="cb54-4"><a href="#cb54-4" aria-hidden="true" tabindex="-1"></a>    <span class="co">/*</span></span>
<span id="cb54-5"><a href="#cb54-5" aria-hidden="true" tabindex="-1"></a><span class="co">    svg</span></span>
<span id="cb54-6"><a href="#cb54-6" aria-hidden="true" tabindex="-1"></a><span class="co">      .append("line")</span></span>
<span id="cb54-7"><a href="#cb54-7" aria-hidden="true" tabindex="-1"></a><span class="co">      .attr("id", "labelline")</span></span>
<span id="cb54-8"><a href="#cb54-8" aria-hidden="true" tabindex="-1"></a><span class="co">      .attr("x1", d3.mean(data.map((v) =&gt; v.x)) || -10)</span></span>
<span id="cb54-9"><a href="#cb54-9" aria-hidden="true" tabindex="-1"></a><span class="co">      .attr("x2", d3.mean(data.map((v) =&gt; v.x)) || -10)</span></span>
<span id="cb54-10"><a href="#cb54-10" aria-hidden="true" tabindex="-1"></a><span class="co">      .attr("y1", 0)</span></span>
<span id="cb54-11"><a href="#cb54-11" aria-hidden="true" tabindex="-1"></a><span class="co">      .attr("y2", height * 0.9)</span></span>
<span id="cb54-12"><a href="#cb54-12" aria-hidden="true" tabindex="-1"></a><span class="co">      .attr("stroke", "red")</span></span>
<span id="cb54-13"><a href="#cb54-13" aria-hidden="true" tabindex="-1"></a><span class="co">      .attr("stroke-width", 5);</span></span>
<span id="cb54-14"><a href="#cb54-14" aria-hidden="true" tabindex="-1"></a><span class="co">*/</span></span>
<span id="cb54-15"><a href="#cb54-15" aria-hidden="true" tabindex="-1"></a>    <span class="co">// draw the deviation lines</span></span>
<span id="cb54-16"><a href="#cb54-16" aria-hidden="true" tabindex="-1"></a>    marker</span>
<span id="cb54-17"><a href="#cb54-17" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">selectAll</span>(<span class="st">"line"</span>)</span>
<span id="cb54-18"><a href="#cb54-18" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">data</span>(data)</span>
<span id="cb54-19"><a href="#cb54-19" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">join</span>(<span class="st">"line"</span>)</span>
<span id="cb54-20"><a href="#cb54-20" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"id"</span><span class="op">,</span> <span class="st">"labelline"</span>)</span>
<span id="cb54-21"><a href="#cb54-21" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"x1"</span><span class="op">,</span> (d) <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">x</span>)</span>
<span id="cb54-22"><a href="#cb54-22" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"x2"</span><span class="op">,</span> d3<span class="op">.</span><span class="fu">mean</span>(data<span class="op">.</span><span class="fu">map</span>((v) <span class="kw">=&gt;</span> v<span class="op">.</span><span class="at">x</span>)) <span class="op">||</span> <span class="op">-</span><span class="dv">10</span>)</span>
<span id="cb54-23"><a href="#cb54-23" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"y1"</span><span class="op">,</span> (d) <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">y</span>)</span>
<span id="cb54-24"><a href="#cb54-24" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"y2"</span><span class="op">,</span> (d) <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">y</span>)</span>
<span id="cb54-25"><a href="#cb54-25" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"stroke"</span><span class="op">,</span> <span class="st">"red"</span>)</span>
<span id="cb54-26"><a href="#cb54-26" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">style</span>(<span class="st">"stroke-dasharray"</span><span class="op">,</span> <span class="st">"3, 3"</span>)</span>
<span id="cb54-27"><a href="#cb54-27" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"stroke-width"</span><span class="op">,</span> <span class="dv">2</span>)<span class="op">;</span></span>
<span id="cb54-28"><a href="#cb54-28" aria-hidden="true" tabindex="-1"></a>    marker</span>
<span id="cb54-29"><a href="#cb54-29" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">append</span>(<span class="st">"line"</span>)</span>
<span id="cb54-30"><a href="#cb54-30" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"id"</span><span class="op">,</span> <span class="st">"labelline"</span>)</span>
<span id="cb54-31"><a href="#cb54-31" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"x1"</span><span class="op">,</span> d3<span class="op">.</span><span class="fu">mean</span>(data<span class="op">.</span><span class="fu">map</span>((v) <span class="kw">=&gt;</span> v<span class="op">.</span><span class="at">x</span>)) <span class="op">||</span> <span class="op">-</span><span class="dv">10</span>)</span>
<span id="cb54-32"><a href="#cb54-32" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"x2"</span><span class="op">,</span> d3<span class="op">.</span><span class="fu">mean</span>(data<span class="op">.</span><span class="fu">map</span>((v) <span class="kw">=&gt;</span> v<span class="op">.</span><span class="at">x</span>)) <span class="op">||</span> <span class="op">-</span><span class="dv">10</span>)</span>
<span id="cb54-33"><a href="#cb54-33" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"y1"</span><span class="op">,</span> <span class="dv">0</span>)</span>
<span id="cb54-34"><a href="#cb54-34" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"y2"</span><span class="op">,</span> height <span class="op">*</span> <span class="fl">0.9</span>)</span>
<span id="cb54-35"><a href="#cb54-35" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"stroke"</span><span class="op">,</span> <span class="st">"red"</span>)</span>
<span id="cb54-36"><a href="#cb54-36" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"stroke-width"</span><span class="op">,</span> <span class="dv">5</span>)<span class="op">;</span></span>
<span id="cb54-37"><a href="#cb54-37" aria-hidden="true" tabindex="-1"></a>  }<span class="op">;</span></span>
<span id="cb54-38"><a href="#cb54-38" aria-hidden="true" tabindex="-1"></a>  <span class="co">//end of drawlines</span></span>
<span id="cb54-39"><a href="#cb54-39" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-54" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb55" data-startfrom="-1" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line -2;"><span id="cb55--1"><a href="#cb55--1" aria-hidden="true" tabindex="-1"></a>drawrange <span class="op">=</span> {</span>
<span id="cb55-0"><a href="#cb55-0" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> (marker<span class="op">,</span> data) <span class="kw">=&gt;</span> {</span>
<span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> height <span class="op">=</span> <span class="dv">200</span><span class="op">;</span></span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"></a>    marker<span class="op">.</span><span class="fu">selectAll</span>(<span class="st">"#labelline"</span>)<span class="op">.</span><span class="fu">remove</span>()<span class="op">;</span></span>
<span id="cb55-3"><a href="#cb55-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-4"><a href="#cb55-4" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> max <span class="op">=</span> d3<span class="op">.</span><span class="fu">max</span>(data<span class="op">.</span><span class="fu">map</span>((v) <span class="kw">=&gt;</span> v<span class="op">.</span><span class="at">x</span>)) <span class="op">||</span> <span class="op">-</span><span class="dv">10</span><span class="op">;</span></span>
<span id="cb55-5"><a href="#cb55-5" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> min <span class="op">=</span> d3<span class="op">.</span><span class="fu">min</span>(data<span class="op">.</span><span class="fu">map</span>((v) <span class="kw">=&gt;</span> v<span class="op">.</span><span class="at">x</span>)) <span class="op">||</span> <span class="op">-</span><span class="dv">10</span><span class="op">;</span></span>
<span id="cb55-6"><a href="#cb55-6" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> width <span class="op">=</span> max <span class="op">-</span> min <span class="op">||</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb55-7"><a href="#cb55-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-8"><a href="#cb55-8" aria-hidden="true" tabindex="-1"></a>    marker</span>
<span id="cb55-9"><a href="#cb55-9" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">append</span>(<span class="st">"line"</span>)</span>
<span id="cb55-10"><a href="#cb55-10" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"id"</span><span class="op">,</span> <span class="st">"labelline"</span>)</span>
<span id="cb55-11"><a href="#cb55-11" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"x1"</span><span class="op">,</span> min)</span>
<span id="cb55-12"><a href="#cb55-12" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"x2"</span><span class="op">,</span> min)</span>
<span id="cb55-13"><a href="#cb55-13" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"y1"</span><span class="op">,</span> <span class="dv">0</span>)</span>
<span id="cb55-14"><a href="#cb55-14" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"y2"</span><span class="op">,</span> height <span class="op">*</span> <span class="fl">0.9</span>)</span>
<span id="cb55-15"><a href="#cb55-15" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"stroke"</span><span class="op">,</span> <span class="st">"red"</span>)</span>
<span id="cb55-16"><a href="#cb55-16" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"stroke-width"</span><span class="op">,</span> <span class="dv">5</span>)<span class="op">;</span></span>
<span id="cb55-17"><a href="#cb55-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-18"><a href="#cb55-18" aria-hidden="true" tabindex="-1"></a>    marker</span>
<span id="cb55-19"><a href="#cb55-19" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">append</span>(<span class="st">"line"</span>)</span>
<span id="cb55-20"><a href="#cb55-20" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"id"</span><span class="op">,</span> <span class="st">"labelline"</span>)</span>
<span id="cb55-21"><a href="#cb55-21" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"x1"</span><span class="op">,</span> max)</span>
<span id="cb55-22"><a href="#cb55-22" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"x2"</span><span class="op">,</span> max)</span>
<span id="cb55-23"><a href="#cb55-23" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"y1"</span><span class="op">,</span> <span class="dv">0</span>)</span>
<span id="cb55-24"><a href="#cb55-24" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"y2"</span><span class="op">,</span> height <span class="op">*</span> <span class="fl">0.9</span>)</span>
<span id="cb55-25"><a href="#cb55-25" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"stroke"</span><span class="op">,</span> <span class="st">"red"</span>)</span>
<span id="cb55-26"><a href="#cb55-26" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"stroke-width"</span><span class="op">,</span> <span class="dv">5</span>)<span class="op">;</span></span>
<span id="cb55-27"><a href="#cb55-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-28"><a href="#cb55-28" aria-hidden="true" tabindex="-1"></a>    marker</span>
<span id="cb55-29"><a href="#cb55-29" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">append</span>(<span class="st">"rect"</span>)</span>
<span id="cb55-30"><a href="#cb55-30" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"id"</span><span class="op">,</span> <span class="st">"labelline"</span>)</span>
<span id="cb55-31"><a href="#cb55-31" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"x"</span><span class="op">,</span> d3<span class="op">.</span><span class="fu">min</span>(data<span class="op">.</span><span class="fu">map</span>((v) <span class="kw">=&gt;</span> v<span class="op">.</span><span class="at">x</span>)))</span>
<span id="cb55-32"><a href="#cb55-32" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"y"</span><span class="op">,</span> <span class="dv">0</span>)</span>
<span id="cb55-33"><a href="#cb55-33" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"width"</span><span class="op">,</span> width)</span>
<span id="cb55-34"><a href="#cb55-34" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"height"</span><span class="op">,</span> height <span class="op">*</span> <span class="fl">0.9</span>)</span>
<span id="cb55-35"><a href="#cb55-35" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"stroke"</span><span class="op">,</span> <span class="st">"red"</span>)</span>
<span id="cb55-36"><a href="#cb55-36" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"fill"</span><span class="op">,</span> <span class="st">"red"</span>)</span>
<span id="cb55-37"><a href="#cb55-37" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"stroke-width"</span><span class="op">,</span> <span class="dv">5</span>)</span>
<span id="cb55-38"><a href="#cb55-38" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"opacity"</span><span class="op">,</span> <span class="fl">0.5</span>)<span class="op">;</span></span>
<span id="cb55-39"><a href="#cb55-39" aria-hidden="true" tabindex="-1"></a>  }<span class="op">;</span></span>
<span id="cb55-40"><a href="#cb55-40" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-55" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb56" data-startfrom="-1" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line -2;"><span id="cb56--1"><a href="#cb56--1" aria-hidden="true" tabindex="-1"></a>calc_iqr_limits <span class="op">=</span> (d) <span class="kw">=&gt;</span> {</span>
<span id="cb56-0"><a href="#cb56-0" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> data <span class="op">=</span> d<span class="op">.</span><span class="fu">map</span>((v) <span class="kw">=&gt;</span> v<span class="op">.</span><span class="at">x</span>)<span class="op">;</span></span>
<span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> quantiles <span class="op">=</span> [<span class="dv">0</span><span class="op">,</span> <span class="fl">0.25</span><span class="op">,</span> <span class="fl">0.5</span><span class="op">,</span> <span class="fl">0.75</span><span class="op">,</span> <span class="dv">1</span>]<span class="op">.</span><span class="fu">map</span>((q) <span class="kw">=&gt;</span> d3<span class="op">.</span><span class="fu">quantile</span>(data<span class="op">,</span> q))<span class="op">;</span></span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> widths <span class="op">=</span> quantiles<span class="op">.</span><span class="fu">slice</span>(<span class="dv">0</span><span class="op">,</span> <span class="op">-</span><span class="dv">1</span>)<span class="op">.</span><span class="fu">map</span>((v<span class="op">,</span> i) <span class="kw">=&gt;</span> {</span>
<span id="cb56-3"><a href="#cb56-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> quantiles[i <span class="op">+</span> <span class="dv">1</span>] <span class="op">-</span> v<span class="op">;</span></span>
<span id="cb56-4"><a href="#cb56-4" aria-hidden="true" tabindex="-1"></a>  })<span class="op">;</span></span>
<span id="cb56-5"><a href="#cb56-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-6"><a href="#cb56-6" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> marks <span class="op">=</span> <span class="kw">new</span> <span class="bu">Map</span>()<span class="op">;</span></span>
<span id="cb56-7"><a href="#cb56-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-8"><a href="#cb56-8" aria-hidden="true" tabindex="-1"></a>  widths<span class="op">.</span><span class="fu">map</span>((v<span class="op">,</span> i) <span class="kw">=&gt;</span> {</span>
<span id="cb56-9"><a href="#cb56-9" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> start <span class="op">=</span> quantiles[i]<span class="op">;</span></span>
<span id="cb56-10"><a href="#cb56-10" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> width <span class="op">=</span> v<span class="op">;</span></span>
<span id="cb56-11"><a href="#cb56-11" aria-hidden="true" tabindex="-1"></a>    marks<span class="op">.</span><span class="fu">set</span>(<span class="st">"q"</span> <span class="op">+</span> (i <span class="op">+</span> <span class="dv">1</span>) <span class="op">+</span> <span class="st">"_s"</span><span class="op">,</span> start)<span class="op">;</span></span>
<span id="cb56-12"><a href="#cb56-12" aria-hidden="true" tabindex="-1"></a>    marks<span class="op">.</span><span class="fu">set</span>(<span class="st">"q"</span> <span class="op">+</span> (i <span class="op">+</span> <span class="dv">1</span>) <span class="op">+</span> <span class="st">"_w"</span><span class="op">,</span> width)<span class="op">;</span></span>
<span id="cb56-13"><a href="#cb56-13" aria-hidden="true" tabindex="-1"></a>  })<span class="op">;</span></span>
<span id="cb56-14"><a href="#cb56-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-15"><a href="#cb56-15" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> marks<span class="op">;</span></span>
<span id="cb56-16"><a href="#cb56-16" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-56" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb57" data-startfrom="-1" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line -2;"><span id="cb57--1"><a href="#cb57--1" aria-hidden="true" tabindex="-1"></a>drawiqr <span class="op">=</span> {</span>
<span id="cb57-0"><a href="#cb57-0" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> (marker<span class="op">,</span> data) <span class="kw">=&gt;</span> {</span>
<span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> height <span class="op">=</span> <span class="dv">200</span><span class="op">;</span></span>
<span id="cb57-2"><a href="#cb57-2" aria-hidden="true" tabindex="-1"></a>    marker<span class="op">.</span><span class="fu">selectAll</span>(<span class="st">"#labelline"</span>)<span class="op">.</span><span class="fu">remove</span>()<span class="op">;</span></span>
<span id="cb57-3"><a href="#cb57-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-4"><a href="#cb57-4" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> max <span class="op">=</span> d3<span class="op">.</span><span class="fu">max</span>(data<span class="op">.</span><span class="fu">map</span>((v) <span class="kw">=&gt;</span> v<span class="op">.</span><span class="at">x</span>)) <span class="op">||</span> <span class="op">-</span><span class="dv">10</span><span class="op">;</span></span>
<span id="cb57-5"><a href="#cb57-5" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> min <span class="op">=</span> d3<span class="op">.</span><span class="fu">min</span>(data<span class="op">.</span><span class="fu">map</span>((v) <span class="kw">=&gt;</span> v<span class="op">.</span><span class="at">x</span>)) <span class="op">||</span> <span class="op">-</span><span class="dv">10</span><span class="op">;</span></span>
<span id="cb57-6"><a href="#cb57-6" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> width <span class="op">=</span> max <span class="op">-</span> min <span class="op">||</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb57-7"><a href="#cb57-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-8"><a href="#cb57-8" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> quantiles <span class="op">=</span> <span class="fu">calc_iqr_limits</span>(data)<span class="op">;</span></span>
<span id="cb57-9"><a href="#cb57-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-10"><a href="#cb57-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> (<span class="kw">let</span> i <span class="op">=</span> <span class="dv">1</span><span class="op">;</span> i <span class="op">&lt;</span> <span class="dv">5</span><span class="op">;</span> i<span class="op">++</span>) {</span>
<span id="cb57-11"><a href="#cb57-11" aria-hidden="true" tabindex="-1"></a>      <span class="kw">const</span> start <span class="op">=</span> quantiles<span class="op">.</span><span class="fu">get</span>(<span class="st">"q"</span> <span class="op">+</span> i <span class="op">+</span> <span class="st">"_s"</span>)<span class="op">;</span></span>
<span id="cb57-12"><a href="#cb57-12" aria-hidden="true" tabindex="-1"></a>      <span class="kw">const</span> width <span class="op">=</span> quantiles<span class="op">.</span><span class="fu">get</span>(<span class="st">"q"</span> <span class="op">+</span> i <span class="op">+</span> <span class="st">"_w"</span>)<span class="op">;</span></span>
<span id="cb57-13"><a href="#cb57-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-14"><a href="#cb57-14" aria-hidden="true" tabindex="-1"></a>      marker</span>
<span id="cb57-15"><a href="#cb57-15" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">append</span>(<span class="st">"rect"</span>)</span>
<span id="cb57-16"><a href="#cb57-16" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">attr</span>(<span class="st">"id"</span><span class="op">,</span> <span class="st">"labelline"</span>)</span>
<span id="cb57-17"><a href="#cb57-17" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">attr</span>(<span class="st">"x"</span><span class="op">,</span> start)</span>
<span id="cb57-18"><a href="#cb57-18" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">attr</span>(<span class="st">"y"</span><span class="op">,</span> <span class="dv">0</span>)</span>
<span id="cb57-19"><a href="#cb57-19" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">attr</span>(<span class="st">"width"</span><span class="op">,</span> width)</span>
<span id="cb57-20"><a href="#cb57-20" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">attr</span>(<span class="st">"height"</span><span class="op">,</span> height <span class="op">*</span> <span class="fl">0.9</span>)</span>
<span id="cb57-21"><a href="#cb57-21" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">attr</span>(<span class="st">"fill"</span><span class="op">,</span> i <span class="op">===</span> <span class="dv">2</span> <span class="op">||</span> i <span class="op">===</span> <span class="dv">3</span> <span class="op">?</span> <span class="st">"red"</span> <span class="op">:</span> <span class="st">"blue"</span>)</span>
<span id="cb57-22"><a href="#cb57-22" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">attr</span>(<span class="st">"stroke-width"</span><span class="op">,</span> <span class="dv">0</span>)</span>
<span id="cb57-23"><a href="#cb57-23" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">attr</span>(<span class="st">"opacity"</span><span class="op">,</span> <span class="fl">0.5</span>)<span class="op">;</span></span>
<span id="cb57-24"><a href="#cb57-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-25"><a href="#cb57-25" aria-hidden="true" tabindex="-1"></a>      marker</span>
<span id="cb57-26"><a href="#cb57-26" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">append</span>(<span class="st">"line"</span>)</span>
<span id="cb57-27"><a href="#cb57-27" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">attr</span>(<span class="st">"id"</span><span class="op">,</span> <span class="st">"labelline"</span>)</span>
<span id="cb57-28"><a href="#cb57-28" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">attr</span>(<span class="st">"x1"</span><span class="op">,</span> start)</span>
<span id="cb57-29"><a href="#cb57-29" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">attr</span>(<span class="st">"x2"</span><span class="op">,</span> start)</span>
<span id="cb57-30"><a href="#cb57-30" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">attr</span>(<span class="st">"y1"</span><span class="op">,</span> <span class="dv">0</span>)</span>
<span id="cb57-31"><a href="#cb57-31" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">attr</span>(<span class="st">"y2"</span><span class="op">,</span> height <span class="op">*</span> <span class="fl">0.9</span>)</span>
<span id="cb57-32"><a href="#cb57-32" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">attr</span>(<span class="st">"stroke"</span><span class="op">,</span> i <span class="op">===</span> <span class="dv">1</span> <span class="op">?</span> <span class="st">"blue"</span> <span class="op">:</span> <span class="st">"red"</span>)</span>
<span id="cb57-33"><a href="#cb57-33" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">attr</span>(<span class="st">"stroke-width"</span><span class="op">,</span> <span class="dv">2</span>)<span class="op">;</span></span>
<span id="cb57-34"><a href="#cb57-34" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb57-35"><a href="#cb57-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-36"><a href="#cb57-36" aria-hidden="true" tabindex="-1"></a>    marker</span>
<span id="cb57-37"><a href="#cb57-37" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">append</span>(<span class="st">"line"</span>)</span>
<span id="cb57-38"><a href="#cb57-38" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"id"</span><span class="op">,</span> <span class="st">"labelline"</span>)</span>
<span id="cb57-39"><a href="#cb57-39" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"x1"</span><span class="op">,</span> max <span class="op">||</span> <span class="op">-</span><span class="dv">10</span>)</span>
<span id="cb57-40"><a href="#cb57-40" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"x2"</span><span class="op">,</span> max <span class="op">||</span> <span class="op">-</span><span class="dv">10</span>)</span>
<span id="cb57-41"><a href="#cb57-41" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"y1"</span><span class="op">,</span> <span class="dv">0</span>)</span>
<span id="cb57-42"><a href="#cb57-42" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"y2"</span><span class="op">,</span> height <span class="op">*</span> <span class="fl">0.9</span>)</span>
<span id="cb57-43"><a href="#cb57-43" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"stroke"</span><span class="op">,</span> <span class="st">"blue"</span>)</span>
<span id="cb57-44"><a href="#cb57-44" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"stroke-width"</span><span class="op">,</span> <span class="dv">2</span>)<span class="op">;</span></span>
<span id="cb57-45"><a href="#cb57-45" aria-hidden="true" tabindex="-1"></a>  }<span class="op">;</span></span>
<span id="cb57-46"><a href="#cb57-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-47"><a href="#cb57-47" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-57" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb58" data-startfrom="-1" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line -2;"><span id="cb58--1"><a href="#cb58--1" aria-hidden="true" tabindex="-1"></a>raw_data <span class="op">=</span> {</span>
<span id="cb58-0"><a href="#cb58-0" aria-hidden="true" tabindex="-1"></a>  replay_variance_1</span>
<span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a>  replay_variance_2</span>
<span id="cb58-2"><a href="#cb58-2" aria-hidden="true" tabindex="-1"></a>  replay_variance_3</span>
<span id="cb58-3"><a href="#cb58-3" aria-hidden="true" tabindex="-1"></a>  <span class="kw">let</span> sample_size <span class="op">=</span> <span class="dv">50</span><span class="op">;</span></span>
<span id="cb58-4"><a href="#cb58-4" aria-hidden="true" tabindex="-1"></a>  <span class="kw">let</span> population_mean <span class="op">=</span> <span class="dv">100</span><span class="op">;</span></span>
<span id="cb58-5"><a href="#cb58-5" aria-hidden="true" tabindex="-1"></a>  <span class="kw">let</span> sd <span class="op">=</span> <span class="dv">15</span><span class="op">;</span></span>
<span id="cb58-6"><a href="#cb58-6" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> dist<span class="op">.</span><span class="fu">rand_normal</span>(population_mean<span class="op">,</span> sd<span class="op">,</span> sample_size<span class="op">,</span> <span class="dv">100</span>)<span class="op">;</span></span>
<span id="cb58-7"><a href="#cb58-7" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-58" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb59" data-startfrom="-1" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line -2;"><span id="cb59--1"><a href="#cb59--1" aria-hidden="true" tabindex="-1"></a>raw_data_ave <span class="op">=</span> {</span>
<span id="cb59-0"><a href="#cb59-0" aria-hidden="true" tabindex="-1"></a>  replay_variance_1</span>
<span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a>  replay_variance_2</span>
<span id="cb59-2"><a href="#cb59-2" aria-hidden="true" tabindex="-1"></a>  replay_variance_3</span>
<span id="cb59-3"><a href="#cb59-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-4"><a href="#cb59-4" aria-hidden="true" tabindex="-1"></a>  <span class="kw">let</span> sample_size <span class="op">=</span> <span class="dv">50</span><span class="op">;</span></span>
<span id="cb59-5"><a href="#cb59-5" aria-hidden="true" tabindex="-1"></a>  <span class="kw">let</span> population_mean <span class="op">=</span> <span class="dv">100</span><span class="op">;</span></span>
<span id="cb59-6"><a href="#cb59-6" aria-hidden="true" tabindex="-1"></a>  <span class="kw">let</span> sd <span class="op">=</span> <span class="dv">15</span><span class="op">;</span></span>
<span id="cb59-7"><a href="#cb59-7" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> dist<span class="op">.</span><span class="fu">rand_normal</span>(population_mean<span class="op">,</span> sd<span class="op">,</span> sample_size<span class="op">,</span> <span class="dv">10000</span>)<span class="op">;</span></span>
<span id="cb59-8"><a href="#cb59-8" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-59" data-nodetype="declaration">

</div>
</div>
</div>
<!-- }}} -->
</section>
<section id="check-your-understanding" class="level2">
<h2 class="anchored" data-anchor-id="check-your-understanding">Check your understanding</h2>
<p>Use this quiz to make sure that you’ve understood the key concepts.</p>
<div class="cell">
<div class="cell-output-display">
<div id="htmlwidget-9eceb20dc2a931752ae4" style="width:672px;height:100%;" class="quiz html-widget "></div>
<script type="application/json" data-for="htmlwidget-9eceb20dc2a931752ae4">{"x":[{"question":"Here is a set of numbers: <\/br> 34, 5, 42, -18, 4, 5, 7, 4<br />What is the median of these numbers?","answers":[["9.75","0.5"]],"type":"fillin"},{"question":"What is the range of the same set of numbers?","answers":[["60","0.5"]],"type":"fillin"},{"question":"What is the variance of the same set of numbers?","answers":[["359.125","0.5"]],"type":"fillin"},{"question":"If the variance of a set of numbers is 225 then what is the standard deviation?","answers":[["15","0.5"]],"type":"fillin"},{"question":"You’re told the following information:<\/br>For a set of numbers the minimum value is 34 <\/br>The maximum value is 85 <\/br>The median value is 46 <\/br>The IQR is 2<\/br><\/br>The middle 50% of the numbers lie between which two values?<\/br>Give the lower limit:","answers":[["45","0.5"]],"type":"fillin"},{"question":"Give the upper limit:","answers":[["46","0.5"]],"type":"fillin"}],"evals":[],"jsHooks":[]}</script>
</div>
</div>


</section>

</main> <!-- /main -->

<script type="ojs-module-contents">
{"contents":[{"methodName":"interpret","cellName":"ojs-cell-1","inline":false,"source":"data_mean_median(rangeplot, measures[0].fun, \"rangeplot\")\n"},{"methodName":"interpret","cellName":"ojs-cell-2","inline":false,"source":"mutable rangeplot = []\n"},{"methodName":"interpret","cellName":"ojs-cell-3","inline":false,"source":"Inputs.button(\"Preset 1\", {\n  reduce: (d) => {\n  mutable rangeplot = [\n      { x: 14, y: 87 },\n      { x: 462, y: 93 },\n      { x: 161, y: 95 },\n      { x: 289, y: 82 },\n      { x: 224, y: 87 },\n      { x: 268, y: 54 },\n      { x: 178, y: 62 },\n      { x: 52, y: 104 },\n      { x: 352, y: 92 },\n      { x: 271, y: 122 },\n      { x: 177, y: 138 },\n      { x: 125, y: 97 },\n      { x: 412, y: 91 }\n    ]\n  }\n})\n\n\nInputs.button(\"Preset 2\", {\n  reduce: (d) => {\n  mutable rangeplot = [\n  { x: 14, y: 87 },\n  { x: 462, y: 93 },\n  { x: 161, y: 95 },\n  { x: 289, y: 117 },\n  { x: 224, y: 87 },\n  { x: 230, y: 35 },\n  { x: 224, y: 62 },\n  { x: 154, y: 44 },\n  { x: 290, y: 77 },\n  { x: 226, y: 115 },\n  { x: 228, y: 142 },\n  { x: 156, y: 72 },\n  { x: 294, y: 46 }\n    ]\n  }\n})\n\n\n\nInputs.button(\"Clear\", {\n  reduce: (d) => {\n    mutable summary = Object.assign({}, mutable summary, { rangeplot: [] });\n    mutable rangeplot = []\n  }\n})\n"},{"methodName":"interpret","cellName":"ojs-cell-4","inline":false,"source":"md`The range of this data is: ${(d3.max(summary.rangeplot.data) - d3.min(summary.rangeplot.data)) || htl.html`<font color=\"red\">no data</font>`}`\n"},{"methodName":"interpret","cellName":"ojs-cell-5","inline":false,"source":"data_mean_median(iqrplot, measures[1].fun, \"iqrplot\")\n"},{"methodName":"interpret","cellName":"ojs-cell-6","inline":false,"source":"mutable iqrplot = []\n"},{"methodName":"interpret","cellName":"ojs-cell-7","inline":false,"source":" Inputs.button(\"Preset 1\", {\n  reduce: (d) =>\n      mutable iqrplot = [\n        { x: 94, y: 42 },\n        { x: 311, y: 51 },\n        { x: 534, y: 26 },\n        { x: 292, y: 104 },\n        { x: 258, y: 48 },\n        { x: 249, y: 113 },\n        { x: 273, y: 84 },\n        { x: 330, y: 78 }\n      ]\n    \n})\n\nInputs.button(\"Preset 2\", {\n  reduce: (d) =>\n      (mutable iqrplot = [\n        { x: 94, y: 42 },\n        { x: 416, y: 114 },\n        { x: 534, y: 26 },\n        { x: 362, y: 111 },\n        { x: 183, y: 107 },\n        { x: 247, y: 107 },\n        { x: 296, y: 110 },\n        { x: 476, y: 121 }\n      ])\n    \n})\n\nInputs.button(\"Preset 3\", {\n  reduce: (d) =>\n      (mutable iqrplot = [\n        { x: 40, y: 33 },\n        { x: 413, y: 40 },\n        { x: 223, y: 102 },\n        { x: 262, y: 91 },\n        { x: 179, y: 129 }\n      ])\n})\n\n\nInputs.button(\"Preset 4\", {\n  reduce: (d) =>\n      (mutable iqrplot = [\n        { x: 150, y: 41 },\n        { x: 282, y: 30 },\n        { x: 223, y: 102 },\n        { x: 262, y: 91 },\n        { x: 179, y: 129 }\n      ])\n})\n\n"},{"methodName":"interpret","cellName":"ojs-cell-8","inline":false,"source":"Inputs.button(\"Clear\", {\n  reduce: (d) => {\n    mutable summary = Object.assign({}, mutable summary, { iqrplot: [] });\n    mutable iqrplot = [];\n  }\n})\n"},{"methodName":"interpret","cellName":"ojs-cell-9","inline":false,"source":"md`The interquartile range (IQR) of this data is: ${(d3.quantile(summary.iqrplot.data, 0.75) - d3.quantile(summary.iqrplot.data, 0.25)) || htl.html`<font color=\"red\">no data</font>`}`\n"},{"methodName":"interpret","cellName":"ojs-cell-10","inline":false,"source":"data_mean_median(bothplot, measures[1].fun, \"bothplot\")\n"},{"methodName":"interpret","cellName":"ojs-cell-11","inline":false,"source":"mutable bothplot = []\n"},{"methodName":"interpret","cellName":"ojs-cell-12","inline":false,"source":"Inputs.button(\"Preset 1\", {\n  reduce: (d) =>\n      (mutable bothplot = \n[\n  { x: 14, y: 87 },\n  { x: 462, y: 93 },\n  { x: 161, y: 95 },\n  { x: 289, y: 117 },\n  { x: 224, y: 87 },\n  { x: 230, y: 35 },\n  { x: 224, y: 62 },\n  { x: 154, y: 44 },\n  { x: 290, y: 77 },\n  { x: 226, y: 115 },\n  { x: 228, y: 142 },\n  { x: 156, y: 72 },\n  { x: 294, y: 46 }\n])\n\n})\n\n\nInputs.button(\"Preset 2\", {\n  reduce: (d) =>\n      (mutable bothplot = \n      [\n        { x: 14, y: 87 },\n        { x: 462, y: 93 },\n        { x: 161, y: 95 },\n        { x: 289, y: 82 },\n        { x: 224, y: 87 },\n        { x: 268, y: 54 },\n        { x: 178, y: 62 },\n        { x: 52, y: 104 },\n        { x: 352, y: 92 },\n        { x: 271, y: 122 },\n        { x: 177, y: 138 },\n        { x: 125, y: 97 },\n        { x: 412, y: 91 }\n      ])\n})\n\n\nInputs.button(\"Clear\", {\n  reduce: (d) => {\n    mutable summary = Object.assign({}, mutable summary, { bothplot: [] });\n    mutable bothplot = [];\n  }\n})\n"},{"methodName":"interpret","cellName":"ojs-cell-13","inline":false,"source":"md`We can compute the statistics for this set of ${\n  summary.bothplot.data.length\n} data points:  \nRange = ${\nsummary.bothplot.data.length != 0\n    ? round2(d3.quantile(summary.bothplot.data, 1) - d3.quantile(summary.bothplot.data, 0))\n    : htl.html`<font color=\"red\">no data</font>`\n}   \nIQR = ${\nsummary.bothplot.data.length != 0\n    ? round2(d3.quantile(summary.bothplot.data, 0.75) - d3.quantile(summary.bothplot.data, 0.25))\n    : htl.html`<font color=\"red\">no data</font>`\n}\n\n`\n"},{"methodName":"interpret","cellName":"ojs-cell-14","inline":false,"source":"viewof show_both_table = Inputs.toggle({ label: \"Show data table\" })\n"},{"methodName":"interpret","cellName":"ojs-cell-15","inline":false,"source":"{\n  let d = summary.bothplot.data;\n  d.sort(function(a, b){return a - b});\n  let isempty = summary.bothplot.data.length === 0;\n  let data = isempty ? [{ \"Point #\": null, \"Value\": null }] : d.map((v, i) => {\n    return {\n      \"Point #\": i + 1,\n      Value: v,\n    };\n  });\n\n  return show_both_table ? maketable(data) : htl.html`<p></p>`;\n}\n"},{"methodName":"interpret","cellName":"ojs-cell-16","inline":false,"source":"data_mean_median(deviations, drawlines, \"deviations\")\n"},{"methodName":"interpret","cellName":"ojs-cell-17","inline":false,"source":"mutable deviations = []\n"},{"methodName":"interpret","cellName":"ojs-cell-18","inline":false,"source":"Inputs.button(\"Preset 1\", {\n  reduce: (d) => {\n   \n    mutable deviations = [\n    { x: 90, y: 50 },\n    { x: 90, y: 120 },\n    { x: 230, y: 50 },\n    { x: 230, y: 120 }\n  ];\n  }\n})\n\nInputs.button(\"Preset 2\", {\n  reduce: (d) => {\n    mutable deviations = [\n    { x: 40, y: 120 },\n    { x: 140, y: 50 },\n    { x: 180, y: 50 },\n    { x: 280, y: 120 }\n  ];\n  }\n})\n\nInputs.button(\"Clear\", {\n  reduce: (d) => {\n    mutable summary = Object.assign({}, mutable summary, { devations: [] });\n    mutable deviations = []\n  }\n})\n"},{"methodName":"interpret","cellName":"ojs-cell-19","inline":false,"source":"deviations_opts = [\n  {name: \"Devaitions\", tag: \"dev\"},\n  {name: \"Squared devaitions\", tag: \"sqdev\"},\n  {name: \"Absolute devaitions\", tag: \"absdev\"},\n]\n"},{"methodName":"interpret","cellName":"ojs-cell-20","inline":false,"source":"\nmutable opts =  \n{\n  let devops = deviations_opts.map((x) => x.name).map((x, i) => {\n      let obj = {}\n      obj[deviations_opts[i].tag] =  deviations_show.map((y) => y.name).includes(x)\n      return obj\n\n    }\n    )\n  let opts = {}\n  let keys = devops.map((v) => Object.keys(v))\n  let values = devops.map((v) => Object.values(v))\n  keys.forEach((v,i) => opts[v] = values[i][0])\n  return opts\n}\n\n"},{"methodName":"interpret","cellName":"ojs-cell-21","inline":false,"source":"viewof show_deviation_table = Inputs.toggle({ label: \"Show data table\" })\n"},{"methodName":"interpret","cellName":"ojs-cell-22","inline":false,"source":"viewof deviations_show = Inputs.checkbox(deviations_opts, {label: \"\", format: x => x.name})\n \n"},{"methodName":"interpret","cellName":"ojs-cell-23","inline":false,"source":"deviationtable(mutable opts, show_deviation_table)\n"},{"methodName":"interpret","cellName":"ojs-cell-24","inline":false,"source":"deviationtable = (opts, show_deviation_table) => { \n  if(show_deviation_table == false) {\n      return htl.html`<p></p>`\n    }\n  let d = summary.deviations.data\n  if(d.length == 0) {\n    d = [null]\n  }\n\n  d.sort(function(a, b){return a - b});\n  let data = d.map((v, i) => {\n\n    if(v === null) {\n      i = null \n    } else {\n      i = i + 1\n    }\n    let row = {\"Point #\": i}\n    let values = {\"Value\": v}\n    row = Object.assign({}, row, values);\n    let mean = {\"Mean\": round2(d3.mean(d)) || null}\n    row = Object.assign({}, row, mean);\n\n    let dev = round2(d3.mean(d) - v) || null\n    let absdev = round2(Math.abs(dev)) || null\n    let sqdev = round2(dev ** 2) || null\n\n    if(opts.dev == true) {\n      let deviations = {\"Deviation\": dev}\n      row = Object.assign({}, row, deviations)\n    }\n\n    if(opts.absdev) {\n      let deviations = {\"Absolute deviation\": absdev}\n      row = Object.assign({}, row, deviations)\n    }\n\n    if(opts.sqdev) {\n      let deviations = {\"Squared deviation\": sqdev}\n      row = Object.assign({}, row, deviations)\n    }\n\n    return row \n  })\n  \nreturn maketable(data)\n}\n"},{"methodName":"interpret","cellName":"ojs-cell-25","inline":false,"source":"deviations_summary(mutable opts)\n"},{"methodName":"interpret","cellName":"ojs-cell-26","inline":false,"source":"deviations_summary = (opts) =>{\n\n\n  let warning = `<font color=\"red\">add data</font>`\n  let d = summary.deviations.data\n  let mean = d3.mean(d)\n  let abs_mean = round2(d3.mean(d.map((x) => Math.abs(x - mean)))) || warning\n  let sq_mean = round2(d3.mean(d.map((x) => (x - mean) ** 2))) || warning\n\n  let abs_sum = round2(d3.sum(d.map((x) => Math.abs(x - mean)))) || warning\n  let sq_sum = round2(d3.sum(d.map((x) => (x - mean) ** 2))) || warning\n\n  let summarytext = ``\n  if(opts.dev){\n    summarytext = summarytext + `**Deviations** Sum = ${d3.sum(d) || 0}; Mean =  0\\n\\n`\n  }\n\n  if(opts.sqdev){\n    summarytext = summarytext  +`**Squared deviations** Sum =  ${sq_sum}; Mean = ${sq_mean}\\n\\n`\n  }\n  \n  if(opts.absdev){\n    summarytext = summarytext  +`**Absolute deviations** Sum = ${abs_sum}; Mean = ${abs_mean}\\n\\n`\n  }\n\n\n  return md`${summarytext}`\n}\n"},{"methodName":"interpret","cellName":"ojs-cell-27","inline":false,"source":"sq_devs = summary.deviations.data.map((v) => (v - summary.deviations.mean) ** 2)\nsq_devs_sum = d3.sum(sq_devs)\nsq_devs_mean = d3.mean(sq_devs)\n"},{"methodName":"interpret","cellName":"ojs-cell-28","inline":false,"source":"md`Now when we add up all the squared deviations we won't get zero. Now they add up \nto ${Math.round(sq_devs_sum * 100) / 100 || \"<font color='red'>warning: add some data!</font>\"}.\nBut now we have another problem. As you add more data above, the sum of the squared\ndeviations will get bigger and bigger. `\n"},{"methodName":"interpret","cellName":"ojs-cell-29","inline":false,"source":"md`If we now work out the **mean** of the squared deviations, rather than the \n**sum** of the squared deviations we get: ${Math.round(sq_devs_mean * 100) / 100 || \"<font color='red'>warning: add some data!</font>\"}. `\n"},{"methodName":"interpret","cellName":"ojs-cell-30","inline":false,"source":"data_stream1_raw = {\n  replay_variance_1\n  Promises.delay(1500);\n  var list = []\n  var i = 1\n  while (i < 10000) {\n    var value = { x: i, y: raw_data.samp_var2[i] };\n    list.push(value);\n    i = i + 1;\n    yield Promises.delay(5, list);\n  }\n}\n"},{"methodName":"interpret","cellName":"ojs-cell-31","inline":false,"source":"data_stream1_ave = {\n  replay_variance_1\n  Promises.delay(1500);\n  var list = []\n  var i = 1\n  while (i < 10000) {\n    var value = { x: i, y: raw_data_ave.r_samp_var2[i] };\n    list.push(value);\n    i = i + 1;\n    yield Promises.delay(5, list);\n  }\n}\n"},{"methodName":"interpret","cellName":"ojs-cell-32","inline":false,"source":"Plot.plot({\n    height: 200,\n    marginLeft: 80,\n    marks: [\n      Plot.dot(data_stream1_raw, {\n        x: \"x\",\n        y: \"y\",\n        clip: true,\n        r: 4,\n        curve: \"linear\",\n        fill: \"black\",\n        strokeWidth: 1,\n        stroke: \"black\",\n        marker: \"circle\"\n      }),\n      Plot.line(data_stream1_raw, {\n        x: \"x\",\n        y: \"y\",\n        clip: true,\n        r: 4,\n        curve: \"linear\",\n\n        strokeWidth: 1\n      }),\n      Plot.ruleY([225], { strokeOpacity: 0.6, strokeWidth: 1 })\n    ],\n    y: { label: \"Variance of sample\", domain: [50, 400] },\n    x: {\n      label: \"Sample number\",\n      domain: [0, 100]\n    }\n  })\n"},{"methodName":"interpret","cellName":"ojs-cell-33","inline":false,"source":"Plot.plot({\n  height: 200,\n  marginLeft: 80,\n  marks: [\n    Plot.line(data_stream1_ave, {\n      x: \"x\",\n      y: \"y\",\n      clip: true,\n      r: 4,\n      curve: \"linear\",\n      strokeWidth: 2\n    }),\n    Plot.ruleY([225], { strokeOpacity: 0.6, strokeWidth: 1 })\n  ],\n  y: { label: \"Running mean\", domain: [200, 250] },\n  x: {\n    label: \"Sample number\",\n    domain: [0, data_stream1_ave.length + 100]\n  }\n})\n"},{"methodName":"interpret","cellName":"ojs-cell-34","inline":false,"source":"viewof replay_variance_1 = Inputs.button(\"Replay\")\n"},{"methodName":"interpret","cellName":"ojs-cell-35","inline":false,"source":"data_stream2_raw = {\n  replay_variance_2\n  Promises.delay(1500);\n  var list = []\n  var i = 1\n  while (i < 10000) {\n    var value = { x: i, y: raw_data.pop_var[i] };\n    list.push(value);\n    i = i + 1;\n    yield Promises.delay(5, list);\n  }\n}\n"},{"methodName":"interpret","cellName":"ojs-cell-36","inline":false,"source":"data_stream2_ave = {\n  replay_variance_2\n  Promises.delay(1500);\n  var list = []\n  var i = 1\n  while (i < 10000) {\n    var value = { x: i, y: raw_data_ave.r_pop_var[i] };\n    list.push(value);\n    i = i + 1;\n    yield Promises.delay(5, list);\n  }\n}\n"},{"methodName":"interpret","cellName":"ojs-cell-37","inline":false,"source":"Plot.plot({\n    height: 200,\n    marginLeft: 80,\n    marks: [\n      Plot.dot(data_stream2_raw, {\n        x: \"x\",\n        y: \"y\",\n        clip: true,\n        r: 4,\n        curve: \"linear\",\n        fill: \"black\",\n        strokeWidth: 1,\n        stroke: \"black\",\n        marker: \"circle\"\n      }),\n      Plot.line(data_stream2_raw, {\n        x: \"x\",\n        y: \"y\",\n        clip: true,\n        r: 4,\n        curve: \"linear\",\n\n        strokeWidth: 1\n      }),\n      Plot.ruleY([225], { strokeOpacity: 0.6, strokeWidth: 1 })\n    ],\n    y: { label: \"Variance of sample\", domain: [50, 400] },\n    x: {\n      label: \"Sample number\",\n      domain: [0, 100]\n    }\n  })\n"},{"methodName":"interpret","cellName":"ojs-cell-38","inline":false,"source":"Plot.plot({\n  height: 200,\n  marginLeft: 80,\n  marks: [\n    Plot.line(data_stream2_ave, {\n      x: \"x\",\n      y: \"y\",\n      clip: true,\n      r: 4,\n      curve: \"linear\",\n      strokeWidth: 2\n    }),\n    Plot.ruleY([225], { strokeOpacity: 0.6, strokeWidth: 1 })\n  ],\n  y: { label: \"Running mean\", domain: [200, 250] },\n  x: {\n    label: \"Sample number\",\n    domain: [0, data_stream2_ave.length + 100]\n  }\n})\n"},{"methodName":"interpret","cellName":"ojs-cell-39","inline":false,"source":"viewof replay_variance_2 = Inputs.button(\"Replay\")\n"},{"methodName":"interpret","cellName":"ojs-cell-40","inline":false,"source":"data_stream3_raw = {\n  replay_variance_2\n  Promises.delay(1500);\n  var list = []\n  var i = 1\n  while (i < 10000) {\n    var value = { x: i, y: raw_data.samp_var[i] };\n    list.push(value);\n    i = i + 1;\n    yield Promises.delay(5, list);\n  }\n}\n"},{"methodName":"interpret","cellName":"ojs-cell-41","inline":false,"source":"data_stream3_ave = {\n  replay_variance_2\n  Promises.delay(1500);\n  var list = []\n  var i = 1\n  while (i < 10000) {\n    var value = { x: i, y: raw_data_ave.r_samp_var[i] };\n    list.push(value);\n    i = i + 1;\n    yield Promises.delay(5, list);\n  }\n}\n"},{"methodName":"interpret","cellName":"ojs-cell-42","inline":false,"source":"Plot.plot({\n    height: 200,\n    marginLeft: 80,\n    marks: [\n      Plot.dot(data_stream3_raw, {\n        x: \"x\",\n        y: \"y\",\n        clip: true,\n        r: 4,\n        curve: \"linear\",\n        fill: \"black\",\n        strokeWidth: 1,\n        stroke: \"black\",\n        marker: \"circle\"\n      }),\n      Plot.line(data_stream3_raw, {\n        x: \"x\",\n        y: \"y\",\n        clip: true,\n        r: 4,\n        curve: \"linear\",\n\n        strokeWidth: 1\n      }),\n      Plot.ruleY([225], { strokeOpacity: 0.6, strokeWidth: 1 })\n    ],\n    y: { label: \"Variance of sample\", domain: [50, 400] },\n    x: {\n      label: \"Sample number\",\n      domain: [0, 100]\n    }\n  })\n"},{"methodName":"interpret","cellName":"ojs-cell-43","inline":false,"source":"Plot.plot({\n  height: 200,\n  marginLeft: 80,\n  marks: [\n    Plot.line(data_stream3_ave, {\n      x: \"x\",\n      y: \"y\",\n      clip: true,\n      r: 4,\n      curve: \"linear\",\n      strokeWidth: 2\n    }),\n    Plot.ruleY([225], { strokeOpacity: 0.6, strokeWidth: 1 })\n  ],\n  y: { label: \"Running mean\", domain: [200, 250] },\n  x: {\n    label: \"Sample number\",\n    domain: [0, data_stream2_ave.length + 100]\n  }\n})\n"},{"methodName":"interpret","cellName":"ojs-cell-44","inline":false,"source":"viewof replay_variance_3 = Inputs.button(\"Replay\")\n"},{"methodName":"interpret","cellName":"ojs-cell-45","inline":false,"source":"mutable summary = null\n"},{"methodName":"interpret","cellName":"ojs-cell-46","inline":false,"source":"round2 = (v) => Math.round(v * 100) / 100\n"},{"methodName":"interpret","cellName":"ojs-cell-47","inline":false,"source":"import { set } from \"@observablehq/synchronized-inputs\"\n"},{"methodName":"interpret","cellName":"ojs-cell-48","inline":false,"source":"import { dist } from \"@ljcolling/wasm-distributions\"\n"},{"methodName":"interpret","cellName":"ojs-cell-49","inline":false,"source":"maketable = (data) => {\n  let headers = Object.keys(data[0]).map((v) => html.fragment`<td>${v}</th>`);\n  let body = data.map((r) => {\n    let this_row = Object.values(r).map((v) => html.fragment`<td>${v}</td>`);\n    return html.fragment`<tr>${this_row}</tr>`;\n  });\n  return htl.html`<table class=\"table table-striped\"><thead class=\"thead-dark\"><tr>${headers}</tr></thead><tbody>${body}</tbody></table>`;\n};\n"},{"methodName":"interpret","cellName":"ojs-cell-50","inline":false,"source":"html = htl.html\n"},{"methodName":"interpret","cellName":"ojs-cell-51","inline":false,"source":"measures = [\n  { name: \"Range\", tag: 0, fun: drawrange },\n  { name: \"Interquartile range\", tag: 1, fun: drawiqr },\n  { name: \"None\", tag: 2, fun: () => {} }\n]\n"},{"methodName":"interpret","cellName":"ojs-cell-52","inline":false,"source":"function data_mean_median(data, drawlines, varname) {\n  let height = 200;\n  let xAxisOffest = 0;\n  let radius = 10;\n  var this_summary = {};\n  const pin = (v) => {\n    return v;\n  };\n  const update = () => {\n    let data = svg.selectAll(\"circle\").data();\n    let mean = d3.mean(data.map((v) => v.x));\n    let median = d3.median(data.map((v) => v.x));\n    drawlines(marker, data);\n    return data;\n  };\n\n  function dragstarted(event, d) {\n    d3.select(this).attr(\"stroke\", \"green\").attr(\"stroke-width\", 5);\n  }\n\n  function dragged(event, d) {\n    d3.select(this)\n      .raise()\n      .attr(\"cx\", d.x = Math.round(event.x))\n      .attr(\"cy\", d.y = Math.round(event.y));\n    data = update();\n\n    var this_summary = {};\n    this_summary[varname] = {\n      mean: d3.mean(data.map((v) => v.x)),\n      median: d3.median(data.map((v) => v.x)),\n      data: data.map((v) => v.x),\n    };\n    summaryupdate(this_summary);\n  }\n\n  function dragended(event, d) {\n    d3.select(this).attr(\"stroke\", null);\n    d3.select(this).attr(\"r\", radius);\n    let data = svg.selectAll(\"circle\").data();\n\n    var this_summary = {};\n    this_summary[varname] = {\n      mean: d3.mean(data.map((v) => v.x)),\n      median: d3.median(data.map((v) => v.x)),\n      data: data.map((v) => v.x),\n    };\n    summaryupdate(this_summary);\n  }\n\n  this_summary[varname] = {\n    mean: d3.mean(data.map((v) => v.x)),\n    median: d3.median(data.map((v) => v.x)),\n    data: data.map((v) => v.x),\n  };\n\n  summaryupdate(this_summary); \n  let svg = d3\n    .create(\"svg\")\n    .attr(\"viewBox\", [0, 0, width, height])\n    .attr(\"stroke-width\", 2);\n  let marker = svg.append(\"g\");\n  let points = svg.append(\"g\");\n\n  points\n    .selectAll(\"circle\")\n    .data(data)\n    .join(\"circle\")\n    .attr(\"cx\", (d) => d.x)\n    .attr(\"cy\", (d) => d.y)\n    .attr(\"r\", radius)\n    .on(\"mouseover\", function (d, i) {\n      d3.select(this)\n        .transition()\n        .duration(\"50\")\n        .attr(\"opacity\", \".5\")\n        .attr(\"stroke\", \"blue\");\n    })\n    .on(\"mouseout\", function (d, i) {\n      d3.select(this)\n        .transition()\n        .duration(\"50\")\n        .attr(\"opacity\", \"1\")\n        .attr(\"stroke\", \"black\");\n    })\n    .call(\n      d3\n        .drag()\n        .on(\"start\", dragstarted)\n        .on(\"drag\", dragged)\n        .on(\"end\", dragended),\n    );\n\n  marker.selectAll(\"#labelline\").remove();\n  drawlines(marker, data);\n\n  var scale = d3.scaleLinear().domain([0, width]).range([0, width]);\n  var x_axis = d3.axisBottom().scale(scale);\n\n  const clicked = (event, d) => {\n    if (event.defaultPrevented) return; \n    let x = Math.round(event.offsetX);\n    let y = Math.round(event.offsetY);\n    data.push({ x: x, y: y });\n    var this_summary = {};\n    this_summary[varname] = {\n      mean: d3.mean(data.map((v) => v.x)),\n      median: d3.median(data.map((v) => v.x)),\n      data: data.map((v) => v.x),\n    };\n\n    summaryupdate(this_summary); \n\n    svg\n      .selectAll(\"circle\")\n      .data(data)\n      .join(\"circle\")\n      .attr(\"cx\", (d) => d.x)\n      .attr(\"cy\", (d) => d.y)\n      .attr(\"r\", radius)\n      .on(\"mouseover\", function (d, i) {\n        d3.select(this)\n          .transition()\n          .duration(\"50\")\n          .attr(\"opacity\", \".5\")\n          .attr(\"stroke\", \"blue\");\n      })\n      .on(\"mouseout\", function (d, i) {\n        d3.select(this)\n          .transition()\n          .duration(\"50\")\n          .attr(\"opacity\", \"1\")\n          .attr(\"stroke\", \"black\");\n      })\n      .call(\n        d3\n          .drag()\n          .on(\"start\", dragstarted)\n          .on(\"drag\", dragged)\n          .on(\"end\", dragended),\n      );\n\n    update();\n  };\n\n  svg.on(\"click\", clicked);\n  svg\n    .append(\"g\")\n    .attr(\"transform\", \"translate(\" + xAxisOffest + \", \" + height * 0.9 + \")\")\n    .call(x_axis);\n\n  return svg.node();\n}\n"},{"methodName":"interpret","cellName":"ojs-cell-53","inline":false,"source":"function summaryupdate(this_summary) {\n    mutable summary = Object.assign({}, mutable summary, this_summary);\n}\n"},{"methodName":"interpret","cellName":"ojs-cell-54","inline":false,"source":"drawlines = {\n  return (marker, data) => {\n    let height = 200;\n    marker.selectAll(\"#labelline\").remove();\n    // draw the mean line\n    /*\n    svg\n      .append(\"line\")\n      .attr(\"id\", \"labelline\")\n      .attr(\"x1\", d3.mean(data.map((v) => v.x)) || -10)\n      .attr(\"x2\", d3.mean(data.map((v) => v.x)) || -10)\n      .attr(\"y1\", 0)\n      .attr(\"y2\", height * 0.9)\n      .attr(\"stroke\", \"red\")\n      .attr(\"stroke-width\", 5);\n*/\n    // draw the deviation lines\n    marker\n      .selectAll(\"line\")\n      .data(data)\n      .join(\"line\")\n      .attr(\"id\", \"labelline\")\n      .attr(\"x1\", (d) => d.x)\n      .attr(\"x2\", d3.mean(data.map((v) => v.x)) || -10)\n      .attr(\"y1\", (d) => d.y)\n      .attr(\"y2\", (d) => d.y)\n      .attr(\"stroke\", \"red\")\n      .style(\"stroke-dasharray\", \"3, 3\")\n      .attr(\"stroke-width\", 2);\n    marker\n      .append(\"line\")\n      .attr(\"id\", \"labelline\")\n      .attr(\"x1\", d3.mean(data.map((v) => v.x)) || -10)\n      .attr(\"x2\", d3.mean(data.map((v) => v.x)) || -10)\n      .attr(\"y1\", 0)\n      .attr(\"y2\", height * 0.9)\n      .attr(\"stroke\", \"red\")\n      .attr(\"stroke-width\", 5);\n  };\n  //end of drawlines\n}\n"},{"methodName":"interpret","cellName":"ojs-cell-55","inline":false,"source":"drawrange = {\n  return (marker, data) => {\n    let height = 200;\n    marker.selectAll(\"#labelline\").remove();\n\n    const max = d3.max(data.map((v) => v.x)) || -10;\n    const min = d3.min(data.map((v) => v.x)) || -10;\n    const width = max - min || 0;\n\n    marker\n      .append(\"line\")\n      .attr(\"id\", \"labelline\")\n      .attr(\"x1\", min)\n      .attr(\"x2\", min)\n      .attr(\"y1\", 0)\n      .attr(\"y2\", height * 0.9)\n      .attr(\"stroke\", \"red\")\n      .attr(\"stroke-width\", 5);\n\n    marker\n      .append(\"line\")\n      .attr(\"id\", \"labelline\")\n      .attr(\"x1\", max)\n      .attr(\"x2\", max)\n      .attr(\"y1\", 0)\n      .attr(\"y2\", height * 0.9)\n      .attr(\"stroke\", \"red\")\n      .attr(\"stroke-width\", 5);\n\n    marker\n      .append(\"rect\")\n      .attr(\"id\", \"labelline\")\n      .attr(\"x\", d3.min(data.map((v) => v.x)))\n      .attr(\"y\", 0)\n      .attr(\"width\", width)\n      .attr(\"height\", height * 0.9)\n      .attr(\"stroke\", \"red\")\n      .attr(\"fill\", \"red\")\n      .attr(\"stroke-width\", 5)\n      .attr(\"opacity\", 0.5);\n  };\n}\n"},{"methodName":"interpret","cellName":"ojs-cell-56","inline":false,"source":"calc_iqr_limits = (d) => {\n  const data = d.map((v) => v.x);\n  const quantiles = [0, 0.25, 0.5, 0.75, 1].map((q) => d3.quantile(data, q));\n  const widths = quantiles.slice(0, -1).map((v, i) => {\n    return quantiles[i + 1] - v;\n  });\n\n  const marks = new Map();\n\n  widths.map((v, i) => {\n    const start = quantiles[i];\n    const width = v;\n    marks.set(\"q\" + (i + 1) + \"_s\", start);\n    marks.set(\"q\" + (i + 1) + \"_w\", width);\n  });\n\n  return marks;\n}\n"},{"methodName":"interpret","cellName":"ojs-cell-57","inline":false,"source":"drawiqr = {\n  return (marker, data) => {\n    let height = 200;\n    marker.selectAll(\"#labelline\").remove();\n\n    const max = d3.max(data.map((v) => v.x)) || -10;\n    const min = d3.min(data.map((v) => v.x)) || -10;\n    const width = max - min || 0;\n\n    const quantiles = calc_iqr_limits(data);\n\n    for (let i = 1; i < 5; i++) {\n      const start = quantiles.get(\"q\" + i + \"_s\");\n      const width = quantiles.get(\"q\" + i + \"_w\");\n\n      marker\n        .append(\"rect\")\n        .attr(\"id\", \"labelline\")\n        .attr(\"x\", start)\n        .attr(\"y\", 0)\n        .attr(\"width\", width)\n        .attr(\"height\", height * 0.9)\n        .attr(\"fill\", i === 2 || i === 3 ? \"red\" : \"blue\")\n        .attr(\"stroke-width\", 0)\n        .attr(\"opacity\", 0.5);\n\n      marker\n        .append(\"line\")\n        .attr(\"id\", \"labelline\")\n        .attr(\"x1\", start)\n        .attr(\"x2\", start)\n        .attr(\"y1\", 0)\n        .attr(\"y2\", height * 0.9)\n        .attr(\"stroke\", i === 1 ? \"blue\" : \"red\")\n        .attr(\"stroke-width\", 2);\n    }\n\n    marker\n      .append(\"line\")\n      .attr(\"id\", \"labelline\")\n      .attr(\"x1\", max || -10)\n      .attr(\"x2\", max || -10)\n      .attr(\"y1\", 0)\n      .attr(\"y2\", height * 0.9)\n      .attr(\"stroke\", \"blue\")\n      .attr(\"stroke-width\", 2);\n  };\n\n}\n"},{"methodName":"interpret","cellName":"ojs-cell-58","inline":false,"source":"raw_data = {\n  replay_variance_1\n  replay_variance_2\n  replay_variance_3\n  let sample_size = 50;\n  let population_mean = 100;\n  let sd = 15;\n  return dist.rand_normal(population_mean, sd, sample_size, 100);\n}\n"},{"methodName":"interpret","cellName":"ojs-cell-59","inline":false,"source":"raw_data_ave = {\n  replay_variance_1\n  replay_variance_2\n  replay_variance_3\n\n  let sample_size = 50;\n  let population_mean = 100;\n  let sd = 15;\n  return dist.rand_normal(population_mean, sd, sample_size, 10000);\n}\n"},{"methodName":"interpretQuiet","source":"shinyInput('show_both_table')"},{"methodName":"interpretQuiet","source":"shinyInput('show_deviation_table')"},{"methodName":"interpretQuiet","source":"shinyInput('deviations_show')"},{"methodName":"interpretQuiet","source":"shinyInput('replay_variance_1')"},{"methodName":"interpretQuiet","source":"shinyInput('replay_variance_2')"},{"methodName":"interpretQuiet","source":"shinyInput('replay_variance_3')"}]}
</script>
<script type="module">
if (window.location.protocol === "file:") { alert("The OJS runtime does not work with file:// URLs. Please use a web server to view this document."); }
window._ojs.paths.runtimeToDoc = "../../lectures/week07/handout";
window._ojs.paths.runtimeToRoot = "../..";
window._ojs.paths.docToRoot = "../../..";
window._ojs.selfContained = false;
window._ojs.runtime.interpretFromScriptTags();
</script>
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>