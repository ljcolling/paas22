<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Dr Lazaros Gonidis">

<title>Psychology As A Science - Lecture 11: Introduction to probability</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../../">
<script src="../../../site_libs/quarto-html/quarto.js"></script>
<script src="../../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script type="module" src="../../../site_libs/quarto-ojs/quarto-ojs-runtime.js"></script>
<link href="../../../site_libs/quarto-ojs/quarto-ojs.css" rel="stylesheet">

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<link rel="stylesheet" href="../../../styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../../../index.html">
    <span class="navbar-title">Psychology As A Science</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../../handouts.html" rel="" target="">
 <span class="menu-text">Lecture handouts</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../../slides.html" rel="" target="">
 <span class="menu-text">Lecture slides</span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools">
  <a href="" class="quarto-reader-toggle quarto-navigation-tool px-1" onclick="window.quartoToggleReader(); return false;" title="Toggle reader mode">
  <div class="quarto-reader-toggle-btn">
  <i class="bi"></i>
  </div>
</a>
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#different-views-of-probability" id="toc-different-views-of-probability" class="nav-link active" data-scroll-target="#different-views-of-probability">Different views of probability</a>
  <ul class="collapse">
  <li><a href="#the-classical-view-of-probability" id="toc-the-classical-view-of-probability" class="nav-link" data-scroll-target="#the-classical-view-of-probability">The classical view of probability</a></li>
  <li><a href="#the-frequency-view-of-probability" id="toc-the-frequency-view-of-probability" class="nav-link" data-scroll-target="#the-frequency-view-of-probability">The frequency view of probability</a></li>
  <li><a href="#the-subjective-view-of-probability-credences" id="toc-the-subjective-view-of-probability-credences" class="nav-link" data-scroll-target="#the-subjective-view-of-probability-credences">The subjective view of probability (credences)</a></li>
  </ul></li>
  <li><a href="#calculating-with-probability" id="toc-calculating-with-probability" class="nav-link" data-scroll-target="#calculating-with-probability">Calculating with probability</a>
  <ul class="collapse">
  <li><a href="#some-properties-of-probabilities" id="toc-some-properties-of-probabilities" class="nav-link" data-scroll-target="#some-properties-of-probabilities">Some properties of probabilities</a></li>
  <li><a href="#the-addition-law" id="toc-the-addition-law" class="nav-link" data-scroll-target="#the-addition-law">The addition law</a></li>
  </ul></li>
  <li><a href="#mutually-and-non-mutually-exclusive-events" id="toc-mutually-and-non-mutually-exclusive-events" class="nav-link" data-scroll-target="#mutually-and-non-mutually-exclusive-events">Mutually and non mutually exclusive events</a></li>
  <li><a href="#two-or-more-events" id="toc-two-or-more-events" class="nav-link" data-scroll-target="#two-or-more-events">Two or more events</a></li>
  <li><a href="#independence-and-non-independence" id="toc-independence-and-non-independence" class="nav-link" data-scroll-target="#independence-and-non-independence">Independence and non-independence</a></li>
  <li><a href="#working-with-conditional-probabilities" id="toc-working-with-conditional-probabilities" class="nav-link" data-scroll-target="#working-with-conditional-probabilities">Working with conditional probabilities</a></li>
  <li><a href="#bayes-theorem" id="toc-bayes-theorem" class="nav-link" data-scroll-target="#bayes-theorem">Bayes theorem</a>
  <ul class="collapse">
  <li><a href="#errors-in-reasoning-about-conditional-probabilities" id="toc-errors-in-reasoning-about-conditional-probabilities" class="nav-link" data-scroll-target="#errors-in-reasoning-about-conditional-probabilities">Errors in reasoning about conditional probabilities</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Lecture 11: Introduction to probability</h1>
<p class="subtitle lead">Reasoning about probability and common pitfalls</p>
</div>


<div class="quarto-title-meta-author">
  <div class="quarto-title-meta-heading">Author</div>
  <div class="quarto-title-meta-heading">Affiliation</div>
  
    <div class="quarto-title-meta-contents">
    <a href="mailto:L.Gonidis@sussex.ac.uk">Dr Lazaros Gonidis</a> 
  </div>
    <div class="quarto-title-meta-contents">
        <p class="affiliation">
            <a href="https://profiles.sussex.ac.uk/p596170-lazaros-gonidis">
            School of Psychology, University of Sussex
            </a>
          </p>
      </div>
    </div>

<div class="quarto-title-meta">

      
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">14 December, 2023</p>
    </div>
  </div>
    
  
  </div>
  

</header>

<p>A good understanding of <em>probability</em> is important not only for understanding science but also for understanding and making sense of the world. Unfortunately, probability is poorly understood and, as a result, people tend to reason quite poorly about probabilities. Some of this faulty reasoning can have real world impacts. Therefore, it’s important that you understand probability correctly, so that you don’t also fall for these fallacies.</p>
<p>We’ll start off this lecture by asking a seemingly simple question.</p>
<section id="different-views-of-probability" class="level2">
<h2 class="anchored" data-anchor-id="different-views-of-probability">Different views of probability</h2>
<p>What do we mean by “probability”?</p>
<p>It might seem like there’s an easy answer to this question, but there’s <em>at least</em> three senses of <strong>probability</strong>.</p>
<p>These different senses after often employed in different contexts, because they make more sense in some contexts and not others</p>
<p>The three I’ll cover are:</p>
<ul>
<li><p>The <strong>classical view</strong> of probability</p></li>
<li><p>The <strong>frequency view</strong> of probability</p></li>
<li><p>The <strong>subjective view</strong> of probability</p></li>
</ul>
<section id="the-classical-view-of-probability" class="level3">
<h3 class="anchored" data-anchor-id="the-classical-view-of-probability">The classical view of probability</h3>
<p>The <em>classical view</em> is often used in the context of games of chance like roulette and lotteries</p>
<p>We can sum it up as follows:</p>
<blockquote class="blockquote">
<p>If we have an (exhaustive) list of <strong>events</strong> that can be produce by some (exhaustive) list of equally possible outcomes (the number of events and outcomes need not be the same), the <strong>probability</strong> of a particular event occurring is just <strong>the proportion of outcomes that produce that event</strong>.</p>
</blockquote>
<p>To make it concrete we can think about flipping coins. If we flip two coins then the possible outcomes that can occur are:</p>
<ol type="1">
<li><p>Heads and then heads</p></li>
<li><p>Heads and then tails</p></li>
<li><p>Tails and then heads</p></li>
<li><p>Tails and then tails</p></li>
</ol>
<p>If we’re interested in a particular event–for example, the event of “obtaining at least one head from two flips”—then we just count the number of outcomes that produce that event. For example, let’s take the four outcomes above and see which of them lead to <em>at least one head</em>.</p>
<ol type="1">
<li><p>Heads and then heads: 2 heads</p></li>
<li><p>Heads and then tails: 1 head</p></li>
<li><p>Tails and then heads: 1 head</p></li>
<li><p><del>Tails and then tails</del>: 0 heads</p></li>
</ol>
<p>Three out of four outcomes would produce the event of “at least one head”, so the probability is <span class="math inline">\(\frac{3}{4}\)</span> or 0.75.</p>
<p>If you’re viewing probability like this, it’s very important to be clear about what counts as a possible outcome. For example, when you’re playing the lottery, how many outcomes are there?</p>
<p>Is it two? Either you pick the correct numbers or you don’t? So the probability of winning is <span class="math inline">\(\frac{1}{2}\)</span>? Of course not! There’s 45,057,474 possible outcomes. And 1 leads to you winning, with 45,057,473 leading to you not winning!</p>
</section>
<section id="the-frequency-view-of-probability" class="level3">
<h3 class="anchored" data-anchor-id="the-frequency-view-of-probability">The frequency view of probability</h3>
<p>When you take a frequency view of probability you’re making a claim about <strong>how often, over some long period of time</strong> some event occurs. The frequency view is often the view that we take in science. The <em>frequency view</em> of probability is also the view of probability that we most often use in the context of <strong>sampling distribution</strong>.</p>
<p>Think about the following statement: There’s 95% probability that the sample mean will be less than 2 standard errors from the population mean.</p>
<p>What this statement <strong>means</strong> is that if you draw lots of samples from the same population then <strong>95% of the time</strong> the sample mean will be within 2 standard errors of the population mean.</p>
<p>Or, for example, consider assigning a probability to the claim “drug X lowers depression”, we can’t just think of each possible outcomes that <strong>could</strong> occur when people take Drug X and then count up how many lead to lower depression and how many do not, as we would do with the classical view. Because there’s no way to make an exhaustive list of every possible outcome! So instead what we need to do is to run an experiment where we give Drug X and see whether it lowers depression. And we can repeat this many many times. After this we count up the proportion of experiments in which depression was lowered, and this is then the probability that Drug X lowers depression.</p>
</section>
<section id="the-subjective-view-of-probability-credences" class="level3">
<h3 class="anchored" data-anchor-id="the-subjective-view-of-probability-credences">The subjective view of probability (credences)</h3>
<p>Final view we’ll discuss is the <em>subjective view</em> of probability where probabilities refer to credences. To understand what this means, consider the following statements:</p>
<blockquote class="blockquote">
<p>The Australian cricket team will lose the upcoming test series against South Africa.</p>
</blockquote>
<p>There is a sense in which you can assign a probability to this. But it isn’t the classical kind—we can’t just enumerate all the possible outcomes that lead to this event. Nor is it the frequency kind—we can’t repeat the 2022/2023 cricket tour over and over and see how often Australia lose.</p>
<p>When we talk about probability in this context mean something like <em>degree of belief</em>, <em>credence</em>, or <em>subjective probability</em>. Probability in this context is the answer to the question “how sure are you that the Australian cricket team will lose the upcoming test series against South Africa?”</p>
<p>The viewing probabilities are credences is something that is common in our everyday thinking. For example, consider jurors that are required to make a decision about the guilt or innocence of a defendant. To make this decision jurors need to assign probabilities to the two propositions: 1) The defendant is guilty or 2) The defendant is innocent. And, in the case of criminal trials, the probability assigned to 1 must be greater than 2 by some threshold amount. <a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a></p>
<p>The classical view of probability and the frequency view of probability are, in many respects, similar to each other, at least when compared to the subjective view. But you might ask, why do these differences matter?</p>
<p>One reason for discussing these differences is that the frequency view is the view you’ll most commonly encounter within what’s known as Frequentist statistics.This is the kind of statistics you’ll be learning in your undergraduate courses<a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a>. The frequency view is, however, not that common in our every day thinking. As the juror example is meant to demonstrate, the credence/subjective view is more common. As a result this can lead to some confusions. Specifically, people get confused and think that the results of statistical tests tell people what they should “believe”—that is, what subjective probabilities they should assign to hypotheses. But they don’t. At least not by themselves. We can use them to help us form beliefs about hypotheses, but only with the help of some extra information that comes, for example, from scientific theories and so on.</p>
<!--
Think about our frequency example again. We made the statement:

> There's 95% probability that the sample mean will be less than 2 standard 
errors from the population mean.

And we said that what this really means is that if we repeatedly sample from 
the population then **95% of the time** the sample mean will be less than
2 standard errors from the population mean. That is, a **frequency**
interpretation. 

However, a common mistake is for people to interpret this probability as a
credence or subjective probability. And therefore, they might interpret this
statement as saying:

> I'm 95% sure that the sample 
mean is within 2 standard errors of the population mean.

The problem with this inte
-->
</section>
</section>
<section id="calculating-with-probability" class="level2">
<h2 class="anchored" data-anchor-id="calculating-with-probability">Calculating with probability</h2>
<p>The different views of probability have got to do with what the numbers <strong>mean</strong>, but once we have the numbers there’s no real disagreements about how we do calculations with those numbers<a href="#fn3" class="footnote-ref" id="fnref3" role="doc-noteref"><sup>3</sup></a>.</p>
<section id="some-properties-of-probabilities" class="level3">
<h3 class="anchored" data-anchor-id="some-properties-of-probabilities">Some properties of probabilities</h3>
<p>There are some rule that probabilities need to obey. When we attach numbers to probabilities those numbers must range from 0 to 1. We assign a probability of 0 to an event if that event is impossible (that is, it will <strong>never occur</strong>). And we assign 1 to an event if it’s guaranteed (that is, it will <strong>always occur</strong>)</p>
<p>These two simple rules can help us to check our calculations with probabilities. If we get a value more than 1 or a value less than 0, then something has gone wrong!</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
A first note about <em>notation</em>.
</div>
</div>
<div class="callout-body-container callout-body">
<p>There’s lots of notation that goes along with probability theory. We’ll learn more about this notion as we go long. But for now, we’ll just start off simple.</p>
<p>It’s common to use P or Pr to refer to probability. To refer to the probability of some event the P is followed by brackets containing a symbol. For example, if you wanted to refer to the probability of getting Heads on a coin flip then you might right P(Heads). Or if you wanted to refer to the probability that somebody is sick then you might right P(Sick).</p>
</div>
</div>
</section>
<section id="the-addition-law" class="level3">
<h3 class="anchored" data-anchor-id="the-addition-law">The addition law</h3>
<p>The addition law states that whenever two events are <em>mutually exclusive</em>:</p>
<blockquote class="blockquote">
<p>The probability that at least one them occurs is the <strong>sum</strong> of the their individual probabilities</p>
</blockquote>
<p>If we flip a coin, one of two things can happen. It can land Heads, or it can land Tails. It can’t land heads <strong>and</strong> tails (this is what is meant by <em>mutually exclusive</em>), and one of those things must happen (it’s a list of all possible events).</p>
<p>What’s the probability that at least one of the those events happens? Since one of those events must happen the probability must be 1. But we can also work it out from the individual probabilities using the <strong>addition law</strong>.</p>
<ol type="1">
<li><p><span class="math inline">\(\frac{1}{2}\)</span> possible outcomes produce Heads—P(Heads) = 0.50</p></li>
<li><p><span class="math inline">\(\frac{1}{2}\)</span> possible outcomes produce Tails—P(Tails) = 0.50</p></li>
</ol>
<p>The probabilities of at least one of <strong>Heads</strong> or <strong>Tails</strong> occurring is 0.5 + 0.5 = 1</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Another note about <em>notation</em>
</div>
</div>
<div class="callout-body-container callout-body">
<p>Another set of symbols that you’ll see when dealing with probability are <span class="math inline">\(\cup\)</span> (union) and <span class="math inline">\(\cap\)</span> (intersection).</p>
<p>If we have two events <span class="math inline">\(A\)</span> and <span class="math inline">\(B\)</span> that occur with <span class="math inline">\(P(A)\)</span> and <span class="math inline">\(P(B)\)</span> then the probability or <strong>either A or B</strong> occurring is <span class="math inline">\(P(A \cup B)\)</span>.</p>
<p>The addition law tells us that if <strong>A</strong> and <strong>B</strong> are <strong>mutually exclusive</strong> (they can’t both occur at the same time) then <span class="math inline">\(P(A \cup B) = P(A) + P(B)\)</span>.</p>
<p>While we use <span class="math inline">\(P(A \cup B)\)</span> to denote A <strong>or</strong> B occurring we use <span class="math inline">\(\cap\)</span> to denote A <strong>and</strong> B occurring. That is, the probability of A <strong>and</strong> B occurring is denoted as <span class="math inline">\(P(A \cap B)\)</span>. If A and B are mutually exclusive then <span class="math inline">\(P(A \cap B) = 0\)</span>.</p>
</div>
</div>
<p>You can explore mutually exclusive events in <a href="#exm-mutual">Explorable&nbsp;1</a>.</p>
<div class="callout callout-style-simple callout-tip no-icon">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-body-container">
<div id="exm-mutual" class="theorem example">
<p><span class="theorem-title"><strong>Explorable 1 (Mutually exclusive events) </strong></span>&nbsp;</p>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb1" data-startfrom="-1" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line -2;"><span id="cb1--1"><a href="#cb1--1" aria-hidden="true" tabindex="-1"></a>viewof plot <span class="op">=</span> <span class="fu">html</span><span class="vs">`</span></span>
<span id="cb1-0"><a href="#cb1-0" aria-hidden="true" tabindex="-1"></a><span class="vs">&lt;svg class="image" xmlns="http://www.w3.org/2000/svg" width="</span><span class="sc">${</span></span>
<span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>  (<span class="dv">44</span> <span class="op">*</span> <span class="dv">10</span>) <span class="op">+</span> <span class="dv">44</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>  <span class="sc">}</span><span class="vs">" height="</span><span class="sc">${</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>  <span class="dv">40</span> <span class="op">*</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">ceil</span>((<span class="dv">44</span> <span class="op">+</span> <span class="dv">44</span> <span class="op">+</span> <span class="dv">44</span>) <span class="op">/</span> <span class="dv">10</span>) </span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="sc">}</span><span class="vs">"&gt;</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="sc">${</span>[</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>  full_grid<span class="op">.</span><span class="fu">slice</span>(<span class="dv">0</span><span class="op">,</span> red)<span class="op">.</span><span class="fu">map</span>((pt) <span class="kw">=&gt;</span> <span class="fu">circle</span>(pt[<span class="dv">0</span>]<span class="op">,</span> pt[<span class="dv">1</span>]<span class="op">,</span> <span class="st">"red"</span><span class="op">,</span> <span class="st">"red"</span>))<span class="op">,</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>  full_grid</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">slice</span>(red<span class="op">,</span> red <span class="op">+</span> blue)</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">map</span>((pt) <span class="kw">=&gt;</span> <span class="fu">circle</span>(pt[<span class="dv">0</span>]<span class="op">,</span> pt[<span class="dv">1</span>]<span class="op">,</span> <span class="st">"blue"</span><span class="op">,</span> <span class="st">"blue"</span>))<span class="op">,</span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>  full_grid</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">slice</span>(red <span class="op">+</span> blue<span class="op">,</span> red <span class="op">+</span> blue <span class="op">+</span> green)</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">map</span>((pt) <span class="kw">=&gt;</span> <span class="fu">circle</span>(pt[<span class="dv">0</span>]<span class="op">,</span> pt[<span class="dv">1</span>]<span class="op">,</span> <span class="st">"green"</span><span class="op">,</span> <span class="st">"green"</span>))</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>]<span class="op">.</span><span class="fu">join</span>(<span class="st">""</span>)<span class="sc">}</span></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a><span class="vs">&lt;/svg&gt;`</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-1" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell panel-input card bg-light p-2">
<div class="sourceCode cell-code hidden" id="cb2" data-startfrom="1" data-source-offset="-0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>viewof red <span class="op">=</span> Inputs<span class="op">.</span><span class="fu">range</span>([<span class="dv">0</span><span class="op">,</span> <span class="dv">30</span>]<span class="op">,</span> {</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">label</span><span class="op">:</span> <span class="st">"Number of red cirlces"</span><span class="op">,</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">step</span><span class="op">:</span> <span class="dv">1</span><span class="op">,</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">value</span><span class="op">:</span> <span class="dv">10</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>viewof blue <span class="op">=</span> Inputs<span class="op">.</span><span class="fu">range</span>([<span class="dv">0</span><span class="op">,</span> <span class="dv">30</span>]<span class="op">,</span> </span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>  {<span class="dt">label</span><span class="op">:</span> <span class="st">"Number of blue circles"</span><span class="op">,</span></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>  <span class="dt">step</span><span class="op">:</span> <span class="dv">1</span><span class="op">,</span> </span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>  <span class="dt">value</span><span class="op">:</span> <span class="dv">10</span>})</span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>viewof green <span class="op">=</span> Inputs<span class="op">.</span><span class="fu">range</span>([<span class="dv">0</span><span class="op">,</span> <span class="dv">30</span>]<span class="op">,</span> {</span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a>  <span class="dt">label</span><span class="op">:</span> <span class="st">"Number of green circles"</span><span class="op">,</span></span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a>  <span class="dt">step</span><span class="op">:</span> <span class="dv">1</span><span class="op">,</span></span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a>  <span class="dt">value</span><span class="op">:</span> <span class="dv">10</span></span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a>})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-2-1" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-2-2" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-2-3" data-nodetype="declaration">

</div>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb3" data-startfrom="-1" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line -2;"><span id="cb3--1"><a href="#cb3--1" aria-hidden="true" tabindex="-1"></a>viewof t3 <span class="op">=</span> <span class="fu">md</span><span class="vs">`The display shows </span><span class="sc">${</span>red<span class="sc">}</span><span class="vs"> red circles, </span><span class="sc">${</span>blue<span class="sc">}</span><span class="vs"> circles, and </span><span class="sc">${</span>green<span class="sc">}</span><span class="vs"> circles.</span></span>
<span id="cb3-0"><a href="#cb3-0" aria-hidden="true" tabindex="-1"></a><span class="vs">This means that there's a total of </span><span class="sc">${</span>red <span class="op">+</span> blue <span class="op">+</span> green<span class="sc">}</span><span class="vs"> circles. If we were to </span></span>
<span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="vs">select one circle at random then we can work out the probability that it'll</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="vs">be green, blue or red.</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="vs">- The probability of selecting a red circle is </span><span class="sc">${</span><span class="fu">tex</span><span class="vs">`</span><span class="sc">\f</span><span class="vs">rac{</span><span class="sc">${</span>red<span class="sc">}</span><span class="vs">}{</span><span class="sc">${</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>  red <span class="op">+</span> green <span class="op">+</span> blue</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a><span class="sc">}</span><span class="vs">}`</span><span class="sc">}</span><span class="vs"> or </span><span class="sc">${</span><span class="fu">round3</span>(red <span class="op">/</span> (red <span class="op">+</span> green <span class="op">+</span> blue))<span class="sc">}</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a><span class="vs">- The probability of selecting a blue circle is </span><span class="sc">${</span><span class="fu">tex</span><span class="vs">`</span><span class="sc">\f</span><span class="vs">rac{</span><span class="sc">${</span>blue<span class="sc">}</span><span class="vs">}{</span><span class="sc">${</span></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>  red <span class="op">+</span> green <span class="op">+</span> blue</span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a><span class="sc">}</span><span class="vs">}`</span><span class="sc">}</span><span class="vs"> or </span><span class="sc">${</span><span class="fu">round3</span>(blue <span class="op">/</span> (red <span class="op">+</span> green <span class="op">+</span> blue))<span class="sc">}</span></span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a><span class="vs">- The probability of selecting a green circle is </span><span class="sc">${</span><span class="fu">tex</span><span class="vs">`</span><span class="sc">\f</span><span class="vs">rac{</span><span class="sc">${</span>green<span class="sc">}</span><span class="vs">}{</span><span class="sc">${</span></span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a>  red <span class="op">+</span> green <span class="op">+</span> blue</span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a><span class="sc">}</span><span class="vs">}`</span><span class="sc">}</span><span class="vs"> or </span><span class="sc">${</span><span class="fu">round3</span>(green <span class="op">/</span> (red <span class="op">+</span> green <span class="op">+</span> blue))<span class="sc">}</span></span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a><span class="vs">Selecting **blue** and selecting **red** are **mutually exclusive**. </span></span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a><span class="vs">This means that if you select **only one circle**, that circle can't be both </span></span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a><span class="vs">blue **and** red. But we could ask about the probability of selecting, </span></span>
<span id="cb3-19"><a href="#cb3-19" aria-hidden="true" tabindex="-1"></a><span class="vs">for example, a circle that is blue **or** red.</span></span>
<span id="cb3-20"><a href="#cb3-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-21"><a href="#cb3-21" aria-hidden="true" tabindex="-1"></a><span class="vs">To work out this probability we apply the **addition rule**.</span></span>
<span id="cb3-22"><a href="#cb3-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-23"><a href="#cb3-23" aria-hidden="true" tabindex="-1"></a><span class="vs">Mathematically, we can say:</span></span>
<span id="cb3-24"><a href="#cb3-24" aria-hidden="true" tabindex="-1"></a><span class="sc">${</span><span class="fu">tex</span><span class="vs">`P (A </span><span class="sc">\c</span><span class="vs">up B) = P(A) + P(B)`</span><span class="sc">}</span></span>
<span id="cb3-25"><a href="#cb3-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-26"><a href="#cb3-26" aria-hidden="true" tabindex="-1"></a><span class="vs">Let's put some numbers to it:</span><span class="sc">\</span></span>
<span id="cb3-27"><a href="#cb3-27" aria-hidden="true" tabindex="-1"></a><span class="vs">`</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-3" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell panel-input card bg-light p-2">
<div class="sourceCode cell-code hidden" id="cb4" data-startfrom="0" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line -1;"><span id="cb4-0"><a href="#cb4-0" aria-hidden="true" tabindex="-1"></a>viewof colors <span class="op">=</span> Inputs<span class="op">.</span><span class="fu">checkbox</span>(</span>
<span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>  [<span class="st">"red"</span><span class="op">,</span> <span class="st">"blue"</span><span class="op">,</span> <span class="st">"green"</span>]<span class="op">,</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>  { <span class="dt">value</span><span class="op">:</span> [<span class="st">"red"</span><span class="op">,</span> <span class="st">"blue"</span>]<span class="op">,</span> <span class="dt">label</span><span class="op">:</span> <span class="st">"Colours"</span>}<span class="op">,</span> { <span class="dt">value</span><span class="op">:</span> [<span class="st">"red"</span><span class="op">,</span> <span class="st">"blue"</span>]}</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-4" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb5" data-startfrom="-1" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line -2;"><span id="cb5--1"><a href="#cb5--1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">give_selection</span>(x) {</span>
<span id="cb5-0"><a href="#cb5-0" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span>(_<span class="op">.</span><span class="fu">isEmpty</span>(x)) {</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="st">"**None**"</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> colors<span class="op">.</span><span class="fu">map</span>((x<span class="op">,</span> i) <span class="kw">=&gt;</span> <span class="vs">`</span><span class="sc">${</span>i <span class="op">&gt;=</span> <span class="dv">1</span> <span class="op">?</span> <span class="st">" and "</span> <span class="op">:</span> <span class="st">""</span><span class="sc">}</span><span class="vs">**</span><span class="sc">${</span>x<span class="sc">}</span><span class="vs">**`</span>)</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-5" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb6" data-startfrom="-1" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line -2;"><span id="cb6--1"><a href="#cb6--1" aria-hidden="true" tabindex="-1"></a><span class="fu">md</span><span class="vs">`Select two colours using the selectors above. You've selected: </span><span class="sc">${</span><span class="fu">give_selection</span>(colors)<span class="sc">}</span><span class="vs">.</span></span>
<span id="cb6-0"><a href="#cb6-0" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="sc">${</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>  _<span class="op">.</span><span class="fu">isEmpty</span>(colors)</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>    <span class="op">?</span> <span class="st">""</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>    <span class="op">:</span> <span class="fu">md</span><span class="vs">`The probability of selecting </span><span class="sc">${</span>colors<span class="op">.</span><span class="fu">map</span>(</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>        (x<span class="op">,</span> i) <span class="kw">=&gt;</span> <span class="vs">`</span><span class="sc">${</span>x<span class="sc">}${</span>i <span class="op">+</span> <span class="dv">1</span> <span class="op">&lt;</span> colors<span class="op">.</span><span class="at">length</span> <span class="op">?</span> <span class="st">" **or** "</span> <span class="op">:</span> <span class="st">" is:"</span><span class="sc">}</span><span class="vs">`</span></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>      )<span class="sc">}</span><span class="vs">`</span></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a><span class="sc">}</span></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a><span class="sc">${</span></span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>  _<span class="op">.</span><span class="fu">isEmpty</span>(colors)</span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a>    <span class="op">?</span> <span class="st">"Use the checkboxes above to select the colours."</span></span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a>    <span class="op">:</span> <span class="fu">md</span><span class="vs">`</span><span class="sc">${</span><span class="fu">tex</span><span class="vs">`P(</span><span class="sc">${</span>colors</span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">map</span>((x) <span class="kw">=&gt;</span> <span class="vs">`</span><span class="sc">\\</span><span class="vs">mathrm{</span><span class="sc">${</span>x<span class="sc">}</span><span class="vs">}`</span>)</span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">join</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">cup{}"</span>)<span class="sc">}</span><span class="vs">)`</span><span class="sc">}</span><span class="vs">  = </span><span class="sc">${</span>colors</span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">map</span>((x) <span class="kw">=&gt;</span> <span class="fu">round3</span>(<span class="fu">getvalue</span>(x) <span class="op">/</span> (red <span class="op">+</span> blue <span class="op">+</span> green)))</span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">join</span>(<span class="st">" + "</span>)<span class="sc">}</span><span class="vs"> = </span><span class="sc">${</span><span class="fu">round3</span>(</span>
<span id="cb6-17"><a href="#cb6-17" aria-hidden="true" tabindex="-1"></a>        _<span class="op">.</span><span class="fu">sum</span>(colors<span class="op">.</span><span class="fu">map</span>((x) <span class="kw">=&gt;</span> <span class="fu">getvalue</span>(x))) <span class="op">/</span> (red <span class="op">+</span> blue <span class="op">+</span> green)</span>
<span id="cb6-18"><a href="#cb6-18" aria-hidden="true" tabindex="-1"></a>      )<span class="sc">}</span><span class="vs">`</span></span>
<span id="cb6-19"><a href="#cb6-19" aria-hidden="true" tabindex="-1"></a><span class="sc">}</span><span class="vs"> </span></span>
<span id="cb6-20"><a href="#cb6-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-21"><a href="#cb6-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-22"><a href="#cb6-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-23"><a href="#cb6-23" aria-hidden="true" tabindex="-1"></a><span class="sc">${</span></span>
<span id="cb6-24"><a href="#cb6-24" aria-hidden="true" tabindex="-1"></a>  _<span class="op">.</span><span class="fu">isEmpty</span>(colors)</span>
<span id="cb6-25"><a href="#cb6-25" aria-hidden="true" tabindex="-1"></a>    <span class="op">?</span> <span class="st">""</span></span>
<span id="cb6-26"><a href="#cb6-26" aria-hidden="true" tabindex="-1"></a>    <span class="op">:</span> <span class="fu">md</span><span class="vs">`</span></span>
<span id="cb6-27"><a href="#cb6-27" aria-hidden="true" tabindex="-1"></a><span class="vs">We can work this out just by counting:</span></span>
<span id="cb6-28"><a href="#cb6-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-29"><a href="#cb6-29" aria-hidden="true" tabindex="-1"></a><span class="sc">${</span>colors<span class="op">.</span><span class="fu">map</span>((x) <span class="kw">=&gt;</span> <span class="vs">`</span><span class="sc">${</span><span class="fu">round3</span>(<span class="fu">getvalue</span>(x))<span class="sc">}</span><span class="vs"> (number of </span><span class="sc">${</span>x<span class="sc">}</span><span class="vs"> circles)`</span>)<span class="op">.</span><span class="fu">join</span>(<span class="st">" + "</span>)<span class="sc">}</span><span class="vs"> = </span><span class="sc">${</span>_<span class="op">.</span><span class="fu">sum</span>(</span>
<span id="cb6-30"><a href="#cb6-30" aria-hidden="true" tabindex="-1"></a>        colors<span class="op">.</span><span class="fu">map</span>((x) <span class="kw">=&gt;</span> <span class="fu">getvalue</span>(x))</span>
<span id="cb6-31"><a href="#cb6-31" aria-hidden="true" tabindex="-1"></a>      )<span class="sc">}</span></span>
<span id="cb6-32"><a href="#cb6-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-33"><a href="#cb6-33" aria-hidden="true" tabindex="-1"></a><span class="sc">${</span>_<span class="op">.</span><span class="fu">sum</span>(colors<span class="op">.</span><span class="fu">map</span>((x) <span class="kw">=&gt;</span> <span class="fu">getvalue</span>(x)))<span class="sc">}</span><span class="vs"> ÷ </span><span class="sc">${</span></span>
<span id="cb6-34"><a href="#cb6-34" aria-hidden="true" tabindex="-1"></a>        red <span class="op">+</span> blue <span class="op">+</span> green</span>
<span id="cb6-35"><a href="#cb6-35" aria-hidden="true" tabindex="-1"></a>      <span class="sc">}</span><span class="vs"> (total number of circles) = </span><span class="sc">${</span><span class="fu">round3</span>(</span>
<span id="cb6-36"><a href="#cb6-36" aria-hidden="true" tabindex="-1"></a>        _<span class="op">.</span><span class="fu">sum</span>(colors<span class="op">.</span><span class="fu">map</span>((x) <span class="kw">=&gt;</span> <span class="fu">getvalue</span>(x))) <span class="op">/</span> (red <span class="op">+</span> blue <span class="op">+</span> green)</span>
<span id="cb6-37"><a href="#cb6-37" aria-hidden="true" tabindex="-1"></a>      )<span class="sc">}</span></span>
<span id="cb6-38"><a href="#cb6-38" aria-hidden="true" tabindex="-1"></a><span class="vs">`</span></span>
<span id="cb6-39"><a href="#cb6-39" aria-hidden="true" tabindex="-1"></a><span class="sc">}</span></span>
<span id="cb6-40"><a href="#cb6-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-41"><a href="#cb6-41" aria-hidden="true" tabindex="-1"></a><span class="vs">`</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-6" data-nodetype="expression">

</div>
</div>
</div>
</div>
</div>
</div>
</section>
</section>
<section id="mutually-and-non-mutually-exclusive-events" class="level2">
<h2 class="anchored" data-anchor-id="mutually-and-non-mutually-exclusive-events">Mutually and non mutually exclusive events</h2>
<p>When we flip a coin the two outcomes are mutually exclusive. That is, they can’t both happen at the same time. But not everything is like this. Consider drawing a card from a deck of cards:</p>
<ol type="1">
<li><p>What is the probability of pulling out a Spade ♠ or a Club ♣?</p></li>
<li><p>What is the probability of pulling out a Spade ♠ or an Ace 🃁?</p></li>
</ol>
<p>In situation (1) the events are mutually exclusive (or disjoint). A card can’t be a Spade and a Club. It will either be a Spade, a Club, or something else. In this case, the <strong>addition law</strong> applies.</p>
<p>In situation (2) the events are not mutually exclusive. A card can be both a Spade and an Ace. Because a card can be both a Spade and an Ace we have to make sure that we don’t double count these cards. So we just modify the addition law so that we have <a href="#eq-add">Equation&nbsp;1</a> below:</p>
<p><span id="eq-add"><span class="math display">\[P(A \cup B) = P(A) + P(B) - P(A \cap B) \tag{1}\]</span></span></p>
<p>We can put numbers to this for the card example:</p>
<p>There are 52 cards in a deck of cards. Of these, 13 are s. So the probability of selecting a is <span class="math inline">\(P(\mathrm{Spade}) = \frac{13}{52}\)</span>. Exactly 4 of the 52 will be s, so the probability of selecting an is <span class="math inline">\(P(\mathrm{Ace}) = \frac{4}{52}\)</span>. And finally, exactly 1 card is both an and a . So the probability of selecting a card that is both is <span class="math inline">\(P(\mathrm{Ace} \cap \mathrm{Spade}) = \frac{1}{52}\)</span>. With all these we can now work out the probability of selecting a card that is an Ace or a Spade.</p>
<p><span class="math inline">\(P(\mathrm{Ace} \cup \mathrm{Spade}) = P(\mathrm{Ace}) + P(\mathrm{Spade}) - P(\mathrm{Ace} \cap \mathrm{Spade})\)</span></p>
<p><span class="math inline">\(P(\mathrm{Ace} \cup \mathrm{Spade}) = 0.08 + 0.25 - 0.02\)</span></p>
<p>You can explore non-mutually exclusive events in <a href="#exm-non-mutual">Explorable&nbsp;2</a>.</p>
<div class="callout callout-style-simple callout-tip no-icon">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-body-container">
<div id="exm-non-mutual" class="theorem example">
<p><span class="theorem-title"><strong>Explorable 2 (Non-mutually exclusive events) </strong></span>&nbsp;</p>
</div>
<p>In <a href="#exm-mutual">Explorable&nbsp;1</a> we had circles of three different colours (red, blue, and green). In this example, we’ll still have coloured circles, but some of the circles will also have a white dot. We’ll only have two colours (blue and red), but some blue circles will have white dots and others will not, and some red circles will have white dots and others will not.</p>
<p>First we can set how many of each colour we have.</p>
<div class="cell panel-input card bg-light p-2">
<div class="sourceCode cell-code hidden" id="cb7" data-startfrom="1" data-source-offset="-0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>viewof blue2_ <span class="op">=</span> Inputs<span class="op">.</span><span class="fu">bind</span>(</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>  Inputs<span class="op">.</span><span class="fu">range</span>([<span class="dv">1</span><span class="op">,</span> <span class="dv">30</span>]<span class="op">,</span> { <span class="dt">label</span><span class="op">:</span> <span class="st">"Number of blue"</span><span class="op">,</span> <span class="dt">step</span><span class="op">:</span> <span class="dv">1</span><span class="op">,</span> <span class="dt">value</span><span class="op">:</span> <span class="dv">15</span> })<span class="op">,</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>  viewof blue2</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>viewof red2_ <span class="op">=</span> Inputs<span class="op">.</span><span class="fu">bind</span>(</span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>  Inputs<span class="op">.</span><span class="fu">range</span>([<span class="dv">1</span><span class="op">,</span> <span class="dv">30</span>]<span class="op">,</span> { <span class="dt">label</span><span class="op">:</span> <span class="st">"Number of red"</span><span class="op">,</span> <span class="dt">step</span><span class="op">:</span> <span class="dv">1</span><span class="op">,</span> <span class="dt">value</span><span class="op">:</span> <span class="dv">15</span> })<span class="op">,</span></span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>  viewof red2</span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-7-1" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-7-2" data-nodetype="declaration">

</div>
</div>
</div>
</div>
<p>Then we can set how many of each color will have white dots.</p>
<div class="cell panel-input card bg-light p-2">
<div class="sourceCode cell-code hidden" id="cb8" data-startfrom="1" data-source-offset="-0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>viewof blue2_with_ <span class="op">=</span> Inputs<span class="op">.</span><span class="fu">bind</span>(</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>  Inputs<span class="op">.</span><span class="fu">range</span>([<span class="dv">1</span><span class="op">,</span> blue2]<span class="op">,</span> { <span class="dt">label</span><span class="op">:</span> <span class="st">"Number of blue with dots"</span><span class="op">,</span> <span class="dt">step</span><span class="op">:</span> <span class="dv">1</span> })<span class="op">,</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>  viewof blue2_with</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>viewof red2_with_ <span class="op">=</span> Inputs<span class="op">.</span><span class="fu">bind</span>(</span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>  Inputs<span class="op">.</span><span class="fu">range</span>([<span class="dv">1</span><span class="op">,</span> red2]<span class="op">,</span> {</span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>    <span class="dt">label</span><span class="op">:</span> <span class="st">"Number of red with dots"</span><span class="op">,</span></span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>    <span class="dt">step</span><span class="op">:</span> <span class="dv">1</span></span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>  })<span class="op">,</span></span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a>  viewof red2_with</span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-8-1" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-8-2" data-nodetype="declaration">

</div>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb9" data-startfrom="-1" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line -2;"><span id="cb9--1"><a href="#cb9--1" aria-hidden="true" tabindex="-1"></a><span class="fu">md</span><span class="vs">`</span></span>
<span id="cb9-0"><a href="#cb9-0" aria-hidden="true" tabindex="-1"></a><span class="vs">This display has </span><span class="sc">${</span>red2<span class="sc">}</span><span class="vs"> red circles and </span><span class="sc">${</span>blue2<span class="sc">}</span><span class="vs"> blue circles.</span></span>
<span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="vs">Out of the </span><span class="sc">${</span>red2<span class="sc">}</span><span class="vs"> red circles, </span><span class="sc">${</span>red2_with<span class="sc">}</span><span class="vs"> also have a white dot.</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="vs">Out of the </span><span class="sc">${</span>blue2<span class="sc">}</span><span class="vs"> blue circles, </span><span class="sc">${</span>blue2_with<span class="sc">}</span><span class="vs"> also have a white dot.</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="vs">`</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-9" data-nodetype="expression">

</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb10" data-startfrom="-1" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line -2;"><span id="cb10--1"><a href="#cb10--1" aria-hidden="true" tabindex="-1"></a>viewof plot2 <span class="op">=</span> <span class="fu">html</span><span class="vs">`</span></span>
<span id="cb10-0"><a href="#cb10-0" aria-hidden="true" tabindex="-1"></a><span class="vs">&lt;svg class="image" xmlns="http://www.w3.org/2000/svg" width="</span><span class="sc">${</span></span>
<span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>  (<span class="dv">44</span> <span class="op">*</span> <span class="dv">10</span>) <span class="op">+</span> <span class="dv">44</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>  <span class="sc">}</span><span class="vs">" height="</span><span class="sc">${</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>  <span class="dv">25</span> <span class="op">*</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">ceil</span>((<span class="dv">44</span> <span class="op">+</span> <span class="dv">44</span> <span class="op">+</span> <span class="dv">44</span>) <span class="op">/</span> <span class="dv">10</span>) </span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a><span class="sc">}</span><span class="vs">"&gt;</span></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a><span class="sc">${</span>[</span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>  full_grid</span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">slice</span>(<span class="dv">0</span><span class="op">,</span> red2_with)</span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">map</span>((pt) <span class="kw">=&gt;</span> <span class="fu">circle</span>(pt[<span class="dv">0</span>]<span class="op">,</span> pt[<span class="dv">1</span>]<span class="op">,</span> colors2<span class="op">.</span><span class="at">red</span><span class="op">.</span><span class="at">w</span>[<span class="dv">0</span>]<span class="op">,</span> colors2<span class="op">.</span><span class="at">red</span><span class="op">.</span><span class="at">w</span>[<span class="dv">1</span>]))<span class="op">,</span></span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a>  full_grid</span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">slice</span>(red2_with<span class="op">,</span> red2)</span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">map</span>((pt) <span class="kw">=&gt;</span> <span class="fu">circle</span>(pt[<span class="dv">0</span>]<span class="op">,</span> pt[<span class="dv">1</span>]<span class="op">,</span> colors2<span class="op">.</span><span class="at">red</span><span class="op">.</span><span class="at">n</span>[<span class="dv">0</span>]<span class="op">,</span> colors2<span class="op">.</span><span class="at">red</span><span class="op">.</span><span class="at">n</span>[<span class="dv">1</span>]))<span class="op">,</span></span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a>  full_grid</span>
<span id="cb10-13"><a href="#cb10-13" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">slice</span>(red2<span class="op">,</span> red2 <span class="op">+</span> blue2_with)</span>
<span id="cb10-14"><a href="#cb10-14" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">map</span>((pt) <span class="kw">=&gt;</span> <span class="fu">circle</span>(pt[<span class="dv">0</span>]<span class="op">,</span> pt[<span class="dv">1</span>]<span class="op">,</span> colors2<span class="op">.</span><span class="at">blue</span><span class="op">.</span><span class="at">w</span>[<span class="dv">0</span>]<span class="op">,</span> colors2<span class="op">.</span><span class="at">blue</span><span class="op">.</span><span class="at">w</span>[<span class="dv">1</span>]))<span class="op">,</span></span>
<span id="cb10-15"><a href="#cb10-15" aria-hidden="true" tabindex="-1"></a>  full_grid</span>
<span id="cb10-16"><a href="#cb10-16" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">slice</span>(red2 <span class="op">+</span> blue2_with<span class="op">,</span> red2 <span class="op">+</span> blue2)</span>
<span id="cb10-17"><a href="#cb10-17" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">map</span>((pt) <span class="kw">=&gt;</span> <span class="fu">circle</span>(pt[<span class="dv">0</span>]<span class="op">,</span> pt[<span class="dv">1</span>]<span class="op">,</span> colors2<span class="op">.</span><span class="at">blue</span><span class="op">.</span><span class="at">n</span>[<span class="dv">0</span>]<span class="op">,</span> colors2<span class="op">.</span><span class="at">blue</span><span class="op">.</span><span class="at">n</span>[<span class="dv">1</span>]))</span>
<span id="cb10-18"><a href="#cb10-18" aria-hidden="true" tabindex="-1"></a>]<span class="op">.</span><span class="fu">join</span>(<span class="st">""</span>)<span class="sc">}</span></span>
<span id="cb10-19"><a href="#cb10-19" aria-hidden="true" tabindex="-1"></a><span class="vs">&lt;/svg&gt;`</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-10" data-nodetype="declaration">

</div>
</div>
</div>
<p>We can now as a question like: What is the probability of selecting a circle that is Red <strong>or</strong> has a white dot.</p>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb11" data-startfrom="-1" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line -2;"><span id="cb11--1"><a href="#cb11--1" aria-hidden="true" tabindex="-1"></a><span class="fu">texmd</span><span class="vs">`</span></span>
<span id="cb11-0"><a href="#cb11-0" aria-hidden="true" tabindex="-1"></a><span class="vs">First we need to know P(Red). To do this, we just count</span></span>
<span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="vs">up the number of circles that are red. </span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="sc">${</span>red2<span class="sc">}</span><span class="vs"> of the </span><span class="sc">${</span>red2 <span class="op">+</span> blue2<span class="sc">}</span><span class="vs"> cirlces are red, </span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a><span class="vs">so $P(</span><span class="sc">\m</span><span class="vs">athrm{Red})$ = </span><span class="sc">${</span><span class="fu">frac</span>(red2<span class="op">/</span>(red2 <span class="op">+</span> blue2)<span class="op">,</span>red2 <span class="op">+</span> blue2)<span class="sc">}</span><span class="vs">.</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a><span class="vs">Next we need to know P(Dot). To do this, we just count</span></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a><span class="vs">up the number of circles that have white dot.</span></span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a><span class="sc">${</span>red2_with <span class="op">+</span> blue2_with<span class="sc">}</span><span class="vs"> of the </span><span class="sc">${</span>red2 <span class="op">+</span> blue2<span class="sc">}</span><span class="vs"> </span></span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a><span class="vs">circles have white dots, so $P(</span><span class="sc">\m</span><span class="vs">athrm{Dot})$ = </span></span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a><span class="sc">${</span><span class="fu">frac</span>((red2_with <span class="op">+</span> blue2_with) <span class="op">/</span> (red2 <span class="op">+</span> blue2)<span class="op">,</span> red2 <span class="op">+</span> blue2)<span class="sc">}</span><span class="vs">.</span></span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a><span class="vs">We can't just add these two numbers, because we'll double count some </span></span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a><span class="vs">of the circles.</span></span>
<span id="cb11-13"><a href="#cb11-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-14"><a href="#cb11-14" aria-hidden="true" tabindex="-1"></a><span class="vs">Click the toggle below to see which circles get counted twice.</span></span>
<span id="cb11-15"><a href="#cb11-15" aria-hidden="true" tabindex="-1"></a><span class="vs">`</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-11" data-nodetype="expression">

</div>
</div>
</div>
<div class="cell panel-input card bg-light p-2">
<div class="sourceCode cell-code hidden" id="cb12" data-startfrom="0" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line -1;"><span id="cb12-0"><a href="#cb12-0" aria-hidden="true" tabindex="-1"></a>viewof show_double_count <span class="op">=</span> Inputs<span class="op">.</span><span class="fu">toggle</span>({ <span class="dt">label</span><span class="op">:</span> <span class="st">"Show double counted"</span><span class="op">,</span> <span class="dt">value</span><span class="op">:</span> <span class="kw">false</span> })</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-12" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb13" data-startfrom="-1" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line -2;"><span id="cb13--1"><a href="#cb13--1" aria-hidden="true" tabindex="-1"></a><span class="fu">texmd</span><span class="vs">`Because some the red circles with white dots get counted twice, we need to </span></span>
<span id="cb13-0"><a href="#cb13-0" aria-hidden="true" tabindex="-1"></a><span class="vs">subtract this amount.</span></span>
<span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="vs">First we work out $P(</span><span class="sc">\m</span><span class="vs">athrm{Red})$ + $P(</span><span class="sc">\m</span><span class="vs">athrm{Dot})$.Using the numbers above</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="vs">this gives us </span><span class="sc">${</span><span class="fu">frac</span>(((red2 <span class="op">+</span> red2_with <span class="op">+</span> blue2_with))<span class="op">/</span>(blue2 <span class="op">+</span> red2)<span class="op">,</span> blue2 <span class="op">+</span> red2)<span class="sc">}</span><span class="vs">.</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a><span class="vs">Then we subtract </span><span class="sc">${</span><span class="fu">frac</span>(red2_with <span class="op">/</span> (blue2 <span class="op">+</span> red2)<span class="op">,</span> blue2 <span class="op">+</span> red2)<span class="sc">}</span><span class="vs">. This gives us</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a><span class="vs">$P(</span><span class="sc">\m</span><span class="vs">athrm{Red} </span><span class="sc">\c</span><span class="vs">up </span><span class="sc">\m</span><span class="vs">athrm{Dot})$ = </span><span class="sc">${</span><span class="fu">frac</span>((red2 <span class="op">+</span> blue2_with)<span class="op">/</span>(blue2 <span class="op">+</span> red2)<span class="op">,</span> blue2 <span class="op">+</span> red2)<span class="sc">}</span><span class="vs">.</span></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a><span class="vs">`</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-13" data-nodetype="expression">

</div>
</div>
</div>
<p>But if all that maths is too difficult, that we can just work out the probability by counting! All we need to do is to count up all the circles that are either Red or have a dot. And we just divide that by the total number of circles. If you click the toggle below, then you can see which circles you need to count.</p>
<div class="cell panel-input card bg-light p-2">
<div class="sourceCode cell-code hidden" id="cb14" data-startfrom="0" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line -1;"><span id="cb14-0"><a href="#cb14-0" aria-hidden="true" tabindex="-1"></a>viewof show_count <span class="op">=</span> Inputs<span class="op">.</span><span class="fu">toggle</span>({ <span class="dt">label</span><span class="op">:</span> <span class="fu">md</span><span class="vs">`Show Red ∪ Dot`</span><span class="op">,</span> <span class="dt">value</span><span class="op">:</span> <span class="kw">false</span> })</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-14" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb15" data-startfrom="-1" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line -2;"><span id="cb15--1"><a href="#cb15--1" aria-hidden="true" tabindex="-1"></a>colors2 <span class="op">=</span> {</span>
<span id="cb15-0"><a href="#cb15-0" aria-hidden="true" tabindex="-1"></a>  <span class="kw">let</span> c <span class="op">=</span> {</span>
<span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>    <span class="st">"red"</span> <span class="op">:</span> { <span class="st">"w"</span> <span class="op">:</span> [ <span class="st">"red"</span><span class="op">,</span> <span class="st">"white"</span> ]<span class="op">,</span> <span class="st">"n"</span> <span class="op">:</span> [ <span class="st">"red"</span><span class="op">,</span> <span class="st">"red"</span> ] }<span class="op">,</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>    <span class="st">"blue"</span> <span class="op">:</span> { <span class="st">"w"</span> <span class="op">:</span> [ <span class="st">"blue"</span><span class="op">,</span> <span class="st">"white"</span> ]<span class="op">,</span> <span class="st">"n"</span> <span class="op">:</span> [ <span class="st">"blue"</span><span class="op">,</span> <span class="st">"blue"</span> ] }</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span>(show_double_count) {</span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>    c<span class="op">.</span><span class="at">red</span>[<span class="st">"n"</span>] <span class="op">=</span> [<span class="st">"white"</span><span class="op">,</span><span class="st">"white"</span>]</span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>    c<span class="op">.</span><span class="at">blue</span>[<span class="st">"w"</span>] <span class="op">=</span> [<span class="st">"white"</span><span class="op">,</span> <span class="st">"white"</span>]</span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a>    c<span class="op">.</span><span class="at">blue</span>[<span class="st">"n"</span>] <span class="op">=</span> [<span class="st">"white"</span><span class="op">,</span> <span class="st">"white"</span>]</span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span>(show_count) {</span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a>    c<span class="op">.</span><span class="at">red</span>[<span class="st">"n"</span>] <span class="op">=</span> [<span class="st">"red"</span><span class="op">,</span> <span class="st">"red"</span>]</span>
<span id="cb15-12"><a href="#cb15-12" aria-hidden="true" tabindex="-1"></a>    c<span class="op">.</span><span class="at">red</span>[<span class="st">"w"</span>] <span class="op">=</span> [<span class="st">"red"</span><span class="op">,</span><span class="st">"white"</span>]</span>
<span id="cb15-13"><a href="#cb15-13" aria-hidden="true" tabindex="-1"></a>    c<span class="op">.</span><span class="at">blue</span>[<span class="st">"w"</span>] <span class="op">=</span> [<span class="st">"blue"</span><span class="op">,</span> <span class="st">"white"</span>]</span>
<span id="cb15-14"><a href="#cb15-14" aria-hidden="true" tabindex="-1"></a>    c<span class="op">.</span><span class="at">blue</span>[<span class="st">"n"</span>] <span class="op">=</span> [<span class="st">"grey"</span><span class="op">,</span> <span class="st">"grey"</span>]</span>
<span id="cb15-15"><a href="#cb15-15" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb15-16"><a href="#cb15-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-17"><a href="#cb15-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-18"><a href="#cb15-18" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> c</span>
<span id="cb15-19"><a href="#cb15-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-20"><a href="#cb15-20" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-15" data-nodetype="declaration">

</div>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="two-or-more-events" class="level2">
<h2 class="anchored" data-anchor-id="two-or-more-events">Two or more events</h2>
<p>In the previous example we were only making one selection, but the things we were selecting from had two features: The circles had a <strong>colour</strong> and they could have a <strong>dot</strong> (or not). But sometimes we want to deal with two or more selections. A simple example of this is when we flip coins multiple times. For example, if we flip a coin three times, we might want to work out the probability of getting, for example, <strong>Heads</strong>, then <strong>Tails</strong>, and then <strong>Heads</strong> again.</p>
<p>When we have a problem like this, we can’t just <strong>add</strong> up the probabilities. If we did, then we’d get <span class="math inline">\(\frac{1}{2}\)</span> + <span class="math inline">\(\frac{1}{2}\)</span> + <span class="math inline">\(\frac{1}{2}\)</span> = <span class="math inline">\(\frac{3}{2}\)</span>. But, remember, probabilities have to be between 0 and 1, so obviously this answer is wrong.</p>
<p>Before we get to how to work it out mathematically, we’ll just work it out by counting. In <a href="#fig-sequences">Figure&nbsp;1</a>, we can see the possible sequences of events if we flip a coin a particular number of times. Set the slider to 3 to see what happens if we flip the coin 3 times. In <a href="#fig-sequences">Figure&nbsp;1</a> the black circles mean getting Heads, and the white circles mean getting Tails. Now just count up how many sequences go Black, White, Black. And now count up how many sequences there are in total. And that’s the probability of getting Heads, Tails, Heads in three coin flips.</p>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb16" data-startfrom="1" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>viewof sequences <span class="op">=</span> {</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> div <span class="op">=</span> <span class="bu">document</span><span class="op">.</span><span class="fu">createElement</span>(<span class="st">"div"</span>)<span class="op">;</span></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>  div<span class="op">.</span><span class="at">value</span> <span class="op">=</span> <span class="kw">new</span> vega<span class="op">.</span><span class="fu">View</span>(parsedSpec)<span class="op">.</span><span class="fu">initialize</span>(div)<span class="op">.</span><span class="fu">run</span>()<span class="op">;</span></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> div<span class="op">;</span></span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div id="fig-sequences" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<div id="ojs-cell-16" data-nodetype="declaration">

</div>
<figcaption class="figure-caption">Figure&nbsp;1: Possible sequences after <span><span id="ojs-element-id-1"></span></span> coin flips</figcaption>
</figure>
</div>
</div>
<div class="cell panel-input card bg-light p-2" width="100%">
<div class="sourceCode cell-code hidden" id="cb17" data-startfrom="2" data-source-offset="-0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 1;"><span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>viewof coins <span class="op">=</span> htl<span class="op">.</span><span class="fu">html</span><span class="vs">`&lt;input style="width:300px" type="range" id="coins" min="1" max="7" value="1" class="form-range"&gt;`</span></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>coins_label <span class="op">=</span> htl<span class="op">.</span><span class="fu">html</span><span class="vs">`&lt;label for="coins" class= "form-label" width="100%"&gt;Number of coin flips: </span><span class="sc">${</span></span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>  coins <span class="op">-</span> <span class="dv">1</span></span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a><span class="sc">}</span><span class="vs">&lt;/label&gt;`</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-17-1" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-17-2" data-nodetype="declaration">

</div>
</div>
</div>
</div>
<p>If you don’t want to count, and you just want to work it out mathematically, then you can do this by just multiplying together the probability for each of the event. Doing this gives us the following: <span class="math inline">\(\frac{1}{2}\)</span> × <span class="math inline">\(\frac{1}{2}\)</span> × <span class="math inline">\(\frac{1}{2}\)</span> = <span class="math inline">\(\frac{1}{8}\)</span>.</p>
</section>
<section id="independence-and-non-independence" class="level2">
<h2 class="anchored" data-anchor-id="independence-and-non-independence">Independence and non-independence</h2>
<p>The coin flipping example, the <strong>three flips</strong> are independent. <strong>Independent</strong> means that, for example, the probability of getting Heads/Tails on the second flip doesn’t change depending on what you get on the first flip. This means that if I were to ask you to work out the probability of <em>getting heads on the second flip</em> you answer wouldn’t change if I told you what I got on the first flip.</p>
<p>But it is often the case the finding out a bit of information does change your probability calculation. To see how, let’s change things up a bit. Let’s say that we’re going to roll a dice. But instead of just rolling a dice, we’ll first <strong>select</strong> one of two dice. The set up is as follows: First, pick either a <strong>20-sided</strong> dice (D-20) or a <strong>6-sided</strong> dice (D-6). Second, roll the dice.</p>
<p>Unlike the coin flip example, where knowing what happened on the first flip won’t change how you calculate the probability for the second flip, knowing whether I picked a D-6 or D-20 will change your calculations. For example, the probability of rolling a <strong>20</strong> will depend on which dice I pick in the first step. If I told you that I picked a D-6, then the probability that I rolled a <strong>20</strong> would be 0, because it would be impossible! If told you that I picked a D-20, then the probability that I rolled a <strong>20</strong> would be <span class="math inline">\(\frac{1}{20}\)</span>.</p>
<p>In a situation like this, we say that the probability of rolling a <strong>20</strong> is <strong>conditional</strong> on the selection in the first step.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Conditional probability <em>notation</em>.
</div>
</div>
<div class="callout-body-container callout-body">
<p>We deal with probability of one event that is conditional on other event, then we call this a <strong>conditional probability</strong>. There is a special notation for this. Using the dice roll example above, we’d use <span class="math inline">\(P(\mathrm{Roll\ 20})\)</span> to refer to the probability of rolling a <strong>20</strong>. And we’d use <span class="math inline">\(P(\mathrm{Pick\ 6-sided})\)</span> to refer to the probability of selecting the <strong>6-sided</strong> dice.</p>
<p>If wanted to refer to the probability of <em>rolling a 20</em> <strong>given that</strong> (conditional on) we selected a <em>6-sided</em> dice then we’d use the following notation:</p>
<p><span class="math display">\[P(\mathrm{Roll\ 20}|\mathrm{Pick\ 6-sided})\]</span></p>
<p>The <span class="math inline">\(|\)</span> is read as “conditional on” or “given that”.</p>
</div>
</div>
</section>
<section id="working-with-conditional-probabilities" class="level2">
<h2 class="anchored" data-anchor-id="working-with-conditional-probabilities">Working with conditional probabilities</h2>
<p>We often encounter conditional probabilities in every day life. However, reasoning about conditional probabilities can be difficult and as a result people make a lot of mistakes when dealing with them.</p>
<p>The most common mistake that you’ll encounter is the confusion being P(A|B) and P(B|A). Or, as in the dice example, P(Roll 20 | Pick 20-sided) and P(Pick 20-sided | Roll 20). We know from above that P(Roll 20 | Pick 20-sided) is <span class="math inline">\(\frac{1}{20}\)</span>. But what is the probability of P(Pick 20-sided | Roll 20). In our scenario, where we could either of rolled a D-20 or a D-6, then given the fact that we rolled a 20, it must have been the D-20 that we rolled. So P(Pick 20-sided | Roll 20) must be 1!</p>
<p>The other typical confusion is confusing the condition probabilities P(A|B) and P(B|A) for the <em>unconditional probabilities</em> P(A) and P(B). To see this problem with this, consider the following statement:</p>
<blockquote class="blockquote">
<p>What is the probability that a randomly selected person lives in London?</p>
</blockquote>
<p>There’s about 9 Billion people in the world and only 9 Million of them live in London. So the probability is pretty low at only 0.1%. But now consider this statement:</p>
<blockquote class="blockquote">
<p>What is the probability that a randomly selected person lives in London <strong>given</strong> that the person’s names is King Charles III?</p>
</blockquote>
<p>The answer to this is obviously 1, because King Charles III lives in London. So, conditional on the randomly selected person being King Charles III then that person must live in London.</p>
<p>In the first statement we’re working out P(Lives in London) and in the second we’re working P(Lives in London | Is King Charles). We could also work out P(Is King Charles | Lives in London). There’s 9 Million people in London but only 1 of them is King Charles. So the probably for this is very small at less than 0.0001%!</p>
<p>There’s a mathematical formula that relates P(A|B) to P(B|A). This formula is known as <strong>Bayes theorem</strong> and it’s incredibly useful for helping us work out the probability of something once we’ve been given a new bit of information.</p>
</section>
<section id="bayes-theorem" class="level2">
<h2 class="anchored" data-anchor-id="bayes-theorem">Bayes theorem</h2>
<p>The classic example that is usually used to introduce Bayes theorem is a problem like the following:</p>
<p>There is a test for an illness. The test has the following properties.</p>
<ol type="1">
<li><p>About 80% of people that <strong>actually have the illness</strong> will test positive.</p></li>
<li><p>Only about ~5% of people that <strong>don’t have the illness</strong> will test positive</p></li>
</ol>
<p>Somebody, who may be sick or healthy, takes the test and tests positive. Is that person actually sick?</p>
<p>Before we get to Bayes theorem remember that we can work out probabilities just by counting. So we’ll first try to get an answer to our question that way before we do the maths. We can explore this question in <a href="#exm-sick">Explorable&nbsp;3</a> below.</p>
<div class="callout callout-style-simple callout-tip no-icon">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-body-container">
<div id="exm-sick" class="theorem example">
<p><span class="theorem-title"><strong>Explorable 3 (Is the person sick or healthy?) </strong></span>&nbsp;</p>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb18" data-startfrom="-1" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line -2;"><span id="cb18--1"><a href="#cb18--1" aria-hidden="true" tabindex="-1"></a>viewof figure <span class="op">=</span> <span class="fu">html</span><span class="vs">`</span></span>
<span id="cb18-0"><a href="#cb18-0" aria-hidden="true" tabindex="-1"></a><span class="vs">&lt;svg class="image" xmlns="http://www.w3.org/2000/svg" width="420" height="</span><span class="sc">${</span><span class="dv">320</span><span class="sc">}</span><span class="vs">"&gt;</span></span>
<span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="sc">${</span>[</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>  functions<span class="op">.</span><span class="at">full_grid</span></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">slice</span>(<span class="dv">0</span><span class="op">,</span> _<span class="op">.</span><span class="fu">sum</span>(data<span class="op">.</span><span class="at">g</span><span class="op">.</span><span class="fu">slice</span>(<span class="dv">0</span><span class="op">,</span> <span class="dv">1</span>)))</span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">map</span>((pt) <span class="kw">=&gt;</span></span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>      functions<span class="op">.</span><span class="fu">circle</span>(pt[<span class="dv">0</span>]<span class="op">,</span> pt[<span class="dv">1</span>]<span class="op">,</span> data<span class="op">.</span><span class="at">colours</span>[<span class="dv">0</span>][<span class="dv">0</span>]<span class="op">,</span> data<span class="op">.</span><span class="at">colours</span>[<span class="dv">0</span>][<span class="dv">1</span>])</span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a>    )<span class="op">,</span></span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a>  functions<span class="op">.</span><span class="at">full_grid</span></span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">slice</span>(_<span class="op">.</span><span class="fu">sum</span>(data<span class="op">.</span><span class="at">g</span><span class="op">.</span><span class="fu">slice</span>(<span class="dv">0</span><span class="op">,</span> <span class="dv">1</span>))<span class="op">,</span> _<span class="op">.</span><span class="fu">sum</span>(data<span class="op">.</span><span class="at">g</span><span class="op">.</span><span class="fu">slice</span>(<span class="dv">0</span><span class="op">,</span> <span class="dv">2</span>)))</span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">map</span>((pt) <span class="kw">=&gt;</span></span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a>      functions<span class="op">.</span><span class="fu">circle</span>(pt[<span class="dv">0</span>]<span class="op">,</span> pt[<span class="dv">1</span>]<span class="op">,</span> data<span class="op">.</span><span class="at">colours</span>[<span class="dv">1</span>][<span class="dv">0</span>]<span class="op">,</span> data<span class="op">.</span><span class="at">colours</span>[<span class="dv">1</span>][<span class="dv">1</span>])</span>
<span id="cb18-11"><a href="#cb18-11" aria-hidden="true" tabindex="-1"></a>    )<span class="op">,</span></span>
<span id="cb18-12"><a href="#cb18-12" aria-hidden="true" tabindex="-1"></a>  functions<span class="op">.</span><span class="at">full_grid</span></span>
<span id="cb18-13"><a href="#cb18-13" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">slice</span>(_<span class="op">.</span><span class="fu">sum</span>(data<span class="op">.</span><span class="at">g</span><span class="op">.</span><span class="fu">slice</span>(<span class="dv">0</span><span class="op">,</span> <span class="dv">2</span>))<span class="op">,</span> _<span class="op">.</span><span class="fu">sum</span>(data<span class="op">.</span><span class="at">g</span><span class="op">.</span><span class="fu">slice</span>(<span class="dv">0</span><span class="op">,</span> <span class="dv">3</span>)))</span>
<span id="cb18-14"><a href="#cb18-14" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">map</span>((pt) <span class="kw">=&gt;</span></span>
<span id="cb18-15"><a href="#cb18-15" aria-hidden="true" tabindex="-1"></a>      functions<span class="op">.</span><span class="fu">circle</span>(pt[<span class="dv">0</span>]<span class="op">,</span> pt[<span class="dv">1</span>]<span class="op">,</span> data<span class="op">.</span><span class="at">colours</span>[<span class="dv">2</span>][<span class="dv">0</span>]<span class="op">,</span> data<span class="op">.</span><span class="at">colours</span>[<span class="dv">2</span>][<span class="dv">1</span>])</span>
<span id="cb18-16"><a href="#cb18-16" aria-hidden="true" tabindex="-1"></a>    )<span class="op">,</span></span>
<span id="cb18-17"><a href="#cb18-17" aria-hidden="true" tabindex="-1"></a>  functions<span class="op">.</span><span class="at">full_grid</span></span>
<span id="cb18-18"><a href="#cb18-18" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">slice</span>(_<span class="op">.</span><span class="fu">sum</span>(data<span class="op">.</span><span class="at">g</span><span class="op">.</span><span class="fu">slice</span>(<span class="dv">0</span><span class="op">,</span> <span class="dv">3</span>))<span class="op">,</span> _<span class="op">.</span><span class="fu">sum</span>(data<span class="op">.</span><span class="at">g</span><span class="op">.</span><span class="fu">slice</span>(<span class="dv">0</span><span class="op">,</span> <span class="dv">4</span>)))</span>
<span id="cb18-19"><a href="#cb18-19" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">map</span>((pt) <span class="kw">=&gt;</span></span>
<span id="cb18-20"><a href="#cb18-20" aria-hidden="true" tabindex="-1"></a>      functions<span class="op">.</span><span class="fu">circle</span>(pt[<span class="dv">0</span>]<span class="op">,</span> pt[<span class="dv">1</span>]<span class="op">,</span> data<span class="op">.</span><span class="at">colours</span>[<span class="dv">3</span>][<span class="dv">0</span>]<span class="op">,</span> data<span class="op">.</span><span class="at">colours</span>[<span class="dv">3</span>][<span class="dv">1</span>])</span>
<span id="cb18-21"><a href="#cb18-21" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb18-22"><a href="#cb18-22" aria-hidden="true" tabindex="-1"></a>]<span class="op">.</span><span class="fu">join</span>(<span class="st">""</span>)<span class="sc">}</span></span>
<span id="cb18-23"><a href="#cb18-23" aria-hidden="true" tabindex="-1"></a><span class="vs">&lt;/svg&gt;`</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-18" data-nodetype="declaration">

</div>
</div>
</div>
<p>In this example, the Red circle represent people that are sick and the Green circles represent people that are healthy.</p>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb19" data-startfrom="-1" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line -2;"><span id="cb19--1"><a href="#cb19--1" aria-hidden="true" tabindex="-1"></a><span class="fu">md</span><span class="vs">`</span></span>
<span id="cb19-0"><a href="#cb19-0" aria-hidden="true" tabindex="-1"></a><span class="vs">If a circle has a black dot, then that means the person tested positive for the</span></span>
<span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="vs">disease. I said that 80% of people that actually have the disease will</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a><span class="vs">test positive. Select the option below to *only show the sick people*.</span></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a><span class="vs">Now just count up how many of the Red circles have Black dots. </span></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a><span class="vs">There are </span><span class="sc">${</span>data<span class="op">.</span><span class="at">g</span>[<span class="dv">0</span>] <span class="op">+</span> data<span class="op">.</span><span class="at">g</span>[<span class="dv">1</span>]<span class="sc">}</span><span class="vs"> sick people and </span><span class="sc">${</span>functions<span class="op">.</span><span class="fu">frac</span>(</span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>  data<span class="op">.</span><span class="at">conds</span><span class="op">.</span><span class="at">dot_red</span><span class="op">,</span></span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a>  data<span class="op">.</span><span class="at">g</span>[<span class="dv">0</span>] <span class="op">+</span> data<span class="op">.</span><span class="at">g</span>[<span class="dv">1</span>]</span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a>)<span class="sc">}</span><span class="vs"> or </span><span class="sc">${</span>functions<span class="op">.</span><span class="fu">round3</span>(</span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a>  data<span class="op">.</span><span class="at">conds</span><span class="op">.</span><span class="at">dot_red</span> <span class="op">*</span> <span class="dv">100</span></span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true" tabindex="-1"></a>)<span class="sc">}</span><span class="vs">% of the</span></span>
<span id="cb19-10"><a href="#cb19-10" aria-hidden="true" tabindex="-1"></a><span class="vs">sick people test **positive**`</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-19" data-nodetype="expression">

</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb20" data-startfrom="-1" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line -2;"><span id="cb20--1"><a href="#cb20--1" aria-hidden="true" tabindex="-1"></a><span class="fu">md</span><span class="vs">`</span></span>
<span id="cb20-0"><a href="#cb20-0" aria-hidden="true" tabindex="-1"></a><span class="vs">Next we want to count up the healthy people that test positive.</span></span>
<span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="vs">Select the option below to *only show the healthy people*.</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="vs">Now just count up how many of the Green circles have Black Dots.</span></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a><span class="vs">There are </span><span class="sc">${</span>data<span class="op">.</span><span class="at">g</span>[<span class="dv">2</span>] <span class="op">+</span> data<span class="op">.</span><span class="at">g</span>[<span class="dv">3</span>]<span class="sc">}</span><span class="vs"> healthly people, and only</span></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a><span class="vs"> </span><span class="sc">${</span>functions<span class="op">.</span><span class="fu">frac</span>(</span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>  data<span class="op">.</span><span class="at">conds</span><span class="op">.</span><span class="at">dot_green</span><span class="op">,</span></span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a>  data<span class="op">.</span><span class="at">g</span>[<span class="dv">2</span>] <span class="op">+</span> data<span class="op">.</span><span class="at">g</span>[<span class="dv">3</span>]</span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a>)<span class="sc">}</span><span class="vs"> or </span><span class="sc">${</span>functions<span class="op">.</span><span class="fu">round3</span>(</span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a>  data<span class="op">.</span><span class="at">conds</span><span class="op">.</span><span class="at">dot_green</span> <span class="op">*</span> <span class="dv">100</span></span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a>)<span class="sc">}</span><span class="vs">% of healthy people test **postive**.</span></span>
<span id="cb20-10"><a href="#cb20-10" aria-hidden="true" tabindex="-1"></a><span class="vs"> `</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-20" data-nodetype="expression">

</div>
</div>
</div>
<p>This matches the information I gave you about how the test works. But what we really want to know is, <em>given somebody tests positive, what’s the probability that they’re sick?</em>. To work this out, we need to focus our attention only on the people that test positive. Select the option below to <em>only show the positive tests</em>.</p>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb21" data-startfrom="-1" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line -2;"><span id="cb21--1"><a href="#cb21--1" aria-hidden="true" tabindex="-1"></a><span class="fu">md</span><span class="vs">`</span></span>
<span id="cb21-0"><a href="#cb21-0" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="vs">There are </span><span class="sc">${</span>data<span class="op">.</span><span class="at">g</span>[<span class="dv">1</span>] <span class="op">+</span> data<span class="op">.</span><span class="at">g</span>[<span class="dv">2</span>]<span class="sc">}</span><span class="vs"> people that test positive. Of these </span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a><span class="sc">${</span>functions<span class="op">.</span><span class="fu">frac</span>(</span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>  data<span class="op">.</span><span class="at">g</span>[<span class="dv">1</span>] <span class="op">/</span> (data<span class="op">.</span><span class="at">g</span>[<span class="dv">1</span>] <span class="op">+</span> data<span class="op">.</span><span class="at">g</span>[<span class="dv">2</span>])<span class="op">,</span></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>  data<span class="op">.</span><span class="at">g</span>[<span class="dv">1</span>] <span class="op">+</span> data<span class="op">.</span><span class="at">g</span>[<span class="dv">2</span>]</span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>)<span class="sc">}</span><span class="vs"> or </span><span class="sc">${</span>functions<span class="op">.</span><span class="fu">round3</span>(</span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a>  (data<span class="op">.</span><span class="at">g</span>[<span class="dv">1</span>] <span class="op">/</span> (data<span class="op">.</span><span class="at">g</span>[<span class="dv">1</span>] <span class="op">+</span> data<span class="op">.</span><span class="at">g</span>[<span class="dv">2</span>])) <span class="op">*</span> <span class="dv">100</span></span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a>)<span class="sc">}</span><span class="vs">% are sick and </span><span class="sc">${</span>functions<span class="op">.</span><span class="fu">frac</span>(</span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a>  data<span class="op">.</span><span class="at">g</span>[<span class="dv">2</span>] <span class="op">/</span> (data<span class="op">.</span><span class="at">g</span>[<span class="dv">1</span>] <span class="op">+</span> data<span class="op">.</span><span class="at">g</span>[<span class="dv">2</span>])<span class="op">,</span></span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a>  data<span class="op">.</span><span class="at">g</span>[<span class="dv">1</span>] <span class="op">+</span> data<span class="op">.</span><span class="at">g</span>[<span class="dv">2</span>]</span>
<span id="cb21-10"><a href="#cb21-10" aria-hidden="true" tabindex="-1"></a>)<span class="sc">}</span><span class="vs"> or </span><span class="sc">${</span>functions<span class="op">.</span><span class="fu">round3</span>((data<span class="op">.</span><span class="at">g</span>[<span class="dv">2</span>] <span class="op">/</span> (data<span class="op">.</span><span class="at">g</span>[<span class="dv">1</span>] <span class="op">+</span> data<span class="op">.</span><span class="at">g</span>[<span class="dv">2</span>])) <span class="op">*</span> <span class="dv">100</span>)<span class="sc">}</span><span class="vs">%</span></span>
<span id="cb21-11"><a href="#cb21-11" aria-hidden="true" tabindex="-1"></a><span class="vs">are healthy.</span></span>
<span id="cb21-12"><a href="#cb21-12" aria-hidden="true" tabindex="-1"></a><span class="vs">This means that a person that tests **positive** is more likely to be </span><span class="sc">${</span></span>
<span id="cb21-13"><a href="#cb21-13" aria-hidden="true" tabindex="-1"></a>  data<span class="op">.</span><span class="at">g</span>[<span class="dv">1</span>] <span class="op">/</span> (data<span class="op">.</span><span class="at">g</span>[<span class="dv">1</span>] <span class="op">+</span> data<span class="op">.</span><span class="at">g</span>[<span class="dv">2</span>]) <span class="op">&gt;</span> data<span class="op">.</span><span class="at">g</span>[<span class="dv">2</span>] <span class="op">/</span> (data<span class="op">.</span><span class="at">g</span>[<span class="dv">1</span>] <span class="op">+</span> data<span class="op">.</span><span class="at">g</span>[<span class="dv">2</span>])</span>
<span id="cb21-14"><a href="#cb21-14" aria-hidden="true" tabindex="-1"></a>    <span class="op">?</span> <span class="st">"**sick**"</span></span>
<span id="cb21-15"><a href="#cb21-15" aria-hidden="true" tabindex="-1"></a>    <span class="op">:</span> <span class="st">"**healthy!**"</span></span>
<span id="cb21-16"><a href="#cb21-16" aria-hidden="true" tabindex="-1"></a><span class="sc">}</span><span class="vs">`</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-21" data-nodetype="expression">

</div>
</div>
</div>
<div class="cell panel-input card bg-light p-2">
<div class="sourceCode cell-code hidden" id="cb22" data-startfrom="0" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line -1;"><span id="cb22-0"><a href="#cb22-0" aria-hidden="true" tabindex="-1"></a>viewof positive_tests <span class="op">=</span> Inputs<span class="op">.</span><span class="fu">radio</span>(</span>
<span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>  <span class="kw">new</span> <span class="bu">Map</span>([</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>    [<span class="st">"All people"</span><span class="op">,</span> <span class="st">"all"</span>]<span class="op">,</span></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>    [<span class="st">"Only sick people"</span><span class="op">,</span> <span class="st">"sick"</span>]<span class="op">,</span></span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>    [<span class="st">"Only healthy people"</span><span class="op">,</span> <span class="st">"health"</span>]<span class="op">,</span></span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>    [<span class="st">"Only positive tests"</span><span class="op">,</span> <span class="st">"pos"</span>]</span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a>  ])<span class="op">,</span></span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a>  { <span class="dt">value</span><span class="op">:</span> <span class="st">"all"</span><span class="op">,</span> <span class="dt">label</span><span class="op">:</span> <span class="st">"Show"</span> }</span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-22" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb23" data-startfrom="-1" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line -2;"><span id="cb23--1"><a href="#cb23--1" aria-hidden="true" tabindex="-1"></a>{</span>
<span id="cb23-0"><a href="#cb23-0" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span>(data<span class="op">.</span><span class="at">conds</span><span class="op">.</span><span class="at">red</span> <span class="op">&lt;</span> <span class="fl">0.5</span>) {</span>
<span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="fu">md</span><span class="vs">` This might seem like an odd conclusion! But it's right </span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a><span class="vs">    there in the circles and dots that you counted. To make sense of</span></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a><span class="vs">    it, I'll give you another key bit of information`</span></span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> <span class="fu">md</span><span class="vs">``</span></span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-23" data-nodetype="expression">

</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb24" data-startfrom="-1" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line -2;"><span id="cb24--1"><a href="#cb24--1" aria-hidden="true" tabindex="-1"></a><span class="fu">md</span><span class="vs">`The key bit of information I didn't tell you is that </span></span>
<span id="cb24-0"><a href="#cb24-0" aria-hidden="true" tabindex="-1"></a><span class="vs">in this example, the disease is **</span><span class="sc">${</span></span>
<span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>  data<span class="op">.</span><span class="at">conds</span><span class="op">.</span><span class="at">red</span> <span class="op">&gt;</span> <span class="fl">0.5</span> <span class="op">?</span> <span class="st">"COMMON"</span> <span class="op">:</span> <span class="st">"RARE"</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a><span class="sc">}</span><span class="vs">** with an incidence of </span><span class="sc">${</span>data<span class="op">.</span><span class="at">conds</span><span class="op">.</span><span class="at">red</span> <span class="op">*</span> <span class="dv">100</span><span class="sc">}</span><span class="vs">%.</span></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a><span class="vs">But we can change this. Use the selection below to change whether the </span></span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a><span class="vs">disease is **COMMON** or **RARE** and then read through the</span></span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a><span class="vs">example again.</span></span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a><span class="vs">`</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-24" data-nodetype="expression">

</div>
</div>
</div>
<div class="cell panel-input card bg-light p-2">
<div class="sourceCode cell-code hidden" id="cb25" data-startfrom="0" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line -1;"><span id="cb25-0"><a href="#cb25-0" aria-hidden="true" tabindex="-1"></a>viewof incidence <span class="op">=</span> Inputs<span class="op">.</span><span class="fu">radio</span>(</span>
<span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>  <span class="kw">new</span> <span class="bu">Map</span>([</span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>    [<span class="st">"Common"</span><span class="op">,</span> <span class="st">"common"</span>]<span class="op">,</span></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>    [<span class="st">"Rare"</span><span class="op">,</span> <span class="st">"rare"</span>]</span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>  ])<span class="op">,</span></span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a>  { <span class="dt">value</span><span class="op">:</span> <span class="st">"rare"</span><span class="op">,</span> <span class="dt">label</span><span class="op">:</span> <span class="st">"Incidence"</span> }</span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-25" data-nodetype="declaration">

</div>
</div>
</div>
<p>Note that when you change the disease from <strong>RARE</strong> to <strong>COMMON</strong> the facts about the test don’t change. It’s still the case that 80% of sick people will get a positive test and about 5% of healthy people will get a positive test. But what we can can conclude from a positive test (whether a person receiving a positive test is sick or healthy) changes <strong>dramatically</strong> between the two examples. In one we conclude that’s it’s more likely that the person is healthy and in the other we conclude that it’s more likely that the person is sick.</p>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb26" data-startfrom="-1" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line -2;"><span id="cb26--1"><a href="#cb26--1" aria-hidden="true" tabindex="-1"></a>functions <span class="op">=</span> {</span>
<span id="cb26-0"><a href="#cb26-0" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> {</span>
<span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>    <span class="dt">circle</span><span class="op">:</span> (x<span class="op">,</span> y<span class="op">,</span> fill<span class="op">,</span> stroke) <span class="kw">=&gt;</span> {</span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>      <span class="cf">return</span> <span class="vs">`&lt;circle cx="</span><span class="sc">${</span>x<span class="sc">}</span><span class="vs">" cy="</span><span class="sc">${</span>y<span class="sc">}</span><span class="vs">" r="14" stroke="none" fill="</span><span class="sc">${</span>fill<span class="sc">}</span><span class="vs">" stroke-width="0"&gt;&lt;/circle&gt;</span></span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a><span class="vs">&lt;circle cx="</span><span class="sc">${</span>x<span class="sc">}</span><span class="vs">" cy="</span><span class="sc">${</span>y<span class="sc">}</span><span class="vs">" r="5" stroke="</span><span class="sc">${</span>fill<span class="sc">}</span><span class="vs">" fill="</span><span class="sc">${</span>stroke<span class="sc">}</span><span class="vs">" stroke-width="0"&gt;&lt;/circle&gt;`</span><span class="op">;</span></span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a>    }<span class="op">,</span></span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">full_grid</span><span class="op">:</span> _<span class="op">.</span><span class="fu">flatten</span>(</span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a>      _<span class="op">.</span><span class="fu">range</span>(<span class="dv">10</span>)<span class="op">.</span><span class="fu">map</span>((y) <span class="kw">=&gt;</span></span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a>        _<span class="op">.</span><span class="fu">range</span>(<span class="dv">10</span>)</span>
<span id="cb26-8"><a href="#cb26-8" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">map</span>((x) <span class="kw">=&gt;</span> <span class="dv">30</span> <span class="op">*</span> (x <span class="op">+</span> <span class="dv">1</span>))</span>
<span id="cb26-9"><a href="#cb26-9" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">map</span>((x) <span class="kw">=&gt;</span> [x<span class="op">,</span> <span class="dv">30</span> <span class="op">*</span> (y <span class="op">+</span> <span class="dv">1</span>)])</span>
<span id="cb26-10"><a href="#cb26-10" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb26-11"><a href="#cb26-11" aria-hidden="true" tabindex="-1"></a>    )<span class="op">,</span></span>
<span id="cb26-12"><a href="#cb26-12" aria-hidden="true" tabindex="-1"></a>    <span class="dt">round3</span><span class="op">:</span> (x) <span class="kw">=&gt;</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">round</span>(x <span class="op">*</span> <span class="dv">1000</span>) <span class="op">/</span> <span class="dv">1000</span><span class="op">,</span></span>
<span id="cb26-13"><a href="#cb26-13" aria-hidden="true" tabindex="-1"></a>    <span class="dt">frac</span><span class="op">:</span> (decimal<span class="op">,</span> den) <span class="kw">=&gt;</span> {</span>
<span id="cb26-14"><a href="#cb26-14" aria-hidden="true" tabindex="-1"></a>      <span class="kw">const</span> n <span class="op">=</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">round</span>(decimal <span class="op">*</span> den)<span class="op">;</span></span>
<span id="cb26-15"><a href="#cb26-15" aria-hidden="true" tabindex="-1"></a>      <span class="cf">return</span> <span class="fu">md</span><span class="vs">`</span><span class="sc">${</span><span class="fu">tex</span><span class="vs">`</span><span class="sc">\f</span><span class="vs">rac{</span><span class="sc">${</span>n<span class="sc">}</span><span class="vs">}{</span><span class="sc">${</span>den<span class="sc">}</span><span class="vs">}`</span><span class="sc">}</span><span class="vs">`</span><span class="op">;</span></span>
<span id="cb26-16"><a href="#cb26-16" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb26-17"><a href="#cb26-17" aria-hidden="true" tabindex="-1"></a>  }<span class="op">;</span></span>
<span id="cb26-18"><a href="#cb26-18" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-26" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb27" data-startfrom="-1" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line -2;"><span id="cb27--1"><a href="#cb27--1" aria-hidden="true" tabindex="-1"></a>data <span class="op">=</span> {</span>
<span id="cb27-0"><a href="#cb27-0" aria-hidden="true" tabindex="-1"></a>  <span class="kw">let</span> proportions <span class="op">=</span> incidence <span class="op">===</span> <span class="st">"rare"</span> <span class="op">?</span> [<span class="dv">5</span><span class="op">,</span> <span class="dv">95</span>] <span class="op">:</span> [<span class="dv">80</span><span class="op">,</span> <span class="dv">20</span>]<span class="op">;</span></span>
<span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>  <span class="kw">let</span> percentages <span class="op">=</span> incidence <span class="op">===</span> <span class="st">"rare"</span> <span class="op">?</span> [<span class="dv">4</span> <span class="op">/</span> <span class="dv">5</span><span class="op">,</span> <span class="dv">1</span> <span class="op">/</span> <span class="dv">20</span>] <span class="op">:</span> [<span class="dv">8</span> <span class="op">/</span> <span class="dv">10</span><span class="op">,</span> <span class="dv">6</span> <span class="op">/</span> <span class="dv">90</span>]<span class="op">;</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>  <span class="kw">let</span> g <span class="op">=</span> [</span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>    <span class="bu">Math</span><span class="op">.</span><span class="fu">round</span>(proportions[<span class="dv">0</span>] <span class="op">*</span> (<span class="dv">1</span> <span class="op">-</span> percentages[<span class="dv">0</span>]))<span class="op">,</span></span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a>    <span class="bu">Math</span><span class="op">.</span><span class="fu">round</span>(proportions[<span class="dv">0</span>] <span class="op">*</span> percentages[<span class="dv">0</span>])<span class="op">,</span></span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a>    <span class="bu">Math</span><span class="op">.</span><span class="fu">round</span>(proportions[<span class="dv">1</span>] <span class="op">*</span> percentages[<span class="dv">1</span>])<span class="op">,</span></span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a>    <span class="bu">Math</span><span class="op">.</span><span class="fu">round</span>(proportions[<span class="dv">1</span>] <span class="op">*</span> (<span class="dv">1</span> <span class="op">-</span> percentages[<span class="dv">1</span>]))</span>
<span id="cb27-7"><a href="#cb27-7" aria-hidden="true" tabindex="-1"></a>  ]<span class="op">;</span></span>
<span id="cb27-8"><a href="#cb27-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-9"><a href="#cb27-9" aria-hidden="true" tabindex="-1"></a>  <span class="kw">let</span> all <span class="op">=</span> [</span>
<span id="cb27-10"><a href="#cb27-10" aria-hidden="true" tabindex="-1"></a>    [<span class="st">"red"</span><span class="op">,</span> <span class="st">"red"</span>]<span class="op">,</span></span>
<span id="cb27-11"><a href="#cb27-11" aria-hidden="true" tabindex="-1"></a>    [<span class="st">"red"</span><span class="op">,</span> <span class="st">"black"</span>]<span class="op">,</span></span>
<span id="cb27-12"><a href="#cb27-12" aria-hidden="true" tabindex="-1"></a>    [<span class="st">"green"</span><span class="op">,</span> <span class="st">"black"</span>]<span class="op">,</span></span>
<span id="cb27-13"><a href="#cb27-13" aria-hidden="true" tabindex="-1"></a>    [<span class="st">"green"</span><span class="op">,</span> <span class="st">"green"</span>]</span>
<span id="cb27-14"><a href="#cb27-14" aria-hidden="true" tabindex="-1"></a>  ]<span class="op">;</span></span>
<span id="cb27-15"><a href="#cb27-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-16"><a href="#cb27-16" aria-hidden="true" tabindex="-1"></a>  <span class="kw">let</span> pos <span class="op">=</span> [</span>
<span id="cb27-17"><a href="#cb27-17" aria-hidden="true" tabindex="-1"></a>    [<span class="st">"white"</span><span class="op">,</span> <span class="st">"white"</span>]<span class="op">,</span></span>
<span id="cb27-18"><a href="#cb27-18" aria-hidden="true" tabindex="-1"></a>    [<span class="st">"red"</span><span class="op">,</span> <span class="st">"black"</span>]<span class="op">,</span></span>
<span id="cb27-19"><a href="#cb27-19" aria-hidden="true" tabindex="-1"></a>    [<span class="st">"green"</span><span class="op">,</span> <span class="st">"black"</span>]<span class="op">,</span></span>
<span id="cb27-20"><a href="#cb27-20" aria-hidden="true" tabindex="-1"></a>    [<span class="st">"white"</span><span class="op">,</span> <span class="st">"white"</span>]</span>
<span id="cb27-21"><a href="#cb27-21" aria-hidden="true" tabindex="-1"></a>  ]<span class="op">;</span></span>
<span id="cb27-22"><a href="#cb27-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-23"><a href="#cb27-23" aria-hidden="true" tabindex="-1"></a>  <span class="kw">let</span> sick <span class="op">=</span> [</span>
<span id="cb27-24"><a href="#cb27-24" aria-hidden="true" tabindex="-1"></a>    [<span class="st">"red"</span><span class="op">,</span> <span class="st">"red"</span>]<span class="op">,</span></span>
<span id="cb27-25"><a href="#cb27-25" aria-hidden="true" tabindex="-1"></a>    [<span class="st">"red"</span><span class="op">,</span> <span class="st">"black"</span>]<span class="op">,</span></span>
<span id="cb27-26"><a href="#cb27-26" aria-hidden="true" tabindex="-1"></a>    [<span class="st">"white"</span><span class="op">,</span> <span class="st">"white"</span>]<span class="op">,</span></span>
<span id="cb27-27"><a href="#cb27-27" aria-hidden="true" tabindex="-1"></a>    [<span class="st">"white"</span><span class="op">,</span> <span class="st">"white"</span>]</span>
<span id="cb27-28"><a href="#cb27-28" aria-hidden="true" tabindex="-1"></a>  ]</span>
<span id="cb27-29"><a href="#cb27-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-30"><a href="#cb27-30" aria-hidden="true" tabindex="-1"></a>  <span class="kw">let</span> health <span class="op">=</span> [</span>
<span id="cb27-31"><a href="#cb27-31" aria-hidden="true" tabindex="-1"></a>    [<span class="st">"white"</span><span class="op">,</span> <span class="st">"white"</span>]<span class="op">,</span></span>
<span id="cb27-32"><a href="#cb27-32" aria-hidden="true" tabindex="-1"></a>    [<span class="st">"white"</span><span class="op">,</span> <span class="st">"white"</span>]<span class="op">,</span></span>
<span id="cb27-33"><a href="#cb27-33" aria-hidden="true" tabindex="-1"></a>    [<span class="st">"green"</span><span class="op">,</span> <span class="st">"black"</span>]<span class="op">,</span></span>
<span id="cb27-34"><a href="#cb27-34" aria-hidden="true" tabindex="-1"></a>    [<span class="st">"green"</span><span class="op">,</span> <span class="st">"green"</span>]</span>
<span id="cb27-35"><a href="#cb27-35" aria-hidden="true" tabindex="-1"></a>  ]<span class="op">;</span></span>
<span id="cb27-36"><a href="#cb27-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-37"><a href="#cb27-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-38"><a href="#cb27-38" aria-hidden="true" tabindex="-1"></a>  <span class="kw">let</span> colors <span class="op">=</span> {<span class="st">"all"</span> <span class="op">:</span> all<span class="op">,</span> <span class="st">"sick"</span><span class="op">:</span> sick<span class="op">,</span> <span class="st">"pos"</span><span class="op">:</span> pos<span class="op">,</span> <span class="st">"health"</span><span class="op">:</span> health}</span>
<span id="cb27-39"><a href="#cb27-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-40"><a href="#cb27-40" aria-hidden="true" tabindex="-1"></a>  <span class="kw">let</span> conds <span class="op">=</span> {</span>
<span id="cb27-41"><a href="#cb27-41" aria-hidden="true" tabindex="-1"></a>    <span class="dt">red_dot</span><span class="op">:</span> g[<span class="dv">1</span>] <span class="op">/</span> (g[<span class="dv">1</span>] <span class="op">+</span> g[<span class="dv">2</span>])<span class="op">,</span></span>
<span id="cb27-42"><a href="#cb27-42" aria-hidden="true" tabindex="-1"></a>    <span class="dt">dot_red</span><span class="op">:</span> g[<span class="dv">1</span>] <span class="op">/</span> (g[<span class="dv">1</span>] <span class="op">+</span> g[<span class="dv">0</span>])<span class="op">,</span></span>
<span id="cb27-43"><a href="#cb27-43" aria-hidden="true" tabindex="-1"></a>    <span class="dt">red</span><span class="op">:</span> (g[<span class="dv">0</span>] <span class="op">+</span> g[<span class="dv">1</span>]) <span class="op">/</span> _<span class="op">.</span><span class="fu">sum</span>(g)<span class="op">,</span></span>
<span id="cb27-44"><a href="#cb27-44" aria-hidden="true" tabindex="-1"></a>    <span class="dt">dot</span><span class="op">:</span> (g[<span class="dv">1</span>] <span class="op">+</span> g[<span class="dv">2</span>]) <span class="op">/</span> _<span class="op">.</span><span class="fu">sum</span>(g)<span class="op">,</span></span>
<span id="cb27-45"><a href="#cb27-45" aria-hidden="true" tabindex="-1"></a>    <span class="dt">green</span><span class="op">:</span> <span class="dv">1</span> <span class="op">-</span> (g[<span class="dv">0</span>] <span class="op">+</span> g[<span class="dv">1</span>]) <span class="op">/</span> _<span class="op">.</span><span class="fu">sum</span>(g)<span class="op">,</span></span>
<span id="cb27-46"><a href="#cb27-46" aria-hidden="true" tabindex="-1"></a>    <span class="dt">dot_green</span><span class="op">:</span> g[<span class="dv">2</span>] <span class="op">/</span> (g[<span class="dv">3</span>] <span class="op">+</span> g[<span class="dv">2</span>])</span>
<span id="cb27-47"><a href="#cb27-47" aria-hidden="true" tabindex="-1"></a>  }<span class="op">;</span></span>
<span id="cb27-48"><a href="#cb27-48" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-49"><a href="#cb27-49" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> {</span>
<span id="cb27-50"><a href="#cb27-50" aria-hidden="true" tabindex="-1"></a>    <span class="dt">proportions</span><span class="op">:</span> proportions<span class="op">,</span></span>
<span id="cb27-51"><a href="#cb27-51" aria-hidden="true" tabindex="-1"></a>    <span class="dt">percentages</span><span class="op">:</span> percentages<span class="op">,</span></span>
<span id="cb27-52"><a href="#cb27-52" aria-hidden="true" tabindex="-1"></a>    <span class="dt">g</span><span class="op">:</span> g<span class="op">,</span></span>
<span id="cb27-53"><a href="#cb27-53" aria-hidden="true" tabindex="-1"></a>    <span class="dt">conds</span><span class="op">:</span> conds<span class="op">,</span></span>
<span id="cb27-54"><a href="#cb27-54" aria-hidden="true" tabindex="-1"></a>    <span class="dt">colours</span><span class="op">:</span> colors[positive_tests]</span>
<span id="cb27-55"><a href="#cb27-55" aria-hidden="true" tabindex="-1"></a>  }<span class="op">;</span></span>
<span id="cb27-56"><a href="#cb27-56" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-27" data-nodetype="declaration">

</div>
</div>
</div>
</div>
</div>
</div>
<p>Although worked out the answer to our question just by counting the dots, we can also use Bayes theorem to do it. Bayes theorem is given as the <a href="#eq-bayes">Equation&nbsp;2</a>, below:</p>
<p><span id="eq-bayes"><span class="math display">\[P(A|B) = \frac{P(B|A) \times P(A)}{P(B)} \tag{2}\]</span></span></p>
<p>Instead of using <strong>A</strong>s and <strong>B</strong>s, we’ll make it a little more readable by using ✅ to indicate that the person tested positive and 🤮 to indicate that the person is actually sick. It now looks like <a href="#eq-bayes-emoji">Equation&nbsp;3</a>.</p>
<p><span id="eq-bayes-emoji"><span class="math display">\[P(🤮\ |\ ✅) = \frac{P(✅\ |\ 🤮) \times P(🤮)}{P(✅)} \tag{3}\]</span></span></p>
<p><span class="math inline">\(P(✅\ |\ 🤮)\)</span> is the probability that a sick person tests positive. <span class="math inline">\(P(🤮)\)</span> is the incidence of the illness (whether is it common or rare). And <span class="math inline">\(P(✅)\)</span> is the probability of testing positive irrespective of whether you’re sick or healthy. I didn’t tell you this number, but you can work it out using the equation in <a href="#eq-marginal">Equation&nbsp;4</a>.</p>
<p><span id="eq-marginal"><span class="math display">\[P(✅) = P(✅\ |\ 🤮) × P(🤮) + P(✅\ |\ 😁) × P(😁) \tag{4}\]</span></span></p>
<p>Where 😁 means that the person is healthy.</p>
<p>Now we can put numbers to it. In the case where the disease was rare we had the following values:</p>
<ol type="1">
<li>P(😁) = 95/100 (95% of people are healthy)</li>
<li>P(🤮) = 5/100 (5% of people are sick)</li>
<li>P(✅&nbsp;|&nbsp;😁) = 5/95 (5.26% of healthy people test positive)</li>
<li>P(✅&nbsp;|&nbsp;🤮) = 4/5 (80% of sick people test positive)</li>
</ol>
<p>Now we can put those numbers together to work out the value we wanted to know— that is, P(🤮&nbsp;|&nbsp;✅).</p>
<p>You can work it out yourself, and if you do then you’ll get 44.44% just as we did above.</p>
<p>We can also do it for the case where the disease is common. Then we can the following values.</p>
<ol type="1">
<li>P(😁) = 20/100 (20% of people are healthy)</li>
<li>P(🤮) = 80/100 (80% of people are sick)</li>
<li>P(✅&nbsp;|&nbsp;😁) = 1/20 (5% of healthy people test positive)</li>
<li>P(✅&nbsp;|&nbsp;🤮) = 64/80 (80% of sick people test positive)</li>
</ol>
<p>Now we can put those numbers together to work out the value we wanted to know— that is, P(🤮&nbsp;|&nbsp;✅). If you do then you’ll get 98.46% just as we did above.</p>
<p>Reasoning about conditional probabilities can be difficult because people often forget about the P(🤮) part. But if we ignore it can be any to make mistakes, as we saw in the example above. But these kinds of mistakes are common and they can have dangerous consequences. I could a number of examples to show this, but I’ll just pick three.</p>
<section id="errors-in-reasoning-about-conditional-probabilities" class="level3">
<h3 class="anchored" data-anchor-id="errors-in-reasoning-about-conditional-probabilities">Errors in reasoning about conditional probabilities</h3>
<p>You might have the following statistic in the media/online.</p>
<blockquote class="blockquote">
<p>50% of people that die from Covid have been vaccinated</p>
</blockquote>
<p>I’ve seen this figure on social media along with the claim that it <em>shows that the Covid vaccine doesn’t work</em>. Let’s assume that the statistic is accurate. Does this mean that the vaccine doesn’t work?</p>
<p>First, we have to think about what this figure refers to and whether it is what we want to know. If it’s not, then we have to work out what it is that we do what to know.</p>
<p>First, what is this figure? To get this number we’re looking only at the people that have died. It’s a probability <strong>conditional</strong> on the person dying. That means this figure refers to P(Vaccinated | Death). But if we want to know if the vaccine works, then what we actually want to know is, <em>if the person is vaccinated, then what is the probability that they will die</em>. That is, we want to know the probability <strong>conditional</strong> on them being vaccinated, or P(Death | Vaccinated).</p>
<p>So straight away, we know that this 50% probability is not actually the number we want to know. But more importantly, this 50% is perfectly consistent with an effective vaccine if the vaccination rate is high. If the vaccine is effective, but the vaccination rate is low, this this number would be lower. So the 50% doesn’t give us the information we need to make the judgement about whether the vaccine is effective. We’d also need to know the vaccinate rate and the probability of dying if you contract Covid irrespective of your vaccine status.</p>
<p>The next example concerns a policy that has been proposed in the USA. Essentially the policy states that welfare recipients should be drug tests, and their benefits removed if the test comes back positive. But does a positive test mean that the person is actually a drug user? The answer to this question all depends on the rates of drug use among welfare recipients. It turns out that this is actually rather low. So let’s put some numbers to it.</p>
<p>First, we’ll set the properties of the test. We’ll say it’s fairly accurate, so the probability of testing positive given drug use, or P(✅|💉), will be high.</p>
<div class="cell panel-input card bg-light p-2">
<div class="sourceCode cell-code hidden" id="cb28" data-startfrom="0" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line -1;"><span id="cb28-0"><a href="#cb28-0" aria-hidden="true" tabindex="-1"></a>viewof p_d <span class="op">=</span> Inputs<span class="op">.</span><span class="fu">range</span>([<span class="dv">0</span><span class="op">,</span> <span class="dv">1</span>]<span class="op">,</span> {<span class="dt">step</span><span class="op">:</span> <span class="fl">0.01</span><span class="op">,</span> <span class="dt">value</span><span class="op">:</span> <span class="fl">0.99</span><span class="op">,</span> <span class="dt">label</span><span class="op">:</span> <span class="st">"P(✅|💉)"</span>})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-28" data-nodetype="declaration">

</div>
</div>
</div>
<p>And we’ll say that it’s not that common for somebody to test positive if they’re not a drug user. So we can set P(✅|😇) to a low number.</p>
<div class="cell panel-input card bg-light p-2">
<div class="sourceCode cell-code hidden" id="cb29" data-startfrom="0" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line -1;"><span id="cb29-0"><a href="#cb29-0" aria-hidden="true" tabindex="-1"></a>viewof p_n <span class="op">=</span> Inputs<span class="op">.</span><span class="fu">range</span>([<span class="dv">0</span><span class="op">,</span> <span class="dv">1</span>]<span class="op">,</span> {<span class="dt">step</span><span class="op">:</span> <span class="fl">0.05</span><span class="op">,</span> <span class="dt">value</span><span class="op">:</span> <span class="fl">0.05</span><span class="op">,</span> <span class="dt">label</span><span class="op">:</span> <span class="st">"P(✅|😇)"</span>})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-29" data-nodetype="declaration">

</div>
</div>
</div>
<p>Finally, because drug use is not common amongst welfare receipts we’ll set P(💉) to a low number.</p>
<div class="cell panel-input card bg-light p-2">
<div class="sourceCode cell-code hidden" id="cb30" data-startfrom="0" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line -1;"><span id="cb30-0"><a href="#cb30-0" aria-hidden="true" tabindex="-1"></a>viewof d <span class="op">=</span> Inputs<span class="op">.</span><span class="fu">range</span>([<span class="dv">0</span><span class="op">,</span> <span class="dv">1</span>]<span class="op">,</span> {<span class="dt">step</span><span class="op">:</span> <span class="fl">0.01</span><span class="op">,</span> <span class="dt">value</span><span class="op">:</span> <span class="fl">0.01</span><span class="op">,</span> <span class="dt">label</span><span class="op">:</span> <span class="st">"P(💉)"</span>})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-30" data-nodetype="declaration">

</div>
</div>
</div>
<p>With all this information we can work out the number we want to know. That is, P(💉|✅). We’ll use Bayes theorem as follows:</p>
<p><span class="math display">\[P(💉|✅) = \frac{P(✅|💉) × P(💉)}{P(✅)}\]</span></p>
<p>But since I haven’t given you P(✅), we’ll just work it out as follows:</p>
<p><span class="math display">\[P(✅|💉) × P(💉) + P(✅|😇) × (1 - P(💉))\]</span></p>
<p>Or with numbers:</p>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb31" data-startfrom="-1" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line -2;"><span id="cb31--1"><a href="#cb31--1" aria-hidden="true" tabindex="-1"></a><span class="fu">texmd</span><span class="vs">`</span></span>
<span id="cb31-0"><a href="#cb31-0" aria-hidden="true" tabindex="-1"></a><span class="vs">P(✅) = </span><span class="sc">${</span>p_d<span class="sc">}</span><span class="vs"> × </span><span class="sc">${</span>d<span class="sc">}</span><span class="vs"> + </span><span class="sc">${</span>p_n<span class="sc">}</span><span class="vs"> × (1 - </span><span class="sc">${</span>d<span class="sc">}</span><span class="vs">) = </span><span class="sc">${</span><span class="bu">Math</span><span class="op">.</span><span class="fu">round</span>(p_d <span class="op">*</span> d <span class="op">+</span> p_n <span class="op">*</span> (<span class="dv">1</span> <span class="op">-</span> d) <span class="op">*</span> <span class="dv">100</span>)<span class="op">/</span><span class="dv">100</span><span class="sc">}</span></span>
<span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="vs">`</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-31" data-nodetype="expression">

</div>
</div>
</div>
<p>And now the full formula:</p>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb32" data-startfrom="-1" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line -2;"><span id="cb32--1"><a href="#cb32--1" aria-hidden="true" tabindex="-1"></a><span class="fu">texmd</span><span class="vs">`P(💉|✅)=(</span><span class="sc">${</span>p_d<span class="sc">}</span><span class="vs"> × </span><span class="sc">${</span>d<span class="sc">}</span><span class="vs">) ÷ </span><span class="sc">${</span><span class="bu">Math</span><span class="op">.</span><span class="fu">round</span>(p_d <span class="op">*</span> d <span class="op">+</span> p_n <span class="op">*</span> (<span class="dv">1</span> <span class="op">-</span> d) <span class="op">*</span> <span class="dv">100</span>)<span class="op">/</span><span class="dv">100</span><span class="sc">}</span><span class="vs"> = </span></span>
<span id="cb32-0"><a href="#cb32-0" aria-hidden="true" tabindex="-1"></a><span class="sc">${</span><span class="bu">Math</span><span class="op">.</span><span class="fu">round</span>((p_d <span class="op">*</span> d) <span class="op">/</span> (p_d <span class="op">*</span> d <span class="op">+</span> p_n <span class="op">*</span> (<span class="dv">1</span> <span class="op">-</span> d)) <span class="op">*</span> <span class="dv">100</span>)<span class="op">/</span><span class="dv">100</span><span class="sc">}</span></span>
<span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a><span class="vs">This means that given our settings there's only a </span><span class="sc">${</span><span class="bu">Math</span><span class="op">.</span><span class="fu">round</span>((p_d <span class="op">*</span> d) <span class="op">/</span> (p_d <span class="op">*</span> d <span class="op">+</span> p_n <span class="op">*</span> (<span class="dv">1</span> <span class="op">-</span> d)) <span class="op">*</span> <span class="dv">100</span>)<span class="sc">}</span><span class="vs">%</span></span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a><span class="vs">chance that somebody that tests postive for drugs is drug user. Obviously there's</span></span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a><span class="vs">a clear ethical/moral arguments to be made against removing the welfare benefits </span></span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a><span class="vs">from somebody who tests positive for drugs. But if our settings are correct,</span></span>
<span id="cb32-6"><a href="#cb32-6" aria-hidden="true" tabindex="-1"></a><span class="vs">then there's also a clear **mathematical** argument to be made for it being </span></span>
<span id="cb32-7"><a href="#cb32-7" aria-hidden="true" tabindex="-1"></a><span class="vs">a bad idea.</span></span>
<span id="cb32-8"><a href="#cb32-8" aria-hidden="true" tabindex="-1"></a><span class="vs">`</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-32" data-nodetype="expression">

</div>
</div>
</div>
<p>The final argument concerns a (now retracted) paper that was published a few years ago. According to the study, there was no <strong>racial bias</strong> in police shooting. What was the evidence for this claim? The researchers looked at a large sample of police shooting and showed that in this sample of police shootings a higher proportion of victims were White than Black.</p>
<p>This was picked by by the conservative media (e.g., Fox news) to show that organisations like BLM were fighting against a problem that didn’t exist. But is the reasoning correct, and do the data actually show what the authors claim?</p>
<p>As you’ve probably guessed the results certainly don’t support the claim. But why not?</p>
<p>First, let’s look at the data the authors present. I’ll simply it somewhat, so that it’s easier for use to do the calculations, but the general gist is the same. In <a href="#fig-1">Figure&nbsp;2</a> we can see the data they present. These are all the victors of the police shootings. The probability that a person is White (P(White|Shot)) is <span class="math inline">\(\frac{20}{30}\)</span> or 66.67% and the probability that a person is Black (P(Black|Shot)) is <span class="math inline">\(\frac{10}{30}\)</span> or 33.33%. These are the two probabilities that the authors looked at. You’ll notice that they’re actually two <strong>conditional probabilities</strong>. But are they the correct ones?</p>
<div class="cell">
<div class="cell-output-display">
<div id="fig-1" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="slide1.png" class="img-fluid figure-img" style="width:50.0%"></p>
<figcaption class="figure-caption">Figure&nbsp;2: Sample of police shooting. Pink circles correspond to White victims and Black circles to Black victims</figcaption>
</figure>
</div>
</div>
</div>
<p>Let’s add some additional data. In <a href="#fig-2">Figure&nbsp;3</a> we can see all the people that have <em>encounters</em> with the police, but not get shot. Black people are a racial minority in the USA, so we would expect police to encounter police less often on their day-to-day rounds.</p>
<div class="cell">
<div class="cell-output-display">
<div id="fig-2" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="slide2.png" class="img-fluid figure-img" style="width:50.0%"></p>
<figcaption class="figure-caption">Figure&nbsp;3: Sample of all people encountered by the police without getting shot. Pink circles correspond to White people and Black circles to Black people</figcaption>
</figure>
</div>
</div>
</div>
<p>Now let’s put it all together. In <a href="#fig-3">Figure&nbsp;4</a> we’ve just combined the data from <a href="#fig-1">Figure&nbsp;2</a> and <a href="#fig-2">Figure&nbsp;3</a>. This shows all the people that come into contact with police including those people that fall victim to a police shoot (red dot) and those that do not (no dot)</p>
<div class="cell">
<div class="cell-output-display">
<div id="fig-3" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="slide3.png" class="img-fluid figure-img" style="width:50.0%"></p>
<figcaption class="figure-caption">Figure&nbsp;4: Sample of all people encountered by the police. Pink circles correspond to White people and Black circles to Black people. Red dots correspond to shooting victims.</figcaption>
</figure>
</div>
</div>
</div>
<p>With everything on a single plot we can now focus in on the numbers we actually want to know. We want to know, given a person is <em>a particular race</em> what is the probability of them being a victim of a police shooting. That is, we want to know P(Shot | White) and P(Shot | Black), not P(White | Shot) and P(Black | Shot) as reported in the study.</p>
<p>To this, we’ll just focus on people who are Black. We can see this in <a href="#fig-4">Figure&nbsp;5</a>. This allows us to see P(Shot|Black), which gives <span class="math inline">\(\frac{10}{20}\)</span> or 50%.</p>
<div class="cell">
<div class="cell-output-display">
<div id="fig-4" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="slide4.png" class="img-fluid figure-img" style="width:50.0%"></p>
<figcaption class="figure-caption">Figure&nbsp;5: Sample of all Black people encountered by the police. Red dots correspond to shooting victims.</figcaption>
</figure>
</div>
</div>
</div>
<p>Next, we’ll just focus on the people who are White. We can see this in <a href="#fig-5">Figure&nbsp;6</a>. This allows use to see P(Shot|White), which gives <span class="math inline">\(\frac{20}{80}\)</span> or 25%.</p>
<div class="cell">
<div class="cell-output-display">
<div id="fig-5" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="slide5.png" class="img-fluid figure-img" style="width:50.0%"></p>
<figcaption class="figure-caption">Figure&nbsp;6: Sample of all White people encountered by the police. Red dots correspond to shooting victims.</figcaption>
</figure>
</div>
</div>
</div>
<p>Because P(Shot | Black) is higher than P(Shot | White) then this suggests that there is in fact racial bias in police shooting. However, to reach this conclusion I had to make an assumption that wasn’t reported in the paper. I had to assume that people come across more White people than Black people in their daily activities. This is reasonable given that Black people are a racial minority. But it might not actually be true. It might be the case that police encounter Black people more often. For example, the real data might look like <a href="#fig-6">Figure&nbsp;7</a>. Comparing the first example, which gave P(Shot|Black) = 0.5 and P(Shot|White) = 0.25 this new data gives P(Shot|Black) = 0.14 and P(Shot|White) = 0.67. So this is consistent with a racial bias against White people.</p>
<div class="cell">
<div class="cell-output-display">
<div id="fig-6" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="slide6.png" class="img-fluid figure-img" style="width:50.0%"></p>
<figcaption class="figure-caption">Figure&nbsp;7: Sample of all people encountered by the police. Pink circles correspond to White people and Black circles to Black people. Red dots correspond to shooting victims.</figcaption>
</figure>
</div>
</div>
</div>
<p>The point here isn’t to argue whether there is or isn’t a racial bias in police shooting. Rather the point is that the data presented in this study is consistent with both conclusions. And because the authors reasoning was faulty they didn’t collect the data they needed to actually answer the question they posed.</p>
<p>What makes matter worse is that this study was used to delegitimise protest movements against what is a very real problem. It had very real negative consequences. This study has now been retracted, but not before it did a lot of damage.</p>
<p>I hope this serves as a sobering message for just how important research methods (including probability theory) is in your training. You might one day be in the position to make policies for governments so I hope you don’t fall victim to faulty reasoning when you do!</p>
<!-- Dependencies -->
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb33" data-startfrom="-1" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line -2;"><span id="cb33--1"><a href="#cb33--1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">circle</span>(x<span class="op">,</span> y<span class="op">,</span> fill<span class="op">,</span> stroke) {</span>
<span id="cb33-0"><a href="#cb33-0" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> <span class="vs">`&lt;circle cx="</span><span class="sc">${</span>x<span class="sc">}</span><span class="vs">" cy="</span><span class="sc">${</span>y<span class="sc">}</span><span class="vs">" r="20" stroke="none" fill="</span><span class="sc">${</span>fill<span class="sc">}</span><span class="vs">" stroke-width="0"&gt;&lt;/circle&gt;</span></span>
<span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="vs">&lt;circle cx="</span><span class="sc">${</span>x<span class="sc">}</span><span class="vs">" cy="</span><span class="sc">${</span>y<span class="sc">}</span><span class="vs">" r="10" stroke="</span><span class="sc">${</span>fill<span class="sc">}</span><span class="vs">" fill="</span><span class="sc">${</span>stroke<span class="sc">}</span><span class="vs">" stroke-width="0"&gt;&lt;/circle&gt;`</span><span class="op">;</span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-33" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb34" data-startfrom="-1" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line -2;"><span id="cb34--1"><a href="#cb34--1" aria-hidden="true" tabindex="-1"></a>full_grid <span class="op">=</span> _<span class="op">.</span><span class="fu">flatten</span>(</span>
<span id="cb34-0"><a href="#cb34-0" aria-hidden="true" tabindex="-1"></a>  _<span class="op">.</span><span class="fu">range</span>(<span class="dv">10</span>)<span class="op">.</span><span class="fu">map</span>((y) <span class="kw">=&gt;</span></span>
<span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>    _<span class="op">.</span><span class="fu">range</span>(<span class="dv">10</span>)</span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">map</span>((x) <span class="kw">=&gt;</span> <span class="dv">44</span> <span class="op">*</span> (x <span class="op">+</span> <span class="dv">1</span>))</span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">map</span>((x) <span class="kw">=&gt;</span> [x<span class="op">,</span> <span class="dv">44</span> <span class="op">*</span> (y <span class="op">+</span> <span class="dv">1</span>)])</span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-34" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb35" data-startfrom="-1" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line -2;"><span id="cb35--1"><a href="#cb35--1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">round3</span>(x) {</span>
<span id="cb35-0"><a href="#cb35-0" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">round</span>(x <span class="op">*</span> <span class="dv">1000</span>) <span class="op">/</span> <span class="dv">1000</span><span class="op">;</span></span>
<span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-35" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb36" data-startfrom="-1" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line -2;"><span id="cb36--1"><a href="#cb36--1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">getvalue</span>(x) {</span>
<span id="cb36-0"><a href="#cb36-0" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (x <span class="op">===</span> <span class="st">"red"</span>) {</span>
<span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> red<span class="op">;</span></span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (x <span class="op">===</span> <span class="st">"blue"</span>) {</span>
<span id="cb36-5"><a href="#cb36-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> blue<span class="op">;</span></span>
<span id="cb36-6"><a href="#cb36-6" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb36-7"><a href="#cb36-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-8"><a href="#cb36-8" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (x <span class="op">===</span> <span class="st">"green"</span>) {</span>
<span id="cb36-9"><a href="#cb36-9" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> green<span class="op">;</span></span>
<span id="cb36-10"><a href="#cb36-10" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb36-11"><a href="#cb36-11" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-36" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb37" data-startfrom="-1" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line -2;"><span id="cb37--1"><a href="#cb37--1" aria-hidden="true" tabindex="-1"></a>viewof blue2 <span class="op">=</span> Inputs<span class="op">.</span><span class="fu">input</span>(<span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-37" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb38" data-startfrom="-1" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line -2;"><span id="cb38--1"><a href="#cb38--1" aria-hidden="true" tabindex="-1"></a>viewof red2 <span class="op">=</span> Inputs<span class="op">.</span><span class="fu">input</span>(<span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-38" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb39" data-startfrom="-1" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line -2;"><span id="cb39--1"><a href="#cb39--1" aria-hidden="true" tabindex="-1"></a>viewof blue2_with <span class="op">=</span> Inputs<span class="op">.</span><span class="fu">input</span>(<span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-39" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb40" data-startfrom="-1" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line -2;"><span id="cb40--1"><a href="#cb40--1" aria-hidden="true" tabindex="-1"></a>viewof red2_with <span class="op">=</span> Inputs<span class="op">.</span><span class="fu">input</span>(<span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-40" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb41" data-startfrom="-1" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line -2;"><span id="cb41--1"><a href="#cb41--1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">frac</span>(decimal<span class="op">,</span> den) {</span>
<span id="cb41-0"><a href="#cb41-0" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> n <span class="op">=</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">round</span>(decimal <span class="op">*</span> den)<span class="op">;</span></span>
<span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> <span class="fu">md</span><span class="vs">`</span><span class="sc">${</span><span class="fu">tex</span><span class="vs">`</span><span class="sc">\f</span><span class="vs">rac{</span><span class="sc">${</span>n<span class="sc">}</span><span class="vs">}{</span><span class="sc">${</span>den<span class="sc">}</span><span class="vs">}`</span><span class="sc">}</span><span class="vs">`</span><span class="op">;</span></span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-41" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb42" data-startfrom="-1" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line -2;"><span id="cb42--1"><a href="#cb42--1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> { texmd } <span class="im">from</span> <span class="st">"@kelleyvanevert/katex-within-markdown"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-42" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb43" data-startfrom="-1" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line -2;"><span id="cb43--1"><a href="#cb43--1" aria-hidden="true" tabindex="-1"></a>parsedSpec <span class="op">=</span> {</span>
<span id="cb43-0"><a href="#cb43-0" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> vega<span class="op">.</span><span class="fu">parse</span>(spec3)<span class="op">;</span></span>
<span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-43" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb44" data-startfrom="-1" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line -2;"><span id="cb44--1"><a href="#cb44--1" aria-hidden="true" tabindex="-1"></a>spec3 <span class="op">=</span> {</span>
<span id="cb44-0"><a href="#cb44-0" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> {</span>
<span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a>    <span class="dt">$schema</span><span class="op">:</span> <span class="st">"https://vega.github.io/schema/vega/v5.0.json"</span><span class="op">,</span></span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a>    <span class="dt">padding</span><span class="op">:</span> <span class="dv">0</span><span class="op">,</span></span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a>    <span class="dt">width</span><span class="op">:</span> <span class="dv">500</span><span class="op">,</span></span>
<span id="cb44-4"><a href="#cb44-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">height</span><span class="op">:</span> <span class="dv">100</span><span class="op">,</span></span>
<span id="cb44-5"><a href="#cb44-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">layout</span><span class="op">:</span> {</span>
<span id="cb44-6"><a href="#cb44-6" aria-hidden="true" tabindex="-1"></a>      <span class="dt">padding</span><span class="op">:</span> <span class="dv">0</span><span class="op">,</span></span>
<span id="cb44-7"><a href="#cb44-7" aria-hidden="true" tabindex="-1"></a>      <span class="dt">columns</span><span class="op">:</span> <span class="dv">1</span></span>
<span id="cb44-8"><a href="#cb44-8" aria-hidden="true" tabindex="-1"></a>    }<span class="op">,</span></span>
<span id="cb44-9"><a href="#cb44-9" aria-hidden="true" tabindex="-1"></a>    <span class="dt">marks</span><span class="op">:</span> [</span>
<span id="cb44-10"><a href="#cb44-10" aria-hidden="true" tabindex="-1"></a>      {</span>
<span id="cb44-11"><a href="#cb44-11" aria-hidden="true" tabindex="-1"></a>        <span class="dt">type</span><span class="op">:</span> <span class="st">"group"</span><span class="op">,</span></span>
<span id="cb44-12"><a href="#cb44-12" aria-hidden="true" tabindex="-1"></a>        <span class="dt">encode</span><span class="op">:</span> {</span>
<span id="cb44-13"><a href="#cb44-13" aria-hidden="true" tabindex="-1"></a>          <span class="dt">update</span><span class="op">:</span> {</span>
<span id="cb44-14"><a href="#cb44-14" aria-hidden="true" tabindex="-1"></a>            <span class="dt">width</span><span class="op">:</span> {</span>
<span id="cb44-15"><a href="#cb44-15" aria-hidden="true" tabindex="-1"></a>              <span class="dt">value</span><span class="op">:</span> <span class="dv">1000</span></span>
<span id="cb44-16"><a href="#cb44-16" aria-hidden="true" tabindex="-1"></a>            }<span class="op">,</span></span>
<span id="cb44-17"><a href="#cb44-17" aria-hidden="true" tabindex="-1"></a>            <span class="dt">height</span><span class="op">:</span> {</span>
<span id="cb44-18"><a href="#cb44-18" aria-hidden="true" tabindex="-1"></a>              <span class="dt">value</span><span class="op">:</span> <span class="dv">130</span></span>
<span id="cb44-19"><a href="#cb44-19" aria-hidden="true" tabindex="-1"></a>            }</span>
<span id="cb44-20"><a href="#cb44-20" aria-hidden="true" tabindex="-1"></a>          }</span>
<span id="cb44-21"><a href="#cb44-21" aria-hidden="true" tabindex="-1"></a>        }<span class="op">,</span></span>
<span id="cb44-22"><a href="#cb44-22" aria-hidden="true" tabindex="-1"></a>        <span class="dt">data</span><span class="op">:</span> [</span>
<span id="cb44-23"><a href="#cb44-23" aria-hidden="true" tabindex="-1"></a>          {</span>
<span id="cb44-24"><a href="#cb44-24" aria-hidden="true" tabindex="-1"></a>            <span class="dt">name</span><span class="op">:</span> <span class="st">"tree"</span><span class="op">,</span></span>
<span id="cb44-25"><a href="#cb44-25" aria-hidden="true" tabindex="-1"></a>            <span class="dt">values</span><span class="op">:</span> coin_data<span class="op">,</span></span>
<span id="cb44-26"><a href="#cb44-26" aria-hidden="true" tabindex="-1"></a>            <span class="dt">transform</span><span class="op">:</span> [</span>
<span id="cb44-27"><a href="#cb44-27" aria-hidden="true" tabindex="-1"></a>              {</span>
<span id="cb44-28"><a href="#cb44-28" aria-hidden="true" tabindex="-1"></a>                <span class="dt">type</span><span class="op">:</span> <span class="st">"stratify"</span><span class="op">,</span></span>
<span id="cb44-29"><a href="#cb44-29" aria-hidden="true" tabindex="-1"></a>                <span class="dt">key</span><span class="op">:</span> <span class="st">"id"</span><span class="op">,</span></span>
<span id="cb44-30"><a href="#cb44-30" aria-hidden="true" tabindex="-1"></a>                <span class="dt">parentKey</span><span class="op">:</span> <span class="st">"parent"</span></span>
<span id="cb44-31"><a href="#cb44-31" aria-hidden="true" tabindex="-1"></a>              }<span class="op">,</span></span>
<span id="cb44-32"><a href="#cb44-32" aria-hidden="true" tabindex="-1"></a>              {</span>
<span id="cb44-33"><a href="#cb44-33" aria-hidden="true" tabindex="-1"></a>                <span class="dt">type</span><span class="op">:</span> <span class="st">"tree"</span><span class="op">,</span></span>
<span id="cb44-34"><a href="#cb44-34" aria-hidden="true" tabindex="-1"></a>                <span class="dt">method</span><span class="op">:</span> <span class="st">"tidy"</span><span class="op">,</span></span>
<span id="cb44-35"><a href="#cb44-35" aria-hidden="true" tabindex="-1"></a>                <span class="dt">size</span><span class="op">:</span> [<span class="dv">500</span><span class="op">,</span> <span class="dv">200</span>]<span class="op">,</span></span>
<span id="cb44-36"><a href="#cb44-36" aria-hidden="true" tabindex="-1"></a>                <span class="dt">as</span><span class="op">:</span> [<span class="st">"x"</span><span class="op">,</span> <span class="st">"y"</span><span class="op">,</span> <span class="st">"depth"</span><span class="op">,</span> <span class="st">"children"</span>]</span>
<span id="cb44-37"><a href="#cb44-37" aria-hidden="true" tabindex="-1"></a>              }</span>
<span id="cb44-38"><a href="#cb44-38" aria-hidden="true" tabindex="-1"></a>            ]</span>
<span id="cb44-39"><a href="#cb44-39" aria-hidden="true" tabindex="-1"></a>          }<span class="op">,</span></span>
<span id="cb44-40"><a href="#cb44-40" aria-hidden="true" tabindex="-1"></a>          {</span>
<span id="cb44-41"><a href="#cb44-41" aria-hidden="true" tabindex="-1"></a>            <span class="dt">name</span><span class="op">:</span> <span class="st">"links"</span><span class="op">,</span></span>
<span id="cb44-42"><a href="#cb44-42" aria-hidden="true" tabindex="-1"></a>            <span class="dt">source</span><span class="op">:</span> <span class="st">"tree"</span><span class="op">,</span></span>
<span id="cb44-43"><a href="#cb44-43" aria-hidden="true" tabindex="-1"></a>            <span class="dt">transform</span><span class="op">:</span> [</span>
<span id="cb44-44"><a href="#cb44-44" aria-hidden="true" tabindex="-1"></a>              {</span>
<span id="cb44-45"><a href="#cb44-45" aria-hidden="true" tabindex="-1"></a>                <span class="dt">type</span><span class="op">:</span> <span class="st">"treelinks"</span><span class="op">,</span></span>
<span id="cb44-46"><a href="#cb44-46" aria-hidden="true" tabindex="-1"></a>                <span class="dt">key</span><span class="op">:</span> <span class="st">"id"</span></span>
<span id="cb44-47"><a href="#cb44-47" aria-hidden="true" tabindex="-1"></a>              }<span class="op">,</span></span>
<span id="cb44-48"><a href="#cb44-48" aria-hidden="true" tabindex="-1"></a>              {</span>
<span id="cb44-49"><a href="#cb44-49" aria-hidden="true" tabindex="-1"></a>                <span class="dt">type</span><span class="op">:</span> <span class="st">"linkpath"</span><span class="op">,</span></span>
<span id="cb44-50"><a href="#cb44-50" aria-hidden="true" tabindex="-1"></a>                <span class="dt">orient</span><span class="op">:</span> <span class="st">"horizontal"</span><span class="op">,</span></span>
<span id="cb44-51"><a href="#cb44-51" aria-hidden="true" tabindex="-1"></a>                <span class="dt">shape</span><span class="op">:</span> <span class="st">"line"</span></span>
<span id="cb44-52"><a href="#cb44-52" aria-hidden="true" tabindex="-1"></a>              }</span>
<span id="cb44-53"><a href="#cb44-53" aria-hidden="true" tabindex="-1"></a>            ]</span>
<span id="cb44-54"><a href="#cb44-54" aria-hidden="true" tabindex="-1"></a>          }</span>
<span id="cb44-55"><a href="#cb44-55" aria-hidden="true" tabindex="-1"></a>        ]<span class="op">,</span></span>
<span id="cb44-56"><a href="#cb44-56" aria-hidden="true" tabindex="-1"></a>        <span class="dt">scales</span><span class="op">:</span> [</span>
<span id="cb44-57"><a href="#cb44-57" aria-hidden="true" tabindex="-1"></a>          {</span>
<span id="cb44-58"><a href="#cb44-58" aria-hidden="true" tabindex="-1"></a>            <span class="dt">name</span><span class="op">:</span> <span class="st">"color"</span><span class="op">,</span></span>
<span id="cb44-59"><a href="#cb44-59" aria-hidden="true" tabindex="-1"></a>            <span class="dt">domain</span><span class="op">:</span> [<span class="dv">0</span><span class="op">,</span> <span class="dv">1</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">3</span><span class="op">,</span> <span class="dv">4</span><span class="op">,</span> <span class="dv">5</span>]<span class="op">,</span></span>
<span id="cb44-60"><a href="#cb44-60" aria-hidden="true" tabindex="-1"></a>            <span class="dt">type</span><span class="op">:</span> <span class="st">"sequential"</span><span class="op">,</span></span>
<span id="cb44-61"><a href="#cb44-61" aria-hidden="true" tabindex="-1"></a>            <span class="dt">range</span><span class="op">:</span> <span class="st">"ramp"</span></span>
<span id="cb44-62"><a href="#cb44-62" aria-hidden="true" tabindex="-1"></a>          }</span>
<span id="cb44-63"><a href="#cb44-63" aria-hidden="true" tabindex="-1"></a>        ]<span class="op">,</span></span>
<span id="cb44-64"><a href="#cb44-64" aria-hidden="true" tabindex="-1"></a>        <span class="dt">marks</span><span class="op">:</span> [</span>
<span id="cb44-65"><a href="#cb44-65" aria-hidden="true" tabindex="-1"></a>          {</span>
<span id="cb44-66"><a href="#cb44-66" aria-hidden="true" tabindex="-1"></a>            <span class="dt">type</span><span class="op">:</span> <span class="st">"path"</span><span class="op">,</span></span>
<span id="cb44-67"><a href="#cb44-67" aria-hidden="true" tabindex="-1"></a>            <span class="dt">from</span><span class="op">:</span> {</span>
<span id="cb44-68"><a href="#cb44-68" aria-hidden="true" tabindex="-1"></a>              <span class="dt">data</span><span class="op">:</span> <span class="st">"links"</span></span>
<span id="cb44-69"><a href="#cb44-69" aria-hidden="true" tabindex="-1"></a>            }<span class="op">,</span></span>
<span id="cb44-70"><a href="#cb44-70" aria-hidden="true" tabindex="-1"></a>            <span class="dt">encode</span><span class="op">:</span> {</span>
<span id="cb44-71"><a href="#cb44-71" aria-hidden="true" tabindex="-1"></a>              <span class="dt">update</span><span class="op">:</span> {</span>
<span id="cb44-72"><a href="#cb44-72" aria-hidden="true" tabindex="-1"></a>                <span class="dt">path</span><span class="op">:</span> {</span>
<span id="cb44-73"><a href="#cb44-73" aria-hidden="true" tabindex="-1"></a>                  <span class="dt">field</span><span class="op">:</span> <span class="st">"path"</span></span>
<span id="cb44-74"><a href="#cb44-74" aria-hidden="true" tabindex="-1"></a>                }<span class="op">,</span></span>
<span id="cb44-75"><a href="#cb44-75" aria-hidden="true" tabindex="-1"></a>                <span class="dt">stroke</span><span class="op">:</span> {</span>
<span id="cb44-76"><a href="#cb44-76" aria-hidden="true" tabindex="-1"></a>                  <span class="dt">value</span><span class="op">:</span> <span class="st">"black"</span></span>
<span id="cb44-77"><a href="#cb44-77" aria-hidden="true" tabindex="-1"></a>                }</span>
<span id="cb44-78"><a href="#cb44-78" aria-hidden="true" tabindex="-1"></a>              }</span>
<span id="cb44-79"><a href="#cb44-79" aria-hidden="true" tabindex="-1"></a>            }</span>
<span id="cb44-80"><a href="#cb44-80" aria-hidden="true" tabindex="-1"></a>          }<span class="op">,</span></span>
<span id="cb44-81"><a href="#cb44-81" aria-hidden="true" tabindex="-1"></a>          {</span>
<span id="cb44-82"><a href="#cb44-82" aria-hidden="true" tabindex="-1"></a>            <span class="dt">type</span><span class="op">:</span> <span class="st">"symbol"</span><span class="op">,</span></span>
<span id="cb44-83"><a href="#cb44-83" aria-hidden="true" tabindex="-1"></a>            <span class="dt">from</span><span class="op">:</span> {</span>
<span id="cb44-84"><a href="#cb44-84" aria-hidden="true" tabindex="-1"></a>              <span class="dt">data</span><span class="op">:</span> <span class="st">"tree"</span></span>
<span id="cb44-85"><a href="#cb44-85" aria-hidden="true" tabindex="-1"></a>            }<span class="op">,</span></span>
<span id="cb44-86"><a href="#cb44-86" aria-hidden="true" tabindex="-1"></a>            <span class="dt">encode</span><span class="op">:</span> {</span>
<span id="cb44-87"><a href="#cb44-87" aria-hidden="true" tabindex="-1"></a>              <span class="dt">enter</span><span class="op">:</span> {</span>
<span id="cb44-88"><a href="#cb44-88" aria-hidden="true" tabindex="-1"></a>                <span class="dt">size</span><span class="op">:</span> {</span>
<span id="cb44-89"><a href="#cb44-89" aria-hidden="true" tabindex="-1"></a>                  <span class="dt">value</span><span class="op">:</span> <span class="dv">50</span></span>
<span id="cb44-90"><a href="#cb44-90" aria-hidden="true" tabindex="-1"></a>                }<span class="op">,</span></span>
<span id="cb44-91"><a href="#cb44-91" aria-hidden="true" tabindex="-1"></a>                <span class="dt">stroke</span><span class="op">:</span> {</span>
<span id="cb44-92"><a href="#cb44-92" aria-hidden="true" tabindex="-1"></a>                  <span class="dt">value</span><span class="op">:</span> <span class="st">"black"</span></span>
<span id="cb44-93"><a href="#cb44-93" aria-hidden="true" tabindex="-1"></a>                }</span>
<span id="cb44-94"><a href="#cb44-94" aria-hidden="true" tabindex="-1"></a>              }<span class="op">,</span></span>
<span id="cb44-95"><a href="#cb44-95" aria-hidden="true" tabindex="-1"></a>              <span class="dt">update</span><span class="op">:</span> {</span>
<span id="cb44-96"><a href="#cb44-96" aria-hidden="true" tabindex="-1"></a>                <span class="dt">x</span><span class="op">:</span> {</span>
<span id="cb44-97"><a href="#cb44-97" aria-hidden="true" tabindex="-1"></a>                  <span class="dt">field</span><span class="op">:</span> <span class="st">"x"</span></span>
<span id="cb44-98"><a href="#cb44-98" aria-hidden="true" tabindex="-1"></a>                }<span class="op">,</span></span>
<span id="cb44-99"><a href="#cb44-99" aria-hidden="true" tabindex="-1"></a>                <span class="dt">y</span><span class="op">:</span> {</span>
<span id="cb44-100"><a href="#cb44-100" aria-hidden="true" tabindex="-1"></a>                  <span class="dt">field</span><span class="op">:</span> <span class="st">"y"</span></span>
<span id="cb44-101"><a href="#cb44-101" aria-hidden="true" tabindex="-1"></a>                }<span class="op">,</span></span>
<span id="cb44-102"><a href="#cb44-102" aria-hidden="true" tabindex="-1"></a>                <span class="dt">fill</span><span class="op">:</span> {</span>
<span id="cb44-103"><a href="#cb44-103" aria-hidden="true" tabindex="-1"></a>                  <span class="dt">field</span><span class="op">:</span> <span class="st">"color"</span></span>
<span id="cb44-104"><a href="#cb44-104" aria-hidden="true" tabindex="-1"></a>                }</span>
<span id="cb44-105"><a href="#cb44-105" aria-hidden="true" tabindex="-1"></a>              }</span>
<span id="cb44-106"><a href="#cb44-106" aria-hidden="true" tabindex="-1"></a>            }</span>
<span id="cb44-107"><a href="#cb44-107" aria-hidden="true" tabindex="-1"></a>          }<span class="op">,</span></span>
<span id="cb44-108"><a href="#cb44-108" aria-hidden="true" tabindex="-1"></a>          {</span>
<span id="cb44-109"><a href="#cb44-109" aria-hidden="true" tabindex="-1"></a>            <span class="dt">type</span><span class="op">:</span> <span class="st">"text"</span><span class="op">,</span></span>
<span id="cb44-110"><a href="#cb44-110" aria-hidden="true" tabindex="-1"></a>            <span class="dt">from</span><span class="op">:</span> {</span>
<span id="cb44-111"><a href="#cb44-111" aria-hidden="true" tabindex="-1"></a>              <span class="dt">data</span><span class="op">:</span> <span class="st">"tree"</span></span>
<span id="cb44-112"><a href="#cb44-112" aria-hidden="true" tabindex="-1"></a>            }<span class="op">,</span></span>
<span id="cb44-113"><a href="#cb44-113" aria-hidden="true" tabindex="-1"></a>            <span class="dt">encode</span><span class="op">:</span> {</span>
<span id="cb44-114"><a href="#cb44-114" aria-hidden="true" tabindex="-1"></a>              <span class="dt">enter</span><span class="op">:</span> {</span>
<span id="cb44-115"><a href="#cb44-115" aria-hidden="true" tabindex="-1"></a>                <span class="dt">text</span><span class="op">:</span> {</span>
<span id="cb44-116"><a href="#cb44-116" aria-hidden="true" tabindex="-1"></a>                  <span class="dt">field</span><span class="op">:</span> <span class="st">"name"</span></span>
<span id="cb44-117"><a href="#cb44-117" aria-hidden="true" tabindex="-1"></a>                }<span class="op">,</span></span>
<span id="cb44-118"><a href="#cb44-118" aria-hidden="true" tabindex="-1"></a>                <span class="dt">fontSize</span><span class="op">:</span> {</span>
<span id="cb44-119"><a href="#cb44-119" aria-hidden="true" tabindex="-1"></a>                  <span class="dt">value</span><span class="op">:</span> <span class="dv">0</span></span>
<span id="cb44-120"><a href="#cb44-120" aria-hidden="true" tabindex="-1"></a>                }<span class="op">,</span></span>
<span id="cb44-121"><a href="#cb44-121" aria-hidden="true" tabindex="-1"></a>                <span class="dt">baseline</span><span class="op">:</span> {</span>
<span id="cb44-122"><a href="#cb44-122" aria-hidden="true" tabindex="-1"></a>                  <span class="dt">value</span><span class="op">:</span> <span class="st">"bottom"</span></span>
<span id="cb44-123"><a href="#cb44-123" aria-hidden="true" tabindex="-1"></a>                }</span>
<span id="cb44-124"><a href="#cb44-124" aria-hidden="true" tabindex="-1"></a>              }<span class="op">,</span></span>
<span id="cb44-125"><a href="#cb44-125" aria-hidden="true" tabindex="-1"></a>              <span class="dt">update</span><span class="op">:</span> {</span>
<span id="cb44-126"><a href="#cb44-126" aria-hidden="true" tabindex="-1"></a>                <span class="dt">x</span><span class="op">:</span> {</span>
<span id="cb44-127"><a href="#cb44-127" aria-hidden="true" tabindex="-1"></a>                  <span class="dt">field</span><span class="op">:</span> <span class="st">"x"</span></span>
<span id="cb44-128"><a href="#cb44-128" aria-hidden="true" tabindex="-1"></a>                }<span class="op">,</span></span>
<span id="cb44-129"><a href="#cb44-129" aria-hidden="true" tabindex="-1"></a>                <span class="dt">y</span><span class="op">:</span> {</span>
<span id="cb44-130"><a href="#cb44-130" aria-hidden="true" tabindex="-1"></a>                  <span class="dt">field</span><span class="op">:</span> <span class="st">"y"</span></span>
<span id="cb44-131"><a href="#cb44-131" aria-hidden="true" tabindex="-1"></a>                }</span>
<span id="cb44-132"><a href="#cb44-132" aria-hidden="true" tabindex="-1"></a>              }</span>
<span id="cb44-133"><a href="#cb44-133" aria-hidden="true" tabindex="-1"></a>            }</span>
<span id="cb44-134"><a href="#cb44-134" aria-hidden="true" tabindex="-1"></a>          }</span>
<span id="cb44-135"><a href="#cb44-135" aria-hidden="true" tabindex="-1"></a>        ]</span>
<span id="cb44-136"><a href="#cb44-136" aria-hidden="true" tabindex="-1"></a>      }</span>
<span id="cb44-137"><a href="#cb44-137" aria-hidden="true" tabindex="-1"></a>    ]</span>
<span id="cb44-138"><a href="#cb44-138" aria-hidden="true" tabindex="-1"></a>  }<span class="op">;</span></span>
<span id="cb44-139"><a href="#cb44-139" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-44" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb45" data-startfrom="-1" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line -2;"><span id="cb45--1"><a href="#cb45--1" aria-hidden="true" tabindex="-1"></a>vega <span class="op">=</span> <span class="pp">require</span>(<span class="st">"https://cdn.jsdelivr.net/npm/vega@5/build/vega.js"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-45" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb46" data-startfrom="-1" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line -2;"><span id="cb46--1"><a href="#cb46--1" aria-hidden="true" tabindex="-1"></a>coin_data <span class="op">=</span> [</span>
<span id="cb46-0"><a href="#cb46-0" aria-hidden="true" tabindex="-1"></a>  { <span class="dt">name</span><span class="op">:</span> <span class="st">"START"</span><span class="op">,</span> <span class="dt">id</span><span class="op">:</span> <span class="dv">1</span><span class="op">,</span> <span class="dt">parent</span><span class="op">:</span> <span class="st">""</span><span class="op">,</span> <span class="dt">color</span><span class="op">:</span> <span class="st">"red"</span> }<span class="op">,</span></span>
<span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a>  <span class="op">...</span>d3<span class="op">.</span><span class="fu">range</span>(<span class="dv">2</span><span class="op">,</span> <span class="dv">2</span> <span class="op">**</span> coins)<span class="op">.</span><span class="fu">map</span>((i) <span class="kw">=&gt;</span> {</span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> {</span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a>      <span class="dt">name</span><span class="op">:</span> i <span class="op">%</span> <span class="dv">2</span> <span class="op">?</span> <span class="st">"T"</span> <span class="op">:</span> <span class="st">"H"</span><span class="op">,</span></span>
<span id="cb46-4"><a href="#cb46-4" aria-hidden="true" tabindex="-1"></a>      <span class="dt">id</span><span class="op">:</span> i<span class="op">,</span></span>
<span id="cb46-5"><a href="#cb46-5" aria-hidden="true" tabindex="-1"></a>      <span class="dt">parent</span><span class="op">:</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>(i <span class="op">/</span> <span class="dv">2</span>)</span>
<span id="cb46-6"><a href="#cb46-6" aria-hidden="true" tabindex="-1"></a>    }<span class="op">;</span></span>
<span id="cb46-7"><a href="#cb46-7" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb46-8"><a href="#cb46-8" aria-hidden="true" tabindex="-1"></a>]<span class="op">.</span><span class="fu">map</span>((x) <span class="kw">=&gt;</span> {</span>
<span id="cb46-9"><a href="#cb46-9" aria-hidden="true" tabindex="-1"></a>  <span class="kw">let</span> colors <span class="op">=</span> { <span class="dt">H</span><span class="op">:</span> <span class="st">"black"</span><span class="op">,</span> <span class="dt">T</span><span class="op">:</span> <span class="st">"white"</span><span class="op">,</span> <span class="dt">START</span><span class="op">:</span> <span class="st">"red"</span> }<span class="op">;</span></span>
<span id="cb46-10"><a href="#cb46-10" aria-hidden="true" tabindex="-1"></a>  x<span class="op">.</span><span class="at">color</span> <span class="op">=</span> colors[x<span class="op">.</span><span class="at">name</span>]<span class="op">;</span></span>
<span id="cb46-11"><a href="#cb46-11" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> x<span class="op">;</span></span>
<span id="cb46-12"><a href="#cb46-12" aria-hidden="true" tabindex="-1"></a>})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-46" data-nodetype="declaration">

</div>
</div>
</div>


<script type="ojs-module-contents">
{"contents":[
  {"methodName":"interpret","inline":"true","source":"htl.html`<span>${coins - 1}</span>`", "cellName":"ojs-element-id-1"}
]}
</script>
</section>
</section>


<div id="quarto-appendix" class="default"><section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1"><p>In criminal trials the threshold is termed “beyond reasonable doubt”. In civil trials, the probability of one must just be greater than the probability of the other, and there is no requirement that the probability of one exceeds the probability of the other by some threshold amount.<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn2"><p>An alternative to Frequentist statistics is an approach known as Bayesian statistics. You won’t learn Bayesian statistics in your undergraduate courses (at least not in very much detail), but if you are interested in learning more then I do teach a course on it at Masters level, which you’ll be able to take in a few years time.<a href="#fnref2" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn3"><p>Probabilities don’t always have to have <strong>numbers</strong> attached. There is a sense in which something can be <strong>more probable</strong> than something else without numbers being attached.<a href="#fnref3" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section></div></main> <!-- /main -->
<script type="ojs-module-contents">
{"contents":[{"methodName":"interpret","cellName":"ojs-cell-1","inline":false,"source":"viewof plot = html`\n<svg class=\"image\" xmlns=\"http://www.w3.org/2000/svg\" width=\"${\n  (44 * 10) + 44\n  }\" height=\"${\n  40 * Math.ceil((44 + 44 + 44) / 10) \n}\">\n${[\n  full_grid.slice(0, red).map((pt) => circle(pt[0], pt[1], \"red\", \"red\")),\n  full_grid\n    .slice(red, red + blue)\n    .map((pt) => circle(pt[0], pt[1], \"blue\", \"blue\")),\n  full_grid\n    .slice(red + blue, red + blue + green)\n    .map((pt) => circle(pt[0], pt[1], \"green\", \"green\"))\n].join(\"\")}\n</svg>`\n"},{"methodName":"interpret","cellName":"ojs-cell-2","inline":false,"source":"viewof red = Inputs.range([0, 30], {\n  label: \"Number of red cirlces\",\n  step: 1,\n  value: 10\n})\n\nviewof blue = Inputs.range([0, 30], \n  {label: \"Number of blue circles\",\n  step: 1, \n  value: 10})\n\nviewof green = Inputs.range([0, 30], {\n  label: \"Number of green circles\",\n  step: 1,\n  value: 10\n})\n"},{"methodName":"interpret","cellName":"ojs-cell-3","inline":false,"source":"viewof t3 = md`The display shows ${red} red circles, ${blue} circles, and ${green} circles.\nThis means that there's a total of ${red + blue + green} circles. If we were to \nselect one circle at random then we can work out the probability that it'll\nbe green, blue or red.\n\n- The probability of selecting a red circle is ${tex`\\frac{${red}}{${\n  red + green + blue\n}}`} or ${round3(red / (red + green + blue))}\n\n- The probability of selecting a blue circle is ${tex`\\frac{${blue}}{${\n  red + green + blue\n}}`} or ${round3(blue / (red + green + blue))}\n\n- The probability of selecting a green circle is ${tex`\\frac{${green}}{${\n  red + green + blue\n}}`} or ${round3(green / (red + green + blue))}\n\nSelecting **blue** and selecting **red** are **mutually exclusive**. \nThis means that if you select **only one circle**, that circle can't be both \nblue **and** red. But we could ask about the probability of selecting, \nfor example, a circle that is blue **or** red.\n\nTo work out this probability we apply the **addition rule**.\n\nMathematically, we can say:\n${tex`P (A \\cup B) = P(A) + P(B)`}\n\nLet's put some numbers to it:\\\n`\n\n"},{"methodName":"interpret","cellName":"ojs-cell-4","inline":false,"source":"viewof colors = Inputs.checkbox(\n  [\"red\", \"blue\", \"green\"],\n  { value: [\"red\", \"blue\"], label: \"Colours\"}, { value: [\"red\", \"blue\"]}\n)\n"},{"methodName":"interpret","cellName":"ojs-cell-5","inline":false,"source":"function give_selection(x) {\n\n  if(_.isEmpty(x)) {\n    return \"**None**\"\n  }\n\n  return colors.map((x, i) => `${i >= 1 ? \" and \" : \"\"}**${x}**`)\n\n}\n"},{"methodName":"interpret","cellName":"ojs-cell-6","inline":false,"source":"md`Select two colours using the selectors above. You've selected: ${give_selection(colors)}.\n\n${\n  _.isEmpty(colors)\n    ? \"\"\n    : md`The probability of selecting ${colors.map(\n        (x, i) => `${x}${i + 1 < colors.length ? \" **or** \" : \" is:\"}`\n      )}`\n}\n\n${\n  _.isEmpty(colors)\n    ? \"Use the checkboxes above to select the colours.\"\n    : md`${tex`P(${colors\n        .map((x) => `\\\\mathrm{${x}}`)\n        .join(\"\\\\cup{}\")})`}  = ${colors\n        .map((x) => round3(getvalue(x) / (red + blue + green)))\n        .join(\" + \")} = ${round3(\n        _.sum(colors.map((x) => getvalue(x))) / (red + blue + green)\n      )}`\n} \n\n\n\n${\n  _.isEmpty(colors)\n    ? \"\"\n    : md`\nWe can work this out just by counting:\n\n${colors.map((x) => `${round3(getvalue(x))} (number of ${x} circles)`).join(\" + \")} = ${_.sum(\n        colors.map((x) => getvalue(x))\n      )}\n\n${_.sum(colors.map((x) => getvalue(x)))} ÷ ${\n        red + blue + green\n      } (total number of circles) = ${round3(\n        _.sum(colors.map((x) => getvalue(x))) / (red + blue + green)\n      )}\n`\n}\n\n`\n\n"},{"methodName":"interpret","cellName":"ojs-cell-7","inline":false,"source":"viewof blue2_ = Inputs.bind(\n  Inputs.range([1, 30], { label: \"Number of blue\", step: 1, value: 15 }),\n  viewof blue2\n)\n\n\nviewof red2_ = Inputs.bind(\n  Inputs.range([1, 30], { label: \"Number of red\", step: 1, value: 15 }),\n  viewof red2\n)\n"},{"methodName":"interpret","cellName":"ojs-cell-8","inline":false,"source":"viewof blue2_with_ = Inputs.bind(\n  Inputs.range([1, blue2], { label: \"Number of blue with dots\", step: 1 }),\n  viewof blue2_with\n)\nviewof red2_with_ = Inputs.bind(\n  Inputs.range([1, red2], {\n    label: \"Number of red with dots\",\n    step: 1\n  }),\n  viewof red2_with\n)\n"},{"methodName":"interpret","cellName":"ojs-cell-9","inline":false,"source":"md`\nThis display has ${red2} red circles and ${blue2} blue circles.\nOut of the ${red2} red circles, ${red2_with} also have a white dot.\nOut of the ${blue2} blue circles, ${blue2_with} also have a white dot.\n`\n\n"},{"methodName":"interpret","cellName":"ojs-cell-10","inline":false,"source":"viewof plot2 = html`\n<svg class=\"image\" xmlns=\"http://www.w3.org/2000/svg\" width=\"${\n  (44 * 10) + 44\n  }\" height=\"${\n  25 * Math.ceil((44 + 44 + 44) / 10) \n}\">\n${[\n  full_grid\n    .slice(0, red2_with)\n    .map((pt) => circle(pt[0], pt[1], colors2.red.w[0], colors2.red.w[1])),\n  full_grid\n    .slice(red2_with, red2)\n    .map((pt) => circle(pt[0], pt[1], colors2.red.n[0], colors2.red.n[1])),\n  full_grid\n    .slice(red2, red2 + blue2_with)\n    .map((pt) => circle(pt[0], pt[1], colors2.blue.w[0], colors2.blue.w[1])),\n  full_grid\n    .slice(red2 + blue2_with, red2 + blue2)\n    .map((pt) => circle(pt[0], pt[1], colors2.blue.n[0], colors2.blue.n[1]))\n].join(\"\")}\n</svg>`\n"},{"methodName":"interpret","cellName":"ojs-cell-11","inline":false,"source":"texmd`\nFirst we need to know P(Red). To do this, we just count\nup the number of circles that are red. \n${red2} of the ${red2 + blue2} cirlces are red, \nso $P(\\mathrm{Red})$ = ${frac(red2/(red2 + blue2),red2 + blue2)}.\n\nNext we need to know P(Dot). To do this, we just count\nup the number of circles that have white dot.\n${red2_with + blue2_with} of the ${red2 + blue2} \ncircles have white dots, so $P(\\mathrm{Dot})$ = \n${frac((red2_with + blue2_with) / (red2 + blue2), red2 + blue2)}.\n\nWe can't just add these two numbers, because we'll double count some \nof the circles.\n\nClick the toggle below to see which circles get counted twice.\n`\n"},{"methodName":"interpret","cellName":"ojs-cell-12","inline":false,"source":"viewof show_double_count = Inputs.toggle({ label: \"Show double counted\", value: false })\n"},{"methodName":"interpret","cellName":"ojs-cell-13","inline":false,"source":"texmd`Because some the red circles with white dots get counted twice, we need to \nsubtract this amount.\nFirst we work out $P(\\mathrm{Red})$ + $P(\\mathrm{Dot})$.Using the numbers above\nthis gives us ${frac(((red2 + red2_with + blue2_with))/(blue2 + red2), blue2 + red2)}.\nThen we subtract ${frac(red2_with / (blue2 + red2), blue2 + red2)}. This gives us\n$P(\\mathrm{Red} \\cup \\mathrm{Dot})$ = ${frac((red2 + blue2_with)/(blue2 + red2), blue2 + red2)}.\n`\n"},{"methodName":"interpret","cellName":"ojs-cell-14","inline":false,"source":"viewof show_count = Inputs.toggle({ label: md`Show Red ∪ Dot`, value: false })\n"},{"methodName":"interpret","cellName":"ojs-cell-15","inline":false,"source":"colors2 = {\n  let c = {\n    \"red\" : { \"w\" : [ \"red\", \"white\" ], \"n\" : [ \"red\", \"red\" ] },\n    \"blue\" : { \"w\" : [ \"blue\", \"white\" ], \"n\" : [ \"blue\", \"blue\" ] }\n  }\n\n  if(show_double_count) {\n    c.red[\"n\"] = [\"white\",\"white\"]\n    c.blue[\"w\"] = [\"white\", \"white\"]\n    c.blue[\"n\"] = [\"white\", \"white\"]\n  }\n  if(show_count) {\n    c.red[\"n\"] = [\"red\", \"red\"]\n    c.red[\"w\"] = [\"red\",\"white\"]\n    c.blue[\"w\"] = [\"blue\", \"white\"]\n    c.blue[\"n\"] = [\"grey\", \"grey\"]\n  }\n\n\n  return c\n\n}\n\n"},{"methodName":"interpret","cellName":"ojs-cell-16","inline":false,"source":"viewof sequences = {\n  const div = document.createElement(\"div\");\n  div.value = new vega.View(parsedSpec).initialize(div).run();\n  return div;\n}\n"},{"methodName":"interpret","cellName":"ojs-cell-17","inline":false,"source":"viewof coins = htl.html`<input style=\"width:300px\" type=\"range\" id=\"coins\" min=\"1\" max=\"7\" value=\"1\" class=\"form-range\">`\n\ncoins_label = htl.html`<label for=\"coins\" class= \"form-label\" width=\"100%\">Number of coin flips: ${\n  coins - 1\n}</label>`\n"},{"methodName":"interpret","cellName":"ojs-cell-18","inline":false,"source":"viewof figure = html`\n<svg class=\"image\" xmlns=\"http://www.w3.org/2000/svg\" width=\"420\" height=\"${320}\">\n${[\n  functions.full_grid\n    .slice(0, _.sum(data.g.slice(0, 1)))\n    .map((pt) =>\n      functions.circle(pt[0], pt[1], data.colours[0][0], data.colours[0][1])\n    ),\n  functions.full_grid\n    .slice(_.sum(data.g.slice(0, 1)), _.sum(data.g.slice(0, 2)))\n    .map((pt) =>\n      functions.circle(pt[0], pt[1], data.colours[1][0], data.colours[1][1])\n    ),\n  functions.full_grid\n    .slice(_.sum(data.g.slice(0, 2)), _.sum(data.g.slice(0, 3)))\n    .map((pt) =>\n      functions.circle(pt[0], pt[1], data.colours[2][0], data.colours[2][1])\n    ),\n  functions.full_grid\n    .slice(_.sum(data.g.slice(0, 3)), _.sum(data.g.slice(0, 4)))\n    .map((pt) =>\n      functions.circle(pt[0], pt[1], data.colours[3][0], data.colours[3][1])\n    )\n].join(\"\")}\n</svg>`\n"},{"methodName":"interpret","cellName":"ojs-cell-19","inline":false,"source":"md`\nIf a circle has a black dot, then that means the person tested positive for the\ndisease. I said that 80% of people that actually have the disease will\ntest positive. Select the option below to *only show the sick people*.\nNow just count up how many of the Red circles have Black dots. \nThere are ${data.g[0] + data.g[1]} sick people and ${functions.frac(\n  data.conds.dot_red,\n  data.g[0] + data.g[1]\n)} or ${functions.round3(\n  data.conds.dot_red * 100\n)}% of the\nsick people test **positive**`\n"},{"methodName":"interpret","cellName":"ojs-cell-20","inline":false,"source":"md`\nNext we want to count up the healthy people that test positive.\nSelect the option below to *only show the healthy people*.\nNow just count up how many of the Green circles have Black Dots.\nThere are ${data.g[2] + data.g[3]} healthly people, and only\n ${functions.frac(\n  data.conds.dot_green,\n  data.g[2] + data.g[3]\n)} or ${functions.round3(\n  data.conds.dot_green * 100\n)}% of healthy people test **postive**.\n `\n"},{"methodName":"interpret","cellName":"ojs-cell-21","inline":false,"source":"md`\n\nThere are ${data.g[1] + data.g[2]} people that test positive. Of these \n${functions.frac(\n  data.g[1] / (data.g[1] + data.g[2]),\n  data.g[1] + data.g[2]\n)} or ${functions.round3(\n  (data.g[1] / (data.g[1] + data.g[2])) * 100\n)}% are sick and ${functions.frac(\n  data.g[2] / (data.g[1] + data.g[2]),\n  data.g[1] + data.g[2]\n)} or ${functions.round3((data.g[2] / (data.g[1] + data.g[2])) * 100)}%\nare healthy.\nThis means that a person that tests **positive** is more likely to be ${\n  data.g[1] / (data.g[1] + data.g[2]) > data.g[2] / (data.g[1] + data.g[2])\n    ? \"**sick**\"\n    : \"**healthy!**\"\n}`\n\n"},{"methodName":"interpret","cellName":"ojs-cell-22","inline":false,"source":"viewof positive_tests = Inputs.radio(\n  new Map([\n    [\"All people\", \"all\"],\n    [\"Only sick people\", \"sick\"],\n    [\"Only healthy people\", \"health\"],\n    [\"Only positive tests\", \"pos\"]\n  ]),\n  { value: \"all\", label: \"Show\" }\n)\n\n"},{"methodName":"interpret","cellName":"ojs-cell-23","inline":false,"source":"{\n  if(data.conds.red < 0.5) {\n    return md` This might seem like an odd conclusion! But it's right \n    there in the circles and dots that you counted. To make sense of\n    it, I'll give you another key bit of information`\n  }\n  return md``\n\n}\n\n"},{"methodName":"interpret","cellName":"ojs-cell-24","inline":false,"source":"md`The key bit of information I didn't tell you is that \nin this example, the disease is **${\n  data.conds.red > 0.5 ? \"COMMON\" : \"RARE\"\n}** with an incidence of ${data.conds.red * 100}%.\n\nBut we can change this. Use the selection below to change whether the \ndisease is **COMMON** or **RARE** and then read through the\nexample again.\n`\n"},{"methodName":"interpret","cellName":"ojs-cell-25","inline":false,"source":"viewof incidence = Inputs.radio(\n  new Map([\n    [\"Common\", \"common\"],\n    [\"Rare\", \"rare\"]\n  ]),\n  { value: \"rare\", label: \"Incidence\" }\n)\n"},{"methodName":"interpret","cellName":"ojs-cell-26","inline":false,"source":"functions = {\n  return {\n    circle: (x, y, fill, stroke) => {\n      return `<circle cx=\"${x}\" cy=\"${y}\" r=\"14\" stroke=\"none\" fill=\"${fill}\" stroke-width=\"0\"></circle>\n<circle cx=\"${x}\" cy=\"${y}\" r=\"5\" stroke=\"${fill}\" fill=\"${stroke}\" stroke-width=\"0\"></circle>`;\n    },\n    full_grid: _.flatten(\n      _.range(10).map((y) =>\n        _.range(10)\n          .map((x) => 30 * (x + 1))\n          .map((x) => [x, 30 * (y + 1)])\n      )\n    ),\n    round3: (x) => Math.round(x * 1000) / 1000,\n    frac: (decimal, den) => {\n      const n = Math.round(decimal * den);\n      return md`${tex`\\frac{${n}}{${den}}`}`;\n    }\n  };\n}\n"},{"methodName":"interpret","cellName":"ojs-cell-27","inline":false,"source":"data = {\n  let proportions = incidence === \"rare\" ? [5, 95] : [80, 20];\n  let percentages = incidence === \"rare\" ? [4 / 5, 1 / 20] : [8 / 10, 6 / 90];\n  let g = [\n    Math.round(proportions[0] * (1 - percentages[0])),\n    Math.round(proportions[0] * percentages[0]),\n    Math.round(proportions[1] * percentages[1]),\n    Math.round(proportions[1] * (1 - percentages[1]))\n  ];\n\n  let all = [\n    [\"red\", \"red\"],\n    [\"red\", \"black\"],\n    [\"green\", \"black\"],\n    [\"green\", \"green\"]\n  ];\n\n  let pos = [\n    [\"white\", \"white\"],\n    [\"red\", \"black\"],\n    [\"green\", \"black\"],\n    [\"white\", \"white\"]\n  ];\n\n  let sick = [\n    [\"red\", \"red\"],\n    [\"red\", \"black\"],\n    [\"white\", \"white\"],\n    [\"white\", \"white\"]\n  ]\n\n  let health = [\n    [\"white\", \"white\"],\n    [\"white\", \"white\"],\n    [\"green\", \"black\"],\n    [\"green\", \"green\"]\n  ];\n\n\n  let colors = {\"all\" : all, \"sick\": sick, \"pos\": pos, \"health\": health}\n\n  let conds = {\n    red_dot: g[1] / (g[1] + g[2]),\n    dot_red: g[1] / (g[1] + g[0]),\n    red: (g[0] + g[1]) / _.sum(g),\n    dot: (g[1] + g[2]) / _.sum(g),\n    green: 1 - (g[0] + g[1]) / _.sum(g),\n    dot_green: g[2] / (g[3] + g[2])\n  };\n\n  return {\n    proportions: proportions,\n    percentages: percentages,\n    g: g,\n    conds: conds,\n    colours: colors[positive_tests]\n  };\n}\n"},{"methodName":"interpret","cellName":"ojs-cell-28","inline":false,"source":"viewof p_d = Inputs.range([0, 1], {step: 0.01, value: 0.99, label: \"P(✅|💉)\"})\n"},{"methodName":"interpret","cellName":"ojs-cell-29","inline":false,"source":"viewof p_n = Inputs.range([0, 1], {step: 0.05, value: 0.05, label: \"P(✅|😇)\"})\n"},{"methodName":"interpret","cellName":"ojs-cell-30","inline":false,"source":"viewof d = Inputs.range([0, 1], {step: 0.01, value: 0.01, label: \"P(💉)\"})\n"},{"methodName":"interpret","cellName":"ojs-cell-31","inline":false,"source":"texmd`\nP(✅) = ${p_d} × ${d} + ${p_n} × (1 - ${d}) = ${Math.round(p_d * d + p_n * (1 - d) * 100)/100}\n`\n"},{"methodName":"interpret","cellName":"ojs-cell-32","inline":false,"source":"texmd`P(💉|✅)=(${p_d} × ${d}) ÷ ${Math.round(p_d * d + p_n * (1 - d) * 100)/100} = \n${Math.round((p_d * d) / (p_d * d + p_n * (1 - d)) * 100)/100}\n\nThis means that given our settings there's only a ${Math.round((p_d * d) / (p_d * d + p_n * (1 - d)) * 100)}%\nchance that somebody that tests postive for drugs is drug user. Obviously there's\na clear ethical/moral arguments to be made against removing the welfare benefits \nfrom somebody who tests positive for drugs. But if our settings are correct,\nthen there's also a clear **mathematical** argument to be made for it being \na bad idea.\n`\n"},{"methodName":"interpret","cellName":"ojs-cell-33","inline":false,"source":"function circle(x, y, fill, stroke) {\n  return `<circle cx=\"${x}\" cy=\"${y}\" r=\"20\" stroke=\"none\" fill=\"${fill}\" stroke-width=\"0\"></circle>\n<circle cx=\"${x}\" cy=\"${y}\" r=\"10\" stroke=\"${fill}\" fill=\"${stroke}\" stroke-width=\"0\"></circle>`;\n}\n"},{"methodName":"interpret","cellName":"ojs-cell-34","inline":false,"source":"full_grid = _.flatten(\n  _.range(10).map((y) =>\n    _.range(10)\n      .map((x) => 44 * (x + 1))\n      .map((x) => [x, 44 * (y + 1)])\n  )\n)\n"},{"methodName":"interpret","cellName":"ojs-cell-35","inline":false,"source":"function round3(x) {\n  return Math.round(x * 1000) / 1000;\n}\n"},{"methodName":"interpret","cellName":"ojs-cell-36","inline":false,"source":"function getvalue(x) {\n  if (x === \"red\") {\n    return red;\n  }\n\n  if (x === \"blue\") {\n    return blue;\n  }\n\n  if (x === \"green\") {\n    return green;\n  }\n}\n\n"},{"methodName":"interpret","cellName":"ojs-cell-37","inline":false,"source":"viewof blue2 = Inputs.input(10)\n"},{"methodName":"interpret","cellName":"ojs-cell-38","inline":false,"source":"viewof red2 = Inputs.input(10)\n"},{"methodName":"interpret","cellName":"ojs-cell-39","inline":false,"source":"viewof blue2_with = Inputs.input(5)\n"},{"methodName":"interpret","cellName":"ojs-cell-40","inline":false,"source":"viewof red2_with = Inputs.input(5)\n"},{"methodName":"interpret","cellName":"ojs-cell-41","inline":false,"source":"function frac(decimal, den) {\n  const n = Math.round(decimal * den);\n\n  return md`${tex`\\frac{${n}}{${den}}`}`;\n}\n"},{"methodName":"interpret","cellName":"ojs-cell-42","inline":false,"source":"import { texmd } from \"@kelleyvanevert/katex-within-markdown\"\n"},{"methodName":"interpret","cellName":"ojs-cell-43","inline":false,"source":"parsedSpec = {\n  return vega.parse(spec3);\n}\n"},{"methodName":"interpret","cellName":"ojs-cell-44","inline":false,"source":"spec3 = {\n  return {\n    $schema: \"https://vega.github.io/schema/vega/v5.0.json\",\n    padding: 0,\n    width: 500,\n    height: 100,\n    layout: {\n      padding: 0,\n      columns: 1\n    },\n    marks: [\n      {\n        type: \"group\",\n        encode: {\n          update: {\n            width: {\n              value: 1000\n            },\n            height: {\n              value: 130\n            }\n          }\n        },\n        data: [\n          {\n            name: \"tree\",\n            values: coin_data,\n            transform: [\n              {\n                type: \"stratify\",\n                key: \"id\",\n                parentKey: \"parent\"\n              },\n              {\n                type: \"tree\",\n                method: \"tidy\",\n                size: [500, 200],\n                as: [\"x\", \"y\", \"depth\", \"children\"]\n              }\n            ]\n          },\n          {\n            name: \"links\",\n            source: \"tree\",\n            transform: [\n              {\n                type: \"treelinks\",\n                key: \"id\"\n              },\n              {\n                type: \"linkpath\",\n                orient: \"horizontal\",\n                shape: \"line\"\n              }\n            ]\n          }\n        ],\n        scales: [\n          {\n            name: \"color\",\n            domain: [0, 1, 2, 3, 4, 5],\n            type: \"sequential\",\n            range: \"ramp\"\n          }\n        ],\n        marks: [\n          {\n            type: \"path\",\n            from: {\n              data: \"links\"\n            },\n            encode: {\n              update: {\n                path: {\n                  field: \"path\"\n                },\n                stroke: {\n                  value: \"black\"\n                }\n              }\n            }\n          },\n          {\n            type: \"symbol\",\n            from: {\n              data: \"tree\"\n            },\n            encode: {\n              enter: {\n                size: {\n                  value: 50\n                },\n                stroke: {\n                  value: \"black\"\n                }\n              },\n              update: {\n                x: {\n                  field: \"x\"\n                },\n                y: {\n                  field: \"y\"\n                },\n                fill: {\n                  field: \"color\"\n                }\n              }\n            }\n          },\n          {\n            type: \"text\",\n            from: {\n              data: \"tree\"\n            },\n            encode: {\n              enter: {\n                text: {\n                  field: \"name\"\n                },\n                fontSize: {\n                  value: 0\n                },\n                baseline: {\n                  value: \"bottom\"\n                }\n              },\n              update: {\n                x: {\n                  field: \"x\"\n                },\n                y: {\n                  field: \"y\"\n                }\n              }\n            }\n          }\n        ]\n      }\n    ]\n  };\n}\n"},{"methodName":"interpret","cellName":"ojs-cell-45","inline":false,"source":"vega = require(\"https://cdn.jsdelivr.net/npm/vega@5/build/vega.js\")\n"},{"methodName":"interpret","cellName":"ojs-cell-46","inline":false,"source":"coin_data = [\n  { name: \"START\", id: 1, parent: \"\", color: \"red\" },\n  ...d3.range(2, 2 ** coins).map((i) => {\n    return {\n      name: i % 2 ? \"T\" : \"H\",\n      id: i,\n      parent: Math.floor(i / 2)\n    };\n  })\n].map((x) => {\n  let colors = { H: \"black\", T: \"white\", START: \"red\" };\n  x.color = colors[x.name];\n  return x;\n})\n"},{"methodName":"interpretQuiet","source":"shinyInput('plot')"},{"methodName":"interpretQuiet","source":"shinyInput('red')"},{"methodName":"interpretQuiet","source":"shinyInput('blue')"},{"methodName":"interpretQuiet","source":"shinyInput('green')"},{"methodName":"interpretQuiet","source":"shinyInput('t3')"},{"methodName":"interpretQuiet","source":"shinyInput('colors')"},{"methodName":"interpretQuiet","source":"shinyInput('blue2_')"},{"methodName":"interpretQuiet","source":"shinyInput('red2_')"},{"methodName":"interpretQuiet","source":"shinyInput('blue2_with_')"},{"methodName":"interpretQuiet","source":"shinyInput('red2_with_')"},{"methodName":"interpretQuiet","source":"shinyInput('plot2')"},{"methodName":"interpretQuiet","source":"shinyInput('show_double_count')"},{"methodName":"interpretQuiet","source":"shinyInput('show_count')"},{"methodName":"interpretQuiet","source":"shinyInput('sequences')"},{"methodName":"interpretQuiet","source":"shinyInput('coins')"},{"methodName":"interpretQuiet","source":"shinyInput('figure')"},{"methodName":"interpretQuiet","source":"shinyInput('positive_tests')"},{"methodName":"interpretQuiet","source":"shinyInput('incidence')"},{"methodName":"interpretQuiet","source":"shinyInput('p_d')"},{"methodName":"interpretQuiet","source":"shinyInput('p_n')"},{"methodName":"interpretQuiet","source":"shinyInput('d')"},{"methodName":"interpretQuiet","source":"shinyInput('blue2')"},{"methodName":"interpretQuiet","source":"shinyInput('red2')"},{"methodName":"interpretQuiet","source":"shinyInput('blue2_with')"},{"methodName":"interpretQuiet","source":"shinyInput('red2_with')"}]}
</script>
<script type="module">
if (window.location.protocol === "file:") { alert("The OJS runtime does not work with file:// URLs. Please use a web server to view this document."); }
window._ojs.paths.runtimeToDoc = "../../lectures/week11/handout";
window._ojs.paths.runtimeToRoot = "../..";
window._ojs.paths.docToRoot = "../../..";
window._ojs.selfContained = false;
window._ojs.runtime.interpretFromScriptTags();
</script>
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>